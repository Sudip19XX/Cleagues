{"version":3,"mappings":"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","names":["formatAddress","address","startChars","endChars","formatCurrency","value","options","currency","minimumFractionDigits","maximumFractionDigits","compact","formatCompactNumber","formatPercentage","decimals","prefix","suffix","absValue","sign","getPriceChangeClass","change","CHAINS","EVM_NETWORKS","USDC_ADDRESSES","GAME_MODES","TIME_PERIODS","API_ENDPOINTS","STORAGE_KEYS","getItem","key","defaultValue","item","error","setItem","getWalletPreference","setWalletPreference","preference","WalletManager","callback","cb","state","accounts","response","publicKey","balance","chainIdHex","chainId","usdcAddress","data","balanceHex","balanceBigInt","json","message","encodedMessage","walletManager","createWalletButton","container","button","updateButton","showWalletMenu","showWalletModal","overlay","modal","e","option","chain","existingMenu","menu","buttonWidth","chainLabel","chainColor","copyBtn","closeMenu","style","createHeader","header","logo","navigate","nav","navLinks","index","link","checkActive","divider","updateNavVisibility","hash","walletContainer","createSidebar","sidebar","initSidebar","links","l","page","updateActiveState","currentHash","activeLink","createHomePage","bg","createBackgroundLines","hero","createHeroSection","games","createGamesSection","stats","createStatsSection","socialBar","createSocialBar","mouseGlow","createMouseGlow","section","getStartedBtn","learnMoreBtn","title","grid","mode","card","createGameCard","comingSoonCard","createComingSoonCard","getButtonText","name","statsGrid","stat","statCard","bar","socials","social","glow","mouseX","mouseY","currentX","currentY","isVisible","isAnimating","isPageVisible","animationId","animate","dx","dy","startAnimation","ALLOWED_TOKENS","fetchTopTokens","limit","token","symbol","fetchTokenPrices","tokenIds","ids","getCompetitionTimeInfo","now","todayUTC","competitionEnd","timeRemaining","hours","minutes","seconds","searchTokens","query","allTokens","searchLower","nameMatch","symbolMatch","submitDuelPrediction","prediction","simulateTransaction","submitDreamTeam","payload","team","submitCandlePrediction","resolve","BINANCE_TOKENS","activeConnections","fetchHistoricalCandles","interval","tokenInfo","url","kline","subscribeToCandleUpdates","onCandle","streamName","connectionKey","conn","callbacks","wsUrl","ws","isActive","reconnectTimeout","reconnectAttempts","close","connect","event","candle","delay","getTokenDisplayData","getAvailableTokens","subscribeToTickerUpdates","onTicker","ticker","fetchTickerData","fetchMultipleTickers","symbols","allTickers","tickerMap","t","sym","tickerData","activeTickerSubscriptions","createCryptoDuel","selectedTokens","mainContent","tokenGrid","selectionPanel","loadTokens","selectedDuration","gridContainer","unsub","binanceTokens","tokens","renderTokens","updateTokenCardPrice","tokenId","price","priceChange","priceEl","changeEl","oldPrice","addDuelTrackerStyles","styleId","createTokenCard","selectToken","changeClass","_a","updateTokenSelection","updateSelectionPanel","_b","panel","selectionCount","tokenCards","createCompactTokenDisplay","changeA","changeB","diff","period","found","k","btn","closeBtn","removeBtn","startBtn","showPredictionModal","label","priceId","priceStr","priceFontSize","makePrediction","activeDuels","winner","startPriceA","startPriceB","__vitePreload","candleService","tickerA","tickerB","priceService","prices","predictedWinner","durationHours","durationMs","result","duelInfo","showDuelCountdown","isInPanel","livePriceA","livePriceB","tickerUnsubA","tickerUnsubB","countdownElement","setPanelStyles","setFloatingStyles","formatPrice","calcChange","current","start","startTickerUpdates","stopTickerUpdates","renderFloating","remainingMs","secs","timeDisplay","leadingToken","renderPanel","isALeading","isBLeading","isTied","priceElA","priceElB","perfSummaryEl","buildStaticPanel","p","updatePosition","isOnDuelPage","remaining","countdownInterval","determineDuelWinner","countdownOverlay","endPriceA","endPriceB","actualWinner","userWon","showDuelResult","winnerToken","selectedTeam","subscribers","getSelectedTeam","setSelectedTeam","notifySubscribers","subscribeToTeam","shouldOpenModal","setShouldOpenModal","getShouldOpenModal","createDreamTeam","infoCardsSection","liveCompCard","compTimeInfo","timerElement","timeInfo","joinBtn","controlsRow","winnersCard","userTeamsCard","categoryFilters","rightSection","searchBar","selectionBadge","tokenGridWrapper","actionBar","categoryButtons","b","category","filterByCategory","searchInput","searchTimeout","performSearch","syncToGlobalState","updateUI","openCaptainModal","categoryTokens","filteredTokens","isSelected","direction","showName","leftOverlay","rightOverlay","toggleTokenSelection","createConfetti","colors","i","confetti","confettiStyle","badge","newDirection","pageEl","containerEl","infoCards","headerEl","titleDiv","tagline","h1","svg","categories","categoriesClone","tokenGridEl","rightClone","scrollbarStyle","compactCategories","compactRight","countEl","unselectAllBtn","badgeParent","bottomSubmitBtn","renderModalContent","captainIndex","viceIndex","captainSlot","captainToken","capCard","createModalTokenCard","viceSlot","viceToken","viceCard","rosterGrid","rosterTokens","_","rosterIndex","originalIndex","checkAndSubmit","type","isLeader","borderStyle","bgStyle","arrowSvg","swapBtn","viceBtn","modalBody","existingBtn","activePredictions","createTimeBasedAction","iconGradient","pred","createPredictionCard","formattedPrice","updateCardPrice","upBtn","downBtn","startPrediction","activeState","currentPriceEl","startPrice","isWinning","predictionArea","durationSec","startTime","endTime","updateTimer","isOnFrenzyPage","finishPrediction","tracker","displayEl","createFrenzyFloatingTracker","updateFrenzyTrackerContent","resultState","endPrice","isUp","isDown","isTie","won","resetBtn","addFrenzyTrackerStyles","trackerId","color","arrow","activeSubscriptions","candleDataStore","TIMEFRAME_MAP","createPredictCandle","timeframeSelector","selectedTimeframe","loadTokensWithCandles","cleanupSubscriptions","timeframeMinutes","createCandleCard","candles","currentPrice","firstPrice","greenOdds","redOdds","greenCount","c","totalCandles","saveActiveBets","bets","wagerAmount","targetCandleOpenTime","entryPriceRef","timeframe","storedKey","customStatus","restoreActiveBets","saved","bet","intervalMs","candleEndTime","checkPastBet","resurrectActiveBet","predictionData","resolveBet","timeframeMs","candleStartTime","isOnPredictPage","isPending","timeString","stored","getTrackerContainer","updateTrackerItem","generateRealCandleChart","selectedPrediction","unsubscribe","updateCardWithCandle","greenBtn","redBtn","submitBtn","wagerInput","updateSubmitButton","balanceDisplay","userBalance","updateBalance","unsubscribeWallet","amount","currentVal","submitPrediction","predictionKey","existingBet","claimReward","allPrices","minPrice","priceRange","chartHeight","candleWidth","highY","lowY","openY","closeY","wickTop","wickHeight","bodyTop","bodyHeight","isLast","opacity","newPrice","statusEl","indicatorEl","dotEl","storedCandles","lastStoredCandle","chartEl","closedCandle","isWinner","isButtonActive","triggerConfetti","resetPredictionButton","tokenSymbol","tokenName","currentCandleStart","nextCandleEnd","currentBtn","statusLabel","itemId","reward","confettiContainer","size","left","duration","rotation","xOffset","PVP_TOKENS","BATTLE_DURATIONS","EXPIRY_TIMES","TOKEN_META","PVP_DURATION_MINUTES","openBets","myBets","activeBattles","tickerSubscriptions","currentSort","selectedToken","selectedDirection","betAmount","createPvPBattle","gridStyles","backdrop","bettingModal","closeBettingModal","openBetsPanel","acceptModal","cancelModal","sortSelect","renderOpenBets","loadPvPTokens","expiryInterval","checkExpiredBets","loadOpenBets","cleanup","renderTokenGrid","updateTokenCard","openBettingModal","submitBet","battleDuration","expiryMinutes","oppositeDir","matchingBet","referencePrice","battle","showMatchNotification","startBattleCountdown","showBetPlacedNotification","cancelBet","betId","listEl","radarBlips","visibleBets","a","currentUserAddress","isOwnBet","angle","distance","x","y","blip","othersBets","myActiveBets","timeAgo","getTimeAgo","dirColor","dirIcon","dirLabel","myBetsListEl","openCancelMatchModal","openAcceptMatchModal","isOpponentLong","myDirection","myDirColor","oppDirColor","input","slider","confirmBtn","errorMsg","yourAmountDisplay","val","processAcceptBet","closeAcceptMatchModal","modalDirection","modalAmount","modalDuration","modalExpiry","isCustomInput","updateStyles","d","btn5","btn10","dir","amt","amountInput","matchAmount","myBet","notification","updateTracker","resolveBattle","mins","finalPrice","priceWentUp","priceWentDown","prizePool","timestamp","closeCancelMatchModal","expired","widgetElement","createPendingActionWidget","addWidgetStyles","handleWidgetClick","updateWidgetVisibility","currentTeam","isOnDreamTeam","textEl","onRouteChange","BASE_URL","fetchTrendingMarkets","transformEvents","fetchMarkets","active","closed","order","ascending","tag_id","slug","params","searchMarkets","fetchMarketsByCategory","tagId","market","_c","formatVolume","num","createPredictionMarket","controls","searchContainer","categoryContainer","activeCategory","cat","loadMarkets","bounceTimer","search","markets","createMarketCard","yesPrice","noPrice","sidebarElement","appContainerElement","mainElement","headerElement","createApp","app","renderRoute","path","isGameMode","component","create404Page","init","appContainer"],"ignoreList":[],"sources":["../../src/utils/formatters.js","../../src/utils/constants.js","../../src/services/storageService.js","../../src/wallet/walletManager.js","../../src/wallet/WalletConnect.js","../../src/components/Header.js","../../src/components/Sidebar.js","../../src/components/HomePage.js","../../src/utils/tokenWhitelist.js","../../src/services/priceService.js","../../src/contracts/gameContract.js","../../src/services/candleService.js","../../src/components/games/CryptoDuel.js","../../src/utils/teamState.js","../../src/components/games/DreamTeam.js","../../src/components/games/TimeBasedAction.js","../../src/components/games/PredictCandle.js","../../src/components/games/PvPBattle.js","../../src/components/PendingActionWidget.js","../../src/services/polymarketService.js","../../src/components/PredictionMarket.js","../../src/App.js","../../src/main.js"],"sourcesContent":["// Formatting Utilities\n\n/**\n * Format wallet address to shortened version\n * @param {string} address - Full wallet address\n * @param {number} startChars - Number of characters to show at start\n * @param {number} endChars - Number of characters to show at end\n * @returns {string} Formatted address\n */\nexport function formatAddress(address, startChars = 6, endChars = 4) {\n    if (!address) return '';\n    if (address.length <= startChars + endChars) return address;\n    return `${address.slice(0, startChars)}...${address.slice(-endChars)}`;\n}\n\n/**\n * Format currency value\n * @param {number} value - Numeric value\n * @param {object} options - Formatting options\n * @returns {string} Formatted currency\n */\nexport function formatCurrency(value, options = {}) {\n    const {\n        currency = 'USD',\n        minimumFractionDigits = 2,\n        maximumFractionDigits = 6,\n        compact = false,\n    } = options;\n\n    if (value === null || value === undefined) return '$0.00';\n\n    // Handle compact notation for large numbers\n    if (compact && Math.abs(value) >= 1000) {\n        return formatCompactNumber(value, { prefix: '$' });\n    }\n\n    return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency,\n        minimumFractionDigits,\n        maximumFractionDigits,\n    }).format(value);\n}\n\n/**\n * Format percentage value\n * @param {number} value - Numeric value\n * @param {number} decimals - Number of decimal places\n * @returns {string} Formatted percentage\n */\nexport function formatPercentage(value, decimals = 2) {\n    if (value === null || value === undefined) return '0.00%';\n\n    const sign = value >= 0 ? '+' : '';\n    return `${sign}${value.toFixed(decimals)}%`;\n}\n\n/**\n * Format large numbers with K, M, B suffixes\n * @param {number} value - Numeric value\n * @param {object} options - Formatting options\n * @returns {string} Formatted number\n */\nexport function formatCompactNumber(value, options = {}) {\n    const { decimals = 2, prefix = '', suffix = '' } = options;\n\n    if (value === null || value === undefined) return `${prefix}0${suffix}`;\n\n    const absValue = Math.abs(value);\n    const sign = value < 0 ? '-' : '';\n\n    if (absValue >= 1e9) {\n        return `${sign}${prefix}${(value / 1e9).toFixed(decimals)}B${suffix}`;\n    }\n    if (absValue >= 1e6) {\n        return `${sign}${prefix}${(value / 1e6).toFixed(decimals)}M${suffix}`;\n    }\n    if (absValue >= 1e3) {\n        return `${sign}${prefix}${(value / 1e3).toFixed(decimals)}K${suffix}`;\n    }\n\n    return `${sign}${prefix}${value.toFixed(decimals)}${suffix}`;\n}\n\n/**\n * Format timestamp to readable date\n * @param {number|Date} timestamp - Timestamp or Date object\n * @param {object} options - Formatting options\n * @returns {string} Formatted date\n */\nexport function formatDate(timestamp, options = {}) {\n    const {\n        includeTime = false,\n        relative = false,\n    } = options;\n\n    const date = timestamp instanceof Date ? timestamp : new Date(timestamp);\n\n    if (relative) {\n        return formatRelativeTime(date);\n    }\n\n    if (includeTime) {\n        return new Intl.DateTimeFormat('en-US', {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit',\n        }).format(date);\n    }\n\n    return new Intl.DateTimeFormat('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n    }).format(date);\n}\n\n/**\n * Format relative time (e.g., \"2 hours ago\")\n * @param {Date} date - Date object\n * @returns {string} Relative time string\n */\nexport function formatRelativeTime(date) {\n    const now = new Date();\n    const diffMs = now - date;\n    const diffSec = Math.floor(diffMs / 1000);\n    const diffMin = Math.floor(diffSec / 60);\n    const diffHour = Math.floor(diffMin / 60);\n    const diffDay = Math.floor(diffHour / 24);\n\n    if (diffSec < 60) return 'just now';\n    if (diffMin < 60) return `${diffMin} minute${diffMin > 1 ? 's' : ''} ago`;\n    if (diffHour < 24) return `${diffHour} hour${diffHour > 1 ? 's' : ''} ago`;\n    if (diffDay < 7) return `${diffDay} day${diffDay > 1 ? 's' : ''} ago`;\n\n    return formatDate(date);\n}\n\n/**\n * Format token amount with proper decimals\n * @param {number|string} amount - Token amount\n * @param {number} decimals - Token decimals\n * @returns {string} Formatted token amount\n */\nexport function formatTokenAmount(amount, decimals = 18) {\n    if (!amount) return '0';\n\n    const value = typeof amount === 'string' ? parseFloat(amount) : amount;\n    const divisor = Math.pow(10, decimals);\n    const formatted = value / divisor;\n\n    if (formatted < 0.01) {\n        return formatted.toExponential(2);\n    }\n\n    return formatted.toLocaleString(undefined, {\n        minimumFractionDigits: 2,\n        maximumFractionDigits: 6,\n    });\n}\n\n/**\n * Get price change icon\n * @param {number} change - Price change percentage\n * @returns {string} Icon character\n */\nexport function getPriceChangeIcon(change) {\n    if (change > 0) return '';\n    if (change < 0) return '';\n    return '';\n}\n\n/**\n * Get price change class name\n * @param {number} change - Price change percentage\n * @returns {string} CSS class name\n */\nexport function getPriceChangeClass(change) {\n    if (change > 0) return 'positive';\n    if (change < 0) return 'negative';\n    return 'neutral';\n}\n\n/**\n * Truncate text with ellipsis\n * @param {string} text - Text to truncate\n * @param {number} maxLength - Maximum length\n * @returns {string} Truncated text\n */\nexport function truncateText(text, maxLength = 50) {\n    if (!text || text.length <= maxLength) return text;\n    return `${text.slice(0, maxLength)}...`;\n}\n","// Application Constants\n\n// Supported Chains\nexport const CHAINS = {\n  EVM: 'evm',\n  SOLANA: 'solana',\n};\n\n// EVM Networks\nexport const EVM_NETWORKS = {\n  ETHEREUM: {\n    id: 1,\n    name: 'Ethereum',\n    rpcUrl: 'https://eth.llamarpc.com',\n    blockExplorer: 'https://etherscan.io',\n  },\n  POLYGON: {\n    id: 137,\n    name: 'Polygon',\n    rpcUrl: 'https://polygon-rpc.com',\n    blockExplorer: 'https://polygonscan.com',\n  },\n  ARBITRUM: {\n    id: 42161,\n    name: 'Arbitrum',\n    rpcUrl: 'https://arb1.arbitrum.io/rpc',\n    blockExplorer: 'https://arbiscan.io',\n  },\n  BASE: {\n    id: 8453,\n    name: 'Base',\n    rpcUrl: 'https://mainnet.base.org',\n    blockExplorer: 'https://basescan.org',\n  },\n};\n\n// Solana Networks\nexport const SOLANA_NETWORKS = {\n  MAINNET: {\n    name: 'Solana Mainnet',\n    rpcUrl: 'https://api.mainnet-beta.solana.com',\n    blockExplorer: 'https://explorer.solana.com',\n  },\n  DEVNET: {\n    name: 'Solana Devnet',\n    rpcUrl: 'https://api.devnet.solana.com',\n    blockExplorer: 'https://explorer.solana.com?cluster=devnet',\n  },\n};\n\n// USDC Contract Addresses\nexport const USDC_ADDRESSES = {\n  [EVM_NETWORKS.ETHEREUM.id]: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n  [EVM_NETWORKS.POLYGON.id]: '0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359', // Native USDC\n  [EVM_NETWORKS.ARBITRUM.id]: '0xaf88d065e77c8cC2239327C5EDb3A432268e5831',\n  [EVM_NETWORKS.BASE.id]: '0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913',\n  SOLANA: 'EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v', // Native USDC on Solana\n};\n\n// Game Modes\nexport const GAME_MODES = {\n  CRYPTO_DUEL: {\n    name: 'Crypto Duel',\n    description: \"Select two distinct tokens and predict which will outperform the other in real-time. It's a battle of relative strengthchoose the stronger contender to claim victory.\",\n    path: '/crypto-duel',\n    icon: `<svg width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <defs>\n            <linearGradient id=\"vs-grad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n              <stop offset=\"0%\" style=\"stop-color:#09C285\"/>\n              <stop offset=\"100%\" style=\"stop-color:#07a371\"/>\n            </linearGradient>\n          </defs>\n          <style>\n             @keyframes pulse-vs {\n               0%, 100% { transform: scale(1); }\n               50% { transform: scale(1.1); }\n             }\n             .vs-text { animation: pulse-vs 2s ease-in-out infinite; transform-origin: center; }\n          </style>\n          <text x=\"32\" y=\"42\" text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-weight=\"900\" font-size=\"32\" fill=\"#09C285\" style=\"font-style: italic; letter-spacing: -2px;\" class=\"vs-text\">VS</text>\n        </svg>`,\n  },\n  DREAM_TEAM: {\n    name: 'Dream Team',\n    description: 'Assemble a squad of 15 tokens, predict market movements, and outperform other players. Climb the leaderboards & get massive rewards.',\n    path: '/dream-team',\n    icon: `<svg width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <defs>\n            <linearGradient id=\"team-grad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n              <stop offset=\"0%\" style=\"stop-color:#09C285\"/>\n              <stop offset=\"100%\" style=\"stop-color:#07a371\"/>\n            </linearGradient>\n          </defs>\n          <!-- Center person (appears first) -->\n          <g class=\"team-member-1\">\n            <circle cx=\"32\" cy=\"22\" r=\"6\" fill=\"url(#team-grad)\" stroke=\"none\"/>\n            <path d=\"M20 48C20 38 25 34 32 34C39 34 44 38 44 48\" fill=\"url(#team-grad)\" stroke=\"none\"/>\n          </g>\n          \n          <!-- Left front person (appears second - 0.5s delay) -->\n          <g class=\"team-member-2\">\n            <circle cx=\"16\" cy=\"26\" r=\"5\" fill=\"url(#team-grad)\" opacity=\"0.8\" stroke=\"none\"/>\n            <path d=\"M8 48C8 40 11 36 16 36C21 36 24 40 24 48\" fill=\"url(#team-grad)\" opacity=\"0.8\" stroke=\"none\"/>\n          </g>\n          \n          <!-- Right front person (appears third - 1s delay) -->\n          <g class=\"team-member-3\">\n            <circle cx=\"48\" cy=\"26\" r=\"5\" fill=\"url(#team-grad)\" opacity=\"0.8\" stroke=\"none\"/>\n            <path d=\"M40 48C40 40 43 36 48 36C53 36 56 40 56 48\" fill=\"url(#team-grad)\" opacity=\"0.8\" stroke=\"none\"/>\n          </g>\n          \n          <!-- Left back person (appears fourth - 1.5s delay) -->\n          <g class=\"team-member-4\">\n            <circle cx=\"10\" cy=\"30\" r=\"4\" fill=\"url(#team-grad)\" opacity=\"0.6\" stroke=\"none\"/>\n            <path d=\"M4 48C4 42 6 38 10 38C14 38 16 42 16 48\" fill=\"url(#team-grad)\" opacity=\"0.6\" stroke=\"none\"/>\n          </g>\n          \n          <!-- Right back person (appears fifth - 2s delay) -->\n          <g class=\"team-member-5\">\n            <circle cx=\"54\" cy=\"30\" r=\"4\" fill=\"url(#team-grad)\" opacity=\"0.6\" stroke=\"none\"/>\n            <path d=\"M48 48C48 42 50 38 54 38C58 38 60 42 60 48\" fill=\"url(#team-grad)\" opacity=\"0.6\" stroke=\"none\"/>\n          </g>\n        </svg>`,\n  },\n  TIME_BASED: {\n    name: '1min Frenzy',\n    description: \"Feel the rush with quick decisions. Predict the price movement in just 60 seconds. Beat the high-intensity race against time.\",\n    path: '/time-based',\n    icon: `<svg width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <defs>\n            <linearGradient id=\"time-grad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n              <stop offset=\"0%\" style=\"stop-color:#09C285\"/>\n              <stop offset=\"100%\" style=\"stop-color:#07a371\"/>\n            </linearGradient>\n          </defs>\n          <style>\n              @keyframes tick-tock {\n                  0% { transform: rotate(0deg); }\n                  100% { transform: rotate(360deg); }\n              }\n              .clock-hand {\n                  transform-origin: 32px 36px;\n                  animation: tick-tock 2s linear infinite;\n              }\n          </style>\n\n          <!-- Top Plunger Button (y=16 to 20) -->\n          <rect x=\"25\" y=\"16\" width=\"14\" height=\"4\" rx=\"2\" stroke=\"url(#time-grad)\" stroke-width=\"2.5\" fill=\"none\"/>\n          \n          <!-- Stem (y=20 to 24) -->\n          <path d=\"M32 20 V 24\" stroke=\"url(#time-grad)\" stroke-width=\"2.5\"/>\n\n          <!-- Body (y=24 to 48, cy=36, r=12) -->\n          <circle cx=\"32\" cy=\"36\" r=\"12\" stroke=\"url(#time-grad)\" stroke-width=\"2.5\"/>\n\n          <!-- Side Button -->\n          <path d=\"M42 27 L45 24\" stroke=\"url(#time-grad)\" stroke-width=\"2.5\" stroke-linecap=\"round\"/>\n\n          <!-- Hands -->\n          <g class=\"clock-hand\">\n             <path d=\"M32 36 V 28\" stroke=\"url(#time-grad)\" stroke-width=\"2.5\" stroke-linecap=\"round\"/>\n             <path d=\"M32 36 L 37 41\" stroke=\"url(#time-grad)\" stroke-width=\"2.5\" stroke-linecap=\"round\"/>\n          </g>\n          \n          <!-- Center Dot -->\n          <circle cx=\"32\" cy=\"36\" r=\"2\" fill=\"url(#time-grad)\"/>\n        </svg>`,\n  },\n  PREDICT_CANDLE: {\n    name: 'Predict Candle',\n    description: 'Put your technical analysis skills to the test. Study market patterns to forecast the direction of the upcoming candle. Will it close green or red?',\n    path: '/predict-candle',\n    icon: `<svg width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n          <defs>\n            <linearGradient id=\"green-grad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n              <stop offset=\"0%\" style=\"stop-color:#09C285\"/>\n              <stop offset=\"100%\" style=\"stop-color:#07a371\"/>\n            </linearGradient>\n            <linearGradient id=\"red-grad\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n              <stop offset=\"0%\" style=\"stop-color:#EF4444\"/>\n              <stop offset=\"100%\" style=\"stop-color:#DC2626\"/>\n            </linearGradient>\n          </defs>\n          <style>\n            @keyframes slide-up {\n              0% { opacity: 0; transform: translateY(15px); }\n              20% { opacity: 1; transform: translateY(0); }\n              80% { opacity: 1; transform: translateY(0); }\n              100% { opacity: 0; transform: translateY(0); }\n            }\n            @keyframes slide-down {\n              0% { opacity: 0; transform: translateY(-15px); }\n              20% { opacity: 1; transform: translateY(0); }\n              80% { opacity: 1; transform: translateY(0); }\n              100% { opacity: 0; transform: translateY(0); }\n            }\n            \n            .c-anim { opacity: 0; }\n            \n            .candle-1 { animation: slide-up 4s ease-out infinite; animation-delay: 0s; }\n            .candle-2 { animation: slide-down 4s ease-out infinite; animation-delay: 0.8s; }\n            .candle-3 { animation: slide-up 4s ease-out infinite; animation-delay: 1.6s; }\n            .candle-4 { animation: slide-down 4s ease-out infinite; animation-delay: 2.4s; }\n            .candle-5 { animation: slide-up 4s ease-out infinite; animation-delay: 3.2s; }\n          </style>\n\n          <!-- Candle 1 - Green (Up) -->\n          <g class=\"candle-1 c-anim\">\n            <line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"48\" stroke=\"url(#green-grad)\" stroke-width=\"2\"/>\n            <rect x=\"9\" y=\"30\" width=\"6\" height=\"12\" fill=\"url(#green-grad)\" rx=\"1\" stroke=\"none\"/>\n          </g>\n          \n          <!-- Candle 2 - Red (Down) -->\n          <g class=\"candle-2 c-anim\">\n            <line x1=\"22\" y1=\"18\" x2=\"22\" y2=\"46\" stroke=\"url(#red-grad)\" stroke-width=\"2\"/>\n            <rect x=\"19\" y=\"24\" width=\"6\" height=\"12\" fill=\"url(#red-grad)\" rx=\"1\" stroke=\"none\"/>\n          </g>\n          \n          <!-- Candle 3 - Green (Up) -->\n          <g class=\"candle-3 c-anim\">\n            <line x1=\"32\" y1=\"22\" x2=\"32\" y2=\"50\" stroke=\"url(#green-grad)\" stroke-width=\"2\"/>\n            <rect x=\"29\" y=\"32\" width=\"6\" height=\"14\" fill=\"url(#green-grad)\" rx=\"1\" stroke=\"none\"/>\n          </g>\n          \n          <!-- Candle 4 - Red (Down) -->\n          <g class=\"candle-4 c-anim\">\n            <line x1=\"42\" y1=\"16\" x2=\"42\" y2=\"44\" stroke=\"url(#red-grad)\" stroke-width=\"2\"/>\n            <rect x=\"39\" y=\"22\" width=\"6\" height=\"14\" fill=\"url(#red-grad)\" rx=\"1\" stroke=\"none\"/>\n          </g>\n          \n          <!-- Candle 5 - Green (Up) -->\n          <g class=\"candle-5 c-anim\">\n            <line x1=\"52\" y1=\"14\" x2=\"52\" y2=\"42\" stroke=\"url(#green-grad)\" stroke-width=\"2\"/>\n            <rect x=\"49\" y=\"20\" width=\"6\" height=\"16\" fill=\"url(#green-grad)\" rx=\"1\" stroke=\"none\"/>\n          </g>\n        </svg>`,\n  },\n  PVP_MODE: {\n    name: 'PvP Battle',\n    description: 'One player goes Long, the other goes Shortonly <strong>one can win</strong>. Lock in your prediction and challenge an opponent in this winner-takes-all showdown.',\n    path: '/pvp-battle', // Placeholder path\n    icon: `<svg width=\"64\" height=\"64\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <style>\n        @keyframes clash-l-strike {\n           0%, 100% { transform: translate(0, 0) rotate(0deg); } /* Crossed Guard */\n           20% { transform: translate(-4px, 4px) rotate(-15deg); } /* Windup (Pull back) */\n           40% { transform: translate(2px, -2px) rotate(5deg); } /* Strike/Clash! */\n           60% { transform: translate(0, 0) rotate(0deg); } /* Recoil/Return */\n        }\n        @keyframes clash-r-strike {\n           0%, 100% { transform: translate(0, 0) rotate(0deg); } /* Crossed Guard */\n           20% { transform: translate(4px, 4px) rotate(15deg); } /* Windup (Pull back) */\n           40% { transform: translate(-2px, -2px) rotate(-5deg); } /* Strike/Clash! */\n           60% { transform: translate(0, 0) rotate(0deg); } /* Recoil/Return */\n        }\n        .sword-main-l {\n           transform-origin: center;\n           animation: clash-l-strike 1.2s infinite ease-in-out;\n           transform-box: fill-box;\n        }\n        .sword-main-r {\n           transform-origin: center;\n           animation: clash-r-strike 1.2s infinite ease-in-out;\n           transform-box: fill-box;\n        }\n      </style>\n      <g transform=\"translate(14, 14) scale(1.5)\">\n        <!-- Green Sword (Left/Up) -->\n        <g class=\"sword-main-l\">\n          <path d=\"M21 3v5l-11 9l-4 4l-3 -3l4 -4l9 -11z\" stroke=\"#09C285\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M5 13l6 6\" stroke=\"#09C285\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </g>\n        <!-- Red Sword (Right/Down) -->\n        <g class=\"sword-main-r\">\n          <path d=\"M14.32 17.32l3.68 3.68l3 -3l-3.365 -3.365\" stroke=\"#EF4444\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M10 5.5l-2 -2.5h-5v5l3 2.5\" stroke=\"#EF4444\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </g>\n      </g>\n    </svg>`,\n  },\n};\n\n// Time Periods\nexport const TIME_PERIODS = {\n  ONE_MIN: { hours: 1 / 60, label: '1M', minutes: 1 },\n  TEN_MINS: { hours: 10 / 60, label: '10M', minutes: 10 },\n  THIRTY_MINS: { hours: 0.5, label: '30M', minutes: 30 },\n  ONE_HOUR: { hours: 1, label: '1H', minutes: 60 },\n  FOUR_HOURS: { hours: 4, label: '4H', minutes: 240 },\n  ONE_DAY: { hours: 24, label: '1D', minutes: 1440 },\n};\n\n// Point Multipliers\nexport const MULTIPLIERS = {\n  CAPTAIN: 2,\n  VICE_CAPTAIN: 1.5,\n  REGULAR: 1,\n};\n\n// API Endpoints\nexport const API_ENDPOINTS = {\n  COINGECKO_MARKETS: 'https://api.coingecko.com/api/v3/coins/markets',\n  COINGECKO_PRICE: 'https://api.coingecko.com/api/v3/simple/price',\n};\n\n// Local Storage Keys\nexport const STORAGE_KEYS = {\n  WALLET_PREFERENCE: 'crypto_leagues_wallet_pref',\n  THEME: 'crypto_leagues_theme',\n  DRAFT_PREDICTIONS: 'crypto_leagues_drafts',\n};\n\n// Contract Addresses (Placeholder - Update with actual deployed contracts)\nexport const CONTRACT_ADDRESSES = {\n  [EVM_NETWORKS.ETHEREUM.id]: {\n    GAME_PREDICTION: '0x0000000000000000000000000000000000000000',\n    TEAM_MANAGEMENT: '0x0000000000000000000000000000000000000000',\n    LEADERBOARD: '0x0000000000000000000000000000000000000000',\n  },\n  [EVM_NETWORKS.POLYGON.id]: {\n    GAME_PREDICTION: '0x0000000000000000000000000000000000000000',\n    TEAM_MANAGEMENT: '0x0000000000000000000000000000000000000000',\n    LEADERBOARD: '0x0000000000000000000000000000000000000000',\n  },\n  SOLANA: {\n    GAME_PREDICTION: '11111111111111111111111111111111',\n    TEAM_MANAGEMENT: '11111111111111111111111111111111',\n    LEADERBOARD: '11111111111111111111111111111111',\n  },\n};\n\n// Top Crypto Tokens (Fallback if API fails)\nexport const TOP_TOKENS = [\n  { id: 'bitcoin', symbol: 'BTC', name: 'Bitcoin' },\n  { id: 'ethereum', symbol: 'ETH', name: 'Ethereum' },\n  { id: 'binancecoin', symbol: 'BNB', name: 'BNB' },\n  { id: 'solana', symbol: 'SOL', name: 'Solana' },\n  { id: 'ripple', symbol: 'XRP', name: 'XRP' },\n  { id: 'cardano', symbol: 'ADA', name: 'Cardano' },\n  { id: 'dogecoin', symbol: 'DOGE', name: 'Dogecoin' },\n  { id: 'polkadot', symbol: 'DOT', name: 'Polkadot' },\n  { id: 'polygon', symbol: 'MATIC', name: 'Polygon' },\n  { id: 'chainlink', symbol: 'LINK', name: 'Chainlink' },\n];\n","// Local Storage Service\n\nimport { STORAGE_KEYS } from '../utils/constants.js';\n\n/**\n * Get item from local storage\n * @param {string} key - Storage key\n * @param {*} defaultValue - Default value if key doesn't exist\n * @returns {*} Stored value or default\n */\nexport function getItem(key, defaultValue = null) {\n    try {\n        const item = localStorage.getItem(key);\n        return item ? JSON.parse(item) : defaultValue;\n    } catch (error) {\n        console.error(`Error reading from localStorage (${key}):`, error);\n        return defaultValue;\n    }\n}\n\n/**\n * Set item in local storage\n * @param {string} key - Storage key\n * @param {*} value - Value to store\n */\nexport function setItem(key, value) {\n    try {\n        localStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n        console.error(`Error writing to localStorage (${key}):`, error);\n    }\n}\n\n/**\n * Remove item from local storage\n * @param {string} key - Storage key\n */\nexport function removeItem(key) {\n    try {\n        localStorage.removeItem(key);\n    } catch (error) {\n        console.error(`Error removing from localStorage (${key}):`, error);\n    }\n}\n\n/**\n * Clear all items from local storage\n */\nexport function clearAll() {\n    try {\n        localStorage.clear();\n    } catch (error) {\n        console.error('Error clearing localStorage:', error);\n    }\n}\n\n// Wallet Preferences\nexport function getWalletPreference() {\n    return getItem(STORAGE_KEYS.WALLET_PREFERENCE);\n}\n\nexport function setWalletPreference(preference) {\n    setItem(STORAGE_KEYS.WALLET_PREFERENCE, preference);\n}\n\n// Theme\nexport function getTheme() {\n    return getItem(STORAGE_KEYS.THEME, 'dark');\n}\n\nexport function setTheme(theme) {\n    setItem(STORAGE_KEYS.THEME, theme);\n}\n\n// Draft Predictions\nexport function getDraftPredictions() {\n    return getItem(STORAGE_KEYS.DRAFT_PREDICTIONS, []);\n}\n\nexport function saveDraftPrediction(prediction) {\n    const drafts = getDraftPredictions();\n    drafts.push({\n        ...prediction,\n        timestamp: Date.now(),\n    });\n    setItem(STORAGE_KEYS.DRAFT_PREDICTIONS, drafts);\n}\n\nexport function removeDraftPrediction(index) {\n    const drafts = getDraftPredictions();\n    drafts.splice(index, 1);\n    setItem(STORAGE_KEYS.DRAFT_PREDICTIONS, drafts);\n}\n\nexport function clearDraftPredictions() {\n    setItem(STORAGE_KEYS.DRAFT_PREDICTIONS, []);\n}\n","// Simplified Wallet Integration (Vanilla JS approach)\n// Note: This is a simplified version without React dependencies\n// For production, consider using React with RainbowKit and Solana wallet adapter\n\nimport { formatAddress } from '../utils/formatters.js';\nimport { CHAINS, USDC_ADDRESSES } from '../utils/constants.js';\nimport { getWalletPreference, setWalletPreference } from '../services/storageService.js';\n\nclass WalletManager {\n    constructor() {\n        this.currentChain = null;\n        this.address = null;\n        this.provider = null;\n        this.listeners = [];\n    }\n\n    // Subscribe to wallet state changes\n    subscribe(callback) {\n        this.listeners.push(callback);\n        return () => {\n            this.listeners = this.listeners.filter(cb => cb !== callback);\n        };\n    }\n\n    // Notify all listeners of state change\n    notify() {\n        const state = this.getState();\n        this.listeners.forEach(callback => callback(state));\n    }\n\n    // Get current wallet state\n    getState() {\n        return {\n            chain: this.currentChain,\n            address: this.address,\n            connected: !!this.address,\n            provider: this.provider,\n        };\n    }\n\n    // Connect to EVM wallet (MetaMask, etc.)\n    async connectEVM() {\n        try {\n            if (!window.ethereum) {\n                throw new Error('No Ethereum wallet found. Please install MetaMask.');\n            }\n\n            // Request account access\n            const accounts = await window.ethereum.request({\n                method: 'eth_requestAccounts',\n            });\n\n            if (accounts.length === 0) {\n                throw new Error('No accounts found');\n            }\n\n            this.currentChain = CHAINS.EVM;\n            this.address = accounts[0];\n            this.provider = window.ethereum;\n\n            // Set up event listeners\n            this.setupEVMListeners();\n\n            // Save preference\n            setWalletPreference({ chain: CHAINS.EVM, address: this.address });\n\n            this.notify();\n\n            return {\n                success: true,\n                address: this.address,\n                chain: this.currentChain,\n            };\n        } catch (error) {\n            console.error('Error connecting to EVM wallet:', error);\n            throw error;\n        }\n    }\n\n    // Connect to Solana wallet (Phantom, etc.)\n    async connectSolana() {\n        try {\n            if (!window.solana || !window.solana.isPhantom) {\n                throw new Error('No Solana wallet found. Please install Phantom.');\n            }\n\n            const response = await window.solana.connect();\n\n            this.currentChain = CHAINS.SOLANA;\n            this.address = response.publicKey.toString();\n            this.provider = window.solana;\n\n            // Set up event listeners\n            this.setupSolanaListeners();\n\n            // Save preference\n            setWalletPreference({ chain: CHAINS.SOLANA, address: this.address });\n\n            this.notify();\n\n            return {\n                success: true,\n                address: this.address,\n                chain: this.currentChain,\n            };\n        } catch (error) {\n            console.error('Error connecting to Solana wallet:', error);\n            throw error;\n        }\n    }\n\n    // Disconnect wallet\n    async disconnect() {\n        if (this.currentChain === CHAINS.SOLANA && window.solana) {\n            await window.solana.disconnect();\n        }\n\n        this.currentChain = null;\n        this.address = null;\n        this.provider = null;\n\n        setWalletPreference(null);\n        this.notify();\n    }\n\n    // Set up EVM event listeners\n    setupEVMListeners() {\n        if (!window.ethereum) return;\n\n        window.ethereum.on('accountsChanged', (accounts) => {\n            if (accounts.length === 0) {\n                this.disconnect();\n            } else {\n                this.address = accounts[0];\n                this.notify();\n            }\n        });\n\n        window.ethereum.on('chainChanged', () => {\n            // Reload page on chain change (recommended by MetaMask)\n            window.location.reload();\n        });\n\n        window.ethereum.on('disconnect', () => {\n            this.disconnect();\n        });\n    }\n\n    // Set up Solana event listeners\n    setupSolanaListeners() {\n        if (!window.solana) return;\n\n        window.solana.on('accountChanged', (publicKey) => {\n            if (publicKey) {\n                this.address = publicKey.toString();\n                this.notify();\n            } else {\n                this.disconnect();\n            }\n        });\n\n        window.solana.on('disconnect', () => {\n            this.disconnect();\n        });\n    }\n\n    // Get balance (simplified - Native)\n    async getBalance() {\n        if (!this.address) return '0';\n\n        try {\n            if (this.currentChain === CHAINS.EVM && window.ethereum) {\n                const balance = await window.ethereum.request({\n                    method: 'eth_getBalance',\n                    params: [this.address, 'latest'],\n                });\n                // Convert from wei to ETH\n                return (parseInt(balance, 16) / 1e18).toFixed(4);\n            } else if (this.currentChain === CHAINS.SOLANA && window.solana) {\n                // Solana balance would require additional setup\n                return '0';\n            }\n        } catch (error) {\n            console.error('Error getting balance:', error);\n            return '0';\n        }\n    }\n\n    // Get USDC Balance\n    async getUSDCBalance() {\n        if (!this.address) return '0.00';\n\n        try {\n            if (this.currentChain === CHAINS.EVM && window.ethereum) {\n                // Get Chain ID\n                const chainIdHex = await window.ethereum.request({ method: 'eth_chainId' });\n                const chainId = parseInt(chainIdHex, 16);\n                const usdcAddress = USDC_ADDRESSES[chainId];\n\n                if (!usdcAddress) {\n                    console.warn(`USDC address not found for chain ID: ${chainId}`);\n                    // Fallback or return 0\n                    return '0.00';\n                }\n\n                // ERC20 balanceOf(address) selector: 0x70a08231\n                // Pad address to 32 bytes (64 chars)\n                const paddedAddress = this.address.substring(2).padStart(64, '0');\n                const data = '0x70a08231' + paddedAddress;\n\n                const balanceHex = await window.ethereum.request({\n                    method: 'eth_call',\n                    params: [{\n                        to: usdcAddress,\n                        data: data\n                    }, 'latest']\n                });\n\n                if (balanceHex === '0x') return '0.00';\n\n                // USDC usually has 6 decimals\n                const balanceBigInt = BigInt(balanceHex);\n                const balance = Number(balanceBigInt) / 1e6;\n                return balance.toFixed(2);\n\n            } else if (this.currentChain === CHAINS.SOLANA) {\n                // Fetch from Solana RPC\n                const response = await fetch('https://api.mainnet-beta.solana.com', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        jsonrpc: '2.0',\n                        id: 1,\n                        method: 'getTokenAccountsByOwner',\n                        params: [\n                            this.address,\n                            { mint: USDC_ADDRESSES.SOLANA },\n                            { encoding: 'jsonParsed' }\n                        ]\n                    })\n                });\n\n                const json = await response.json();\n                if (json.result && json.result.value && json.result.value.length > 0) {\n                    const info = json.result.value[0].account.data.parsed.info;\n                    return info.tokenAmount.uiAmountString || '0.00';\n                }\n                return '0.00';\n            }\n        } catch (error) {\n            console.error('Error fetching USDC balance:', error);\n            return '0.00';\n        }\n        return '0.00';\n    }\n\n    // Sign message\n    async signMessage(message) {\n        if (!this.address) {\n            throw new Error('No wallet connected');\n        }\n\n        try {\n            if (this.currentChain === CHAINS.EVM && window.ethereum) {\n                const signature = await window.ethereum.request({\n                    method: 'personal_sign',\n                    params: [message, this.address],\n                });\n                return signature;\n            } else if (this.currentChain === CHAINS.SOLANA && window.solana) {\n                const encodedMessage = new TextEncoder().encode(message);\n                const signedMessage = await window.solana.signMessage(encodedMessage, 'utf8');\n                return signedMessage.signature;\n            }\n        } catch (error) {\n            console.error('Error signing message:', error);\n            throw error;\n        }\n    }\n\n    // Auto-connect if previously connected\n    async autoConnect() {\n        const preference = getWalletPreference();\n        if (!preference) return false;\n\n        try {\n            if (preference.chain === CHAINS.EVM) {\n                await this.connectEVM();\n                return true;\n            } else if (preference.chain === CHAINS.SOLANA) {\n                await this.connectSolana();\n                return true;\n            }\n        } catch (error) {\n            console.error('Auto-connect failed:', error);\n            return false;\n        }\n    }\n}\n\n// Create singleton instance\nexport const walletManager = new WalletManager();\n\n// Export for use in components\nexport default walletManager;\n","// Wallet Connection UI Component\n\nimport walletManager from './walletManager.js';\nimport { formatAddress } from '../utils/formatters.js';\nimport { CHAINS } from '../utils/constants.js';\n\nexport function createWalletButton(container) {\n  const button = document.createElement('button');\n  button.className = 'wallet-button';\n  button.innerHTML = `\n    <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n      <path d=\"M21 12V7H5a2 2 0 0 1 0-4h14v4\"></path>\n      <path d=\"M3 5v14a2 2 0 0 0 2 2h16v-5\"></path>\n      <path d=\"M18 12a2 2 0 0 0 0 4h4v-4Z\"></path>\n    </svg>\n    <span class=\"wallet-text\">Connect Wallet</span>\n  `;\n\n  // Update button based on wallet state\n  const updateButton = (state) => {\n    if (state.connected) {\n      button.innerHTML = `\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\n          <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n        </svg>\n        <span class=\"wallet-address\">${formatAddress(state.address)}</span>\n      `;\n      button.classList.add('connected');\n    } else {\n      button.innerHTML = `\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M21 12V7H5a2 2 0 0 1 0-4h14v4\"></path>\n          <path d=\"M3 5v14a2 2 0 0 0 2 2h16v-5\"></path>\n          <path d=\"M18 12a2 2 0 0 0 0 4h4v-4Z\"></path>\n        </svg>\n        <span class=\"wallet-text\">Connect Wallet</span>\n      `;\n      button.classList.remove('connected');\n    }\n  };\n\n  // Subscribe to wallet state changes\n  walletManager.subscribe(updateButton);\n\n  // Initial state\n  updateButton(walletManager.getState());\n\n  // Click handler\n  button.addEventListener('click', () => {\n    const state = walletManager.getState();\n    if (state.connected) {\n      showWalletMenu(button);\n    } else {\n      showWalletModal();\n    }\n  });\n\n  container.appendChild(button);\n  return button;\n}\n\nfunction showWalletModal() {\n  // Create modal overlay\n  const overlay = document.createElement('div');\n  overlay.className = 'modal-overlay';\n  overlay.style.animation = 'fadeIn 0.2s ease-out';\n\n  // Create modal\n  const modal = document.createElement('div');\n  modal.className = 'modal';\n  modal.style.maxWidth = '400px';\n\n  modal.innerHTML = `\n    <button class=\"modal-close\"></button>\n    <h2 class=\"modal-title\">Connect Wallet</h2>\n    <div class=\"modal-body\">\n      <p style=\"text-align: center; color: var(--color-text-secondary); margin-bottom: var(--spacing-lg);\">\n        Choose your preferred blockchain to get started\n      </p>\n      \n      <div style=\"display: flex; flex-direction: column; gap: var(--spacing-md);\">\n        <button class=\"wallet-option\" data-chain=\"${CHAINS.EVM}\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-md);\">\n            <div style=\"width: 48px; height: 48px; border-radius: 50%; background: #ffffff; display: flex; align-items: center; justify-content: center; padding: 6px;\">\n              <svg viewBox=\"0 0 318.6 318.6\" style=\"width: 100%; height: 100%;\">\n                <path fill=\"#E2761B\" stroke=\"#E2761B\" d=\"M274.1,35.5l-99.5,73.9L193,65.8z\"/>\n                <path fill=\"#E4761B\" stroke=\"#E4761B\" d=\"M44.4,35.5l98.7,74.6l-17.5-44.3L44.4,35.5z M238.3,206.8l-26.5,40.6l56.7,15.6l16.3-55.3 L238.3,206.8z M33.9,207.7L50.1,263l56.7-15.6l-26.5-40.6L33.9,207.7z\"/>\n                <path fill=\"#E4761B\" stroke=\"#E4761B\" d=\"M103.6,138.2l-15.8,23.9l56.3,2.5l-2-60.5L103.6,138.2z M214.9,138.2l-39.2-34.8l-1.3,61.2 l56.2-2.5L214.9,138.2z M106.8,247.4l33.8-16.5l-29.2-22.8L106.8,247.4z M177.9,230.9l33.9,16.5l-4.7-39.3L177.9,230.9z\"/>\n                <path fill=\"#D7C1B3\" stroke=\"#D7C1B3\" d=\"M211.8,247.4l-33.9-16.5l2.7,22.1l-0.3,9.3L211.8,247.4z M106.8,247.4l31.5,14.9l-0.2-9.3 l2.5-22.1l-33.8,16.5H106.8z\"/>\n                <path fill=\"#233447\" stroke=\"#233447\" d=\"M138.8,193.5l-28.2-8.3l19.9-9.1L138.8,193.5z M179.7,193.5l8.3-17.4l20,9.1L179.7,193.5z\"/>\n                <path fill=\"#CD6116\" stroke=\"#CD6116\" d=\"M106.8,247.4l4.8-40.6l-31.3,0.9L106.8,247.4z M207,206.8l4.8,40.6l26.5-39.7L207,206.8z M230.8,162.1l-56.2,2.5l5.2,28.9l8.3-17.4l20,9.1L230.8,162.1z M110.6,185.2l20-9.1l8.2,17.4l5.3-28.9l-56.3-2.5L110.6,185.2z\"/>\n                <path fill=\"#E4751F\" stroke=\"#E4751F\" d=\"M87.8,162.1l23.6,46l-0.8-22.9L87.8,162.1z M208.1,185.2l-1,22.9l23.7-46L208.1,185.2z M144.1,164.6l-5.3,28.9l6.6,34.1l1.5-44.9L144.1,164.6z M174.6,164.6l-2.7,18l1.2,45l6.7-34.1L174.6,164.6z\"/>\n                <path fill=\"#F6851B\" stroke=\"#F6851B\" d=\"M179.8,193.5l-6.7,34.1l4.8,3.3l29.2-22.8l1-22.9L179.8,193.5z M110.6,185.2l0.8,22.9l29.2,22.8 l4.8-3.3l-6.6-34.1L110.6,185.2z\"/>\n                <path fill=\"#C0AD9E\" stroke=\"#C0AD9E\" d=\"M180,262.3l0.3-9.3l-2.5-2.2h-37.7l-2.3,2.2l0.2,9.3l-31.5-14.9l11,9l22.3,15.5h38.3 l22.4-15.5l11-9L180,262.3z\"/>\n                <path fill=\"#161616\" stroke=\"#161616\" d=\"M177.9,230.9l-4.8-3.3h-27.7l-4.8,3.3l-2.5,22.1l2.3-2.2h37.7l2.5,2.2L177.9,230.9z\"/>\n                <path fill=\"#763D16\" stroke=\"#763D16\" d=\"M278.3,114.2l8.5-40.8l-12.7-37.9l-96.2,71.4l37,31.3l52.3,15.3l11.6-13.5l-5-3.6l8-7.3 l-6.2-4.8l8-6.1L278.3,114.2z M31.8,73.4l8.5,40.8l-5.4,4l8,6.1l-6.1,4.8l8,7.3l-5,3.6l11.5,13.5l52.3-15.3l37-31.3L44.4,35.5 L31.8,73.4z\"/>\n                <path fill=\"#F6851B\" stroke=\"#F6851B\" d=\"M267.2,153.5l-52.3-15.3l15.9,23.9l-23.7,46l31.2-0.4h46.5L267.2,153.5z M103.6,138.2l-52.3,15.3 l-17.4,54.4h46.4l31.1,0.4l-23.6-46L103.6,138.2z M174.6,164.6l3.3-57.7l15.2-41.1h-67.5l15,41.1l3.5,57.7l1.2,18.2l0.1,44.8h27.7 l0.2-44.8L174.6,164.6z\"/>\n              </svg>\n            </div>\n            <div style=\"flex: 1; text-align: left;\">\n              <div style=\"font-weight: 600; margin-bottom: 4px;\">EVM Wallet</div>\n              <div style=\"font-size: 0.875rem; color: var(--color-text-muted);\">MetaMask, Coinbase Wallet, etc.</div>\n            </div>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M9 18l6-6-6-6\"></path>\n            </svg>\n          </div>\n        </button>\n\n        <button class=\"wallet-option\" data-chain=\"${CHAINS.SOLANA}\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-md);\">\n            <div style=\"width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #14141f 0%, #1a1a2e 100%); display: flex; align-items: center; justify-content: center; padding: 8px;\">\n              <svg viewBox=\"0 0 397.7 311.7\" style=\"width: 100%; height: 100%;\">\n                <defs>\n                  <linearGradient id=\"solana-grad1\" x1=\"360.88\" y1=\"351.46\" x2=\"-8.46\" y2=\"-8.88\" gradientUnits=\"userSpaceOnUse\">\n                    <stop offset=\"0\" stop-color=\"#00ffa3\"/>\n                    <stop offset=\"1\" stop-color=\"#dc1fff\"/>\n                  </linearGradient>\n                  <linearGradient id=\"solana-grad2\" x1=\"264.83\" y1=\"401.6\" x2=\"-104.51\" y2=\"32.25\" gradientUnits=\"userSpaceOnUse\">\n                    <stop offset=\"0\" stop-color=\"#00ffa3\"/>\n                    <stop offset=\"1\" stop-color=\"#dc1fff\"/>\n                  </linearGradient>\n                  <linearGradient id=\"solana-grad3\" x1=\"312.55\" y1=\"376.68\" x2=\"-56.79\" y2=\"7.34\" gradientUnits=\"userSpaceOnUse\">\n                    <stop offset=\"0\" stop-color=\"#00ffa3\"/>\n                    <stop offset=\"1\" stop-color=\"#dc1fff\"/>\n                  </linearGradient>\n                </defs>\n                <path d=\"M64.6,237.9c2.4-2.4,5.7-3.8,9.2-3.8h317.4c5.8,0,8.7,7,4.6,11.1l-62.7,62.7c-2.4,2.4-5.7,3.8-9.2,3.8H6.5 c-5.8,0-8.7-7-4.6-11.1L64.6,237.9z\" fill=\"url(#solana-grad1)\"/>\n                <path d=\"M64.6,3.8C67.1,1.4,70.4,0,73.8,0h317.4c5.8,0,8.7,7,4.6,11.1l-62.7,62.7c-2.4,2.4-5.7,3.8-9.2,3.8H6.5 c-5.8,0-8.7-7-4.6-11.1L64.6,3.8z\" fill=\"url(#solana-grad2)\"/>\n                <path d=\"M333.1,120.1c-2.4-2.4-5.7-3.8-9.2-3.8H6.5c-5.8,0-8.7,7-4.6,11.1l62.7,62.7c2.4,2.4,5.7,3.8,9.2,3.8h317.4 c5.8,0,8.7-7,4.6-11.1L333.1,120.1z\" fill=\"url(#solana-grad3)\"/>\n              </svg>\n            </div>\n            <div style=\"flex: 1; text-align: left;\">\n              <div style=\"font-weight: 600; margin-bottom: 4px;\">Solana Wallet</div>\n              <div style=\"font-size: 0.875rem; color: var(--color-text-muted);\">Phantom, Solflare, etc.</div>\n            </div>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M9 18l6-6-6-6\"></path>\n            </svg>\n          </div>\n        </button>\n      </div>\n    </div>\n  `;\n\n  overlay.appendChild(modal);\n  document.body.appendChild(overlay);\n\n  // Close button handler\n  const closeBtn = modal.querySelector('.modal-close');\n  closeBtn.addEventListener('click', () => {\n    overlay.remove();\n  });\n\n  // Overlay click handler\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) {\n      overlay.remove();\n    }\n  });\n\n  // Wallet option handlers\n  const walletOptions = modal.querySelectorAll('.wallet-option');\n  walletOptions.forEach(option => {\n    option.addEventListener('click', async () => {\n      const chain = option.dataset.chain;\n\n      // Show loading state\n      option.innerHTML = '<div class=\"loading\"></div> Connecting...';\n      option.disabled = true;\n\n      try {\n        if (chain === CHAINS.EVM) {\n          await walletManager.connectEVM();\n        } else if (chain === CHAINS.SOLANA) {\n          await walletManager.connectSolana();\n        }\n        overlay.remove();\n      } catch (error) {\n        alert(error.message);\n        option.disabled = false;\n        // Restore original content\n        location.reload(); // Simple approach to reset UI\n      }\n    });\n  });\n}\n\nfunction showWalletMenu(button) {\n  // Remove existing menu if any\n  const existingMenu = button.querySelector('.wallet-menu');\n  if (existingMenu) {\n    existingMenu.remove();\n    return;\n  }\n\n  // Create dropdown menu\n  const menu = document.createElement('div');\n  menu.className = 'wallet-menu';\n  const buttonWidth = button.offsetWidth;\n  menu.style.cssText = `\n    position: absolute;\n    top: calc(100% + 4px);\n    right: 0;\n    background: var(--color-bg-secondary);\n    border: 1px solid var(--glass-border);\n    border-radius: 0 0 var(--radius-lg) var(--radius-lg);\n    padding: var(--spacing-xs);\n    width: ${buttonWidth}px;\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);\n    z-index: 1000;\n    animation: fadeIn 0.15s ease-out;\n  `;\n\n  const state = walletManager.getState();\n  const chainLabel = state.chain === CHAINS.EVM ? 'EVM' : 'SOL';\n  const chainColor = state.chain === CHAINS.EVM ? '#E2761B' : '#9945FF';\n\n  menu.innerHTML = `\n    <!-- Network tag centered -->\n    <div style=\"display: flex; align-items: center; justify-content: center; gap: var(--spacing-xs); padding: var(--spacing-sm) var(--spacing-md);\">\n      <span style=\"font-size: 0.7rem; color: ${chainColor}; background: ${chainColor}20; padding: 2px 8px; border-radius: 4px; font-weight: 600;\">${chainLabel}</span>\n      <span style=\"width: 6px; height: 6px; background: #09C285; border-radius: 50%;\"></span>\n    </div>\n    \n    <!-- Address with copy button -->\n    <div class=\"wallet-menu-item\" style=\"padding: var(--spacing-xs) var(--spacing-md); display: flex; align-items: center; justify-content: center; gap: var(--spacing-xs);\">\n      <span style=\"font-size: 0.8rem; font-family: monospace; color: var(--color-text-secondary);\">${formatAddress(state.address)}</span>\n      <button id=\"copy-address\" style=\"background: none; border: none; cursor: pointer; padding: 2px; color: var(--color-text-muted); display: flex;\" title=\"Copy address\">\n        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"></rect>\n          <path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"></path>\n        </svg>\n      </button>\n    </div>\n    \n    <div style=\"height: 1px; background: var(--glass-border); margin: var(--spacing-xs) 0;\"></div>\n    \n    <!-- Rewards -->\n    <div class=\"wallet-menu-item\" style=\"padding: var(--spacing-sm) var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;\">\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-text-secondary)\" stroke-width=\"2\">\n        <circle cx=\"12\" cy=\"8\" r=\"7\"></circle>\n        <polyline points=\"8.21 13.89 7 23 12 20 17 23 15.79 13.88\"></polyline>\n      </svg>\n      <span style=\"flex: 1; font-size: 0.9rem;\">Rewards</span>\n    </div>\n    \n    <!-- Transactions -->\n    <div class=\"wallet-menu-item\" style=\"padding: var(--spacing-sm) var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;\">\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-text-secondary)\" stroke-width=\"2\">\n        <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"23\"></line>\n        <path d=\"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6\"></path>\n      </svg>\n      <span style=\"flex: 1; font-size: 0.9rem;\">Transactions</span>\n    </div>\n    \n    <div style=\"height: 1px; background: var(--glass-border); margin: var(--spacing-xs) 0;\"></div>\n    \n    <!-- Documentation -->\n    <div class=\"wallet-menu-item\" style=\"padding: var(--spacing-sm) var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;\">\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-text-secondary)\" stroke-width=\"2\">\n        <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path>\n        <polyline points=\"14 2 14 8 20 8\"></polyline>\n        <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"></line>\n        <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"></line>\n      </svg>\n      <span style=\"flex: 1; font-size: 0.9rem;\">Documentation</span>\n    </div>\n    \n    <!-- Privacy Policy -->\n    <div class=\"wallet-menu-item\" style=\"padding: var(--spacing-sm) var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;\">\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-text-secondary)\" stroke-width=\"2\">\n        <path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"></path>\n      </svg>\n      <span style=\"flex: 1; font-size: 0.9rem;\">Privacy Policy</span>\n    </div>\n    \n    <!-- FAQs -->\n    <div class=\"wallet-menu-item\" style=\"padding: var(--spacing-sm) var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;\">\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-text-secondary)\" stroke-width=\"2\">\n        <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n        <path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"></path>\n        <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n      </svg>\n      <span style=\"flex: 1; font-size: 0.9rem;\">FAQs</span>\n    </div>\n    \n    <div style=\"height: 1px; background: var(--glass-border); margin: var(--spacing-xs) 0;\"></div>\n    \n    <!-- Logout -->\n    <div class=\"wallet-menu-item\" id=\"disconnect-wallet\" style=\"padding: var(--spacing-sm) var(--spacing-md); display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); cursor: pointer; color: var(--color-danger);\">\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n        <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"></path>\n        <polyline points=\"16 17 21 12 16 7\"></polyline>\n        <line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\"></line>\n      </svg>\n      <span style=\"font-size: 0.9rem;\">Logout</span>\n    </div>\n  `;\n\n  // Position menu relative to button\n  button.style.position = 'relative';\n  button.appendChild(menu);\n\n  // Copy address handler\n  menu.querySelector('#copy-address').addEventListener('click', (e) => {\n    e.stopPropagation();\n    navigator.clipboard.writeText(state.address);\n    const copyBtn = menu.querySelector('#copy-address');\n    copyBtn.innerHTML = `\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#09C285\" stroke-width=\"2\">\n        <polyline points=\"20 6 9 17 4 12\"></polyline>\n      </svg>\n    `;\n    setTimeout(() => {\n      copyBtn.innerHTML = `\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" ry=\"2\"></rect>\n          <path d=\"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1\"></path>\n        </svg>\n      `;\n    }, 1500);\n  });\n\n  // Disconnect handler\n  menu.querySelector('#disconnect-wallet').addEventListener('click', async () => {\n    await walletManager.disconnect();\n    menu.remove();\n  });\n\n  // Close menu when clicking outside\n  setTimeout(() => {\n    document.addEventListener('click', function closeMenu(e) {\n      if (!menu.contains(e.target) && e.target !== button) {\n        menu.remove();\n        document.removeEventListener('click', closeMenu);\n      }\n    });\n  }, 0);\n}\n\n// Add menu item styles\nconst style = document.createElement('style');\nstyle.textContent = `\n  .wallet-option {\n    width: 100%;\n    padding: var(--spacing-md);\n    background: var(--glass-bg);\n    border: 1px solid var(--glass-border);\n    border-radius: var(--radius-lg);\n    cursor: pointer;\n    transition: all var(--transition-base);\n    color: var(--color-text-primary);\n    font-family: var(--font-primary);\n  }\n\n  .wallet-option:hover {\n    background: rgba(255, 255, 255, 0.08);\n    transform: translateX(4px);\n  }\n\n  .menu-item {\n    width: 100%;\n    padding: var(--spacing-sm) var(--spacing-md);\n    background: transparent;\n    border: none;\n    border-radius: var(--radius-md);\n    cursor: pointer;\n    transition: all var(--transition-fast);\n    color: var(--color-text-primary);\n    font-family: var(--font-primary);\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-sm);\n    font-size: 0.875rem;\n  }\n\n  .menu-item:hover {\n    background: var(--glass-bg);\n  }\n\n  .wallet-menu-item {\n    transition: background 0.15s ease;\n    border-radius: var(--radius-sm);\n  }\n\n  .wallet-menu-item:hover {\n    background: var(--glass-bg);\n  }\n\n\n\n  .wallet-address {\n    font-family: var(--font-primary);\n  }\n`;\ndocument.head.appendChild(style);\n","// Header Component\n\nimport { createWalletButton } from '../wallet/WalletConnect.js';\nimport { navigate } from '../App.js';\n\nexport function createHeader() {\n  const header = document.createElement('header');\n  header.className = 'header';\n\n  const container = document.createElement('div');\n  container.className = 'header-container';\n  container.style.position = 'relative'; // Support absolute centering of children\n\n  // Logo\n  const logo = document.createElement('a');\n  logo.href = '#/';\n  logo.className = 'logo';\n  logo.innerHTML = `\n    <img class=\"logo-icon\" src=\"/assets/logo.png\" alt=\"Crypto Leagues\" width=\"36\" height=\"36\" style=\"object-fit: contain;\" />\n    <div class=\"logo-text\">\n      <div><span class=\"logo-first-letter\">C</span>RYPTO</div>\n      <div><span class=\"logo-first-letter\">L</span>EAGUES</div>\n    </div>\n  `;\n\n  logo.addEventListener('click', (e) => {\n    e.preventDefault();\n    navigate('/');\n  });\n\n  // Navigation\n  // To strictly center it regardless of Logo/Wallet widths, use absolute positioning\n  const nav = document.createElement('nav');\n  nav.className = 'nav';\n  nav.style.display = 'none';\n  nav.style.gap = '24px';\n  nav.style.alignItems = 'center';\n\n  // Absolute centering\n  nav.style.position = 'absolute';\n  nav.style.left = '50%';\n  nav.style.transform = 'translateX(-50%)';\n  nav.style.margin = '0';\n\n  // \"leaderboard picks and rewards\"\n  const navLinks = [\n    { label: 'Leaderboard', path: '/leaderboard' },\n    { label: 'Picks', path: '/picks' },\n    { label: 'Rewards', path: '/rewards' }\n  ];\n\n  navLinks.forEach((item, index) => {\n    const link = document.createElement('a');\n    link.href = `#${item.path}`;\n    link.textContent = item.label;\n    link.className = 'nav-link';\n    link.style.cssText = `\n        color: var(--color-text-secondary);\n        text-decoration: none;\n        font-weight: 500;\n        font-size: 0.95rem;\n        transition: all 0.2s ease;\n        text-transform: capitalize;\n        display: inline-block; /* Required for transform */\n    `;\n    link.addEventListener('mouseenter', () => {\n      link.style.color = '#fff';\n      link.style.transform = 'scale(1.05)'; // Increase size slightly\n    });\n    link.addEventListener('mouseleave', () => {\n      link.style.color = 'var(--color-text-secondary)';\n      link.style.transform = 'scale(1)';\n\n      // Re-apply active color if needed logic is handled by checkActive?\n      // checkActive sets initial color. Mouseleave resets to default.\n      // We should re-run checkActive logic on mouseleave to ensure Active state persists?\n      const hash = window.location.hash.replace('#', '') || '/';\n      if (hash === item.path) {\n        link.style.color = '#fff';\n      }\n    });\n\n    // Add active state styling\n    const checkActive = () => {\n      const hash = window.location.hash.replace('#', '') || '/';\n      if (hash === item.path) {\n        link.style.color = '#fff';\n        link.style.fontWeight = '600';\n      } else {\n        // Only reset if NOT hovering?\n        // Simple: Reset color/weight.\n        link.style.color = 'var(--color-text-secondary)';\n        link.style.fontWeight = '500';\n      }\n    };\n    window.addEventListener('hashchange', checkActive);\n    setTimeout(checkActive, 0);\n\n    link.addEventListener('click', (e) => {\n      e.preventDefault();\n      navigate(item.path);\n    });\n    nav.appendChild(link);\n\n    // Add vertical divider after text (except last)\n    if (index < navLinks.length - 1) {\n      const divider = document.createElement('div');\n      divider.style.cssText = `\n            width: 1px;\n            height: 16px;\n            background: rgba(255, 255, 255, 0.15);\n        `;\n      nav.appendChild(divider);\n    }\n  });\n\n  // Logic to show/hide nav based on page (and wallet? user request didn't mention wallet this time but implies \"logged in\" context usually)\n  // \"header in other pages should have\"\n  const updateNavVisibility = () => {\n    const hash = window.location.hash.replace('#', '') || '/';\n    const isHome = hash === '/' || hash === '' || hash === '/home';\n\n    // Show on other pages\n    if (!isHome) {\n      nav.style.display = 'flex';\n    } else {\n      nav.style.display = 'none';\n    }\n  };\n\n  window.addEventListener('hashchange', updateNavVisibility);\n\n  // Initial check\n  setTimeout(updateNavVisibility, 0);\n\n  // Wallet button container\n  const walletContainer = document.createElement('div');\n  walletContainer.style.display = 'flex';\n  walletContainer.style.alignItems = 'center';\n  walletContainer.style.gap = 'var(--spacing-md)';\n\n  // Create wallet button\n  createWalletButton(walletContainer);\n\n  // Theme switch removed per request\n\n  // Initialize Theme (Default to Dark)\n  const isDarkMode = localStorage.getItem('darkMode') !== 'false';\n  if (isDarkMode) {\n    document.documentElement.classList.add('dark-mode');\n    document.body.classList.add('dark-mode');\n  } else {\n    // If user explicitly set light mode previously, respect it (or force dark if desired?)\n    // \"site should be dark mode by default\" implies default.\n    // If we want to FORCE dark mode always since toggle is gone:\n    // document.documentElement.classList.add('dark-mode');\n    // document.body.classList.add('dark-mode');\n    // But let's stick to reading preference for now.\n    document.documentElement.classList.remove('dark-mode');\n    document.body.classList.remove('dark-mode');\n  }\n\n  // Assemble header\n  container.appendChild(logo);\n  container.appendChild(nav); // Add navigation links\n  container.appendChild(walletContainer);\n  header.appendChild(container);\n\n  return header;\n}\n","// Sidebar Component\n\nexport function createSidebar() {\n  const sidebar = document.createElement('aside');\n  sidebar.id = 'sidebar';\n  sidebar.className = 'sidebar';\n\n  sidebar.innerHTML = `\n    <div class=\"sidebar-content\">\n      <div class=\"sidebar-section\">\n        <div class=\"sidebar-category\">\n          <div class=\"sidebar-category-header\">\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#000\" stroke-width=\"2\">\n              <rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"></rect>\n              <rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"></rect>\n              <rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"></rect>\n              <rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"></rect>\n            </svg>\n            <span style=\"white-space: nowrap; font-size: 0.85rem;\">League Originals</span>\n          </div>\n          \n          <div class=\"sidebar-links\">\n            <a href=\"#dream-team\" class=\"sidebar-link\" data-page=\"dream-team\">\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <style>\n                  @keyframes team-bounce {\n                    0%, 100% { transform: translateY(0); }\n                    50% { transform: translateY(-2px); }\n                  }\n                  .sidebar-link.active .dream-team-filled { \n                    fill: #09C285; \n                    stroke: #09C285; \n                    fill-opacity: 0.2; \n                    animation: team-bounce 2s infinite ease-in-out;\n                  }\n                  .sidebar-link.active .dream-team-outline {\n                    animation: team-bounce 2s infinite ease-in-out 0.2s;\n                  }\n                  .dream-team-filled, .dream-team-outline { transition: all 0.2s; }\n                </style>\n                <path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" class=\"dream-team-outline\"></path>\n                <circle cx=\"9\" cy=\"7\" r=\"4\" class=\"dream-team-filled\"></circle>\n                <path d=\"M22 21v-2a4 4 0 0 0-3-3.87\"></path>\n                <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" class=\"dream-team-filled\"></path>\n              </svg>\n              <span>Dream Team</span>\n            </a>\n            <a href=\"#pvp-battle\" class=\"sidebar-link\" data-page=\"pvp-battle\">\n               <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                 <style>\n                   @keyframes swords-pulse {\n                     0%, 100% { transform: scale(1); }\n                     50% { transform: scale(1.1); }\n                   }\n                   .sidebar-link.active .swords-path {\n                     stroke: #09C285;\n                     animation: swords-pulse 1.5s infinite ease-in-out;\n                     transform-origin: center;\n                     transform-box: fill-box;\n                   }\n                 </style>\n                 <g class=\"swords-path\">\n                   <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/>\n                   <path d=\"M21 3v5l-11 9l-4 4l-3 -3l4 -4l9 -11z\" />\n                   <path d=\"M5 13l6 6\" />\n                   <path d=\"M14.32 17.32l3.68 3.68l3 -3l-3.365 -3.365\" />\n                   <path d=\"M10 5.5l-2 -2.5h-5v5l3 2.5\" />\n                 </g>\n               </svg>\n               <span>PvP Battle</span>\n            </a>\n            \n\n            <a href=\"#predict-candle\" class=\"sidebar-link\" data-page=\"predict-candle\">\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke-width=\"2\">\n                <style>\n                  @keyframes candle-fluctuate {\n                    0%, 100% { transform: scaleY(1); }\n                    50% { transform: scaleY(0.7); }\n                  }\n                  .candle-line { \n                    stroke: currentColor; \n                    transition: stroke 0.2s; \n                    transform-origin: bottom;\n                    transform-box: fill-box;\n                  }\n                  .sidebar-link.active .candle-green { \n                    stroke: #09C285; \n                    animation: candle-fluctuate 1.5s infinite ease-in-out alternate;\n                  }\n                  .sidebar-link.active .candle-red { \n                    stroke: #FF4D4F; \n                    animation: candle-fluctuate 2s infinite ease-in-out alternate-reverse;\n                  }\n                </style>\n                <line x1=\"5\" y1=\"6\" x2=\"5\" y2=\"18\" stroke-width=\"2.5\" class=\"candle-line candle-green\"/>\n                <line x1=\"10\" y1=\"10\" x2=\"10\" y2=\"20\" stroke-width=\"2.5\" class=\"candle-line candle-red\"/>\n                <line x1=\"15\" y1=\"4\" x2=\"15\" y2=\"16\" stroke-width=\"2.5\" class=\"candle-line candle-green\"/>\n                <line x1=\"20\" y1=\"8\" x2=\"20\" y2=\"18\" stroke-width=\"2.5\" class=\"candle-line candle-red\"/>\n              </svg>\n              <span>Predict Candle</span>\n            </a>\n            \n            <a href=\"#time-based\" class=\"sidebar-link\" data-page=\"time-based\">\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <style>\n                  @keyframes tick-sidebar {\n                    from { transform: rotate(0deg); }\n                    to { transform: rotate(360deg); }\n                  }\n                  .tick-hand-sidebar {\n                    transform-origin: 12px 14px;\n                  }\n                  /* Animate only when active */\n                  .sidebar-link.active .tick-hand-sidebar {\n                    animation: tick-sidebar 2s steps(60) infinite;\n                  }\n                </style>\n                <circle cx=\"12\" cy=\"14\" r=\"9\" />\n                <path d=\"M12 5V2M10 2h4\" />\n                <line x1=\"12\" y1=\"14\" x2=\"12\" y2=\"8\" stroke=\"currentColor\" stroke-width=\"1.5\" class=\"tick-hand-sidebar\"/>\n              </svg>\n              <span>1min Frenzy</span>\n            </a>\n\n            <a href=\"#crypto-duel\" class=\"sidebar-link\" data-page=\"crypto-duel\">\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\">\n                <style>\n                  @keyframes vs-pulse {\n                    0%, 100% { transform: scale(1); }\n                    50% { transform: scale(1.2); }\n                  }\n                  .vs-text { \n                    fill: currentColor; \n                    stroke: none; \n                    transition: fill 0.2s; \n                    transform-origin: center; \n                    transform-box: fill-box;\n                  }\n                  .sidebar-link.active .vs-text { \n                    fill: #09C285; \n                    animation: vs-pulse 1.5s infinite ease-in-out;\n                  }\n                </style>\n                <text x=\"12\" y=\"16\" font-size=\"12\" font-weight=\"bold\" text-anchor=\"middle\" class=\"vs-text\">VS</text>\n              </svg>\n              <span>Crypto Duel</span>\n            </a>\n\n          </div>\n        </div>\n        \n        <!-- Prediction Category -->\n        <div class=\"sidebar-category\" style=\"margin-top: var(--spacing-md); border-top: 1px solid var(--glass-border); padding-top: var(--spacing-md);\">\n          <div class=\"sidebar-category-header\">\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#000\" stroke-width=\"2\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n              <path d=\"M12 16v-4\"></path>\n              <path d=\"M12 8h.01\"></path>\n            </svg>\n            <span style=\"white-space: nowrap; font-size: 0.85rem;\">Prediction</span>\n          </div>\n          \n          <div class=\"sidebar-links\">\n            <a href=\"#prediction-market\" class=\"sidebar-link\" data-page=\"prediction-market\">\n              <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                <path d=\"M22 12h-4l-3 9L9 3l-3 9H2\"></path>\n              </svg>\n              <span>Trending Bets</span>\n            </a>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Footer Section -->\n      <div class=\"sidebar-footer\">\n        <a href=\"#faqs\" class=\"sidebar-footer-link\">\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n            <path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"></path>\n            <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>\n          </svg>\n          <span>FAQs</span>\n        </a>\n        <a href=\"#terms\" class=\"sidebar-footer-link\">\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path>\n            <polyline points=\"14 2 14 8 20 8\"></polyline>\n          </svg>\n          <span>Terms & Conditions</span>\n        </a>\n        <a href=\"#team\" class=\"sidebar-footer-link\">\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"></path>\n            <circle cx=\"9\" cy=\"7\" r=\"4\"></circle>\n            <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\"></path>\n            <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path>\n          </svg>\n          <span>Crypto Leagues Team</span>\n        </a>\n      </div>\n      \n      <!-- Live data indicator - pinned to bottom -->\n      <div class=\"sidebar-live-indicator\" style=\"\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        padding: var(--spacing-sm) var(--spacing-md);\n        background: rgba(0, 0, 0, 0.2);\n        border-top: 1px solid rgba(255,255,255,0.05);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 6px;\n      \">\n        <div style=\"width: 6px; height: 6px; background: #09C285; border-radius: 50%; animation: pulse 2s infinite;\"></div>\n        <span style=\"font-size: 0.55rem; color: var(--color-text-muted); opacity: 0.7;\">Prices & data live from Binance</span>\n      </div>\n    </div>\n  `;\n\n  return sidebar;\n}\n\n// Initialize sidebar navigation\nexport function initSidebar() {\n  const links = document.querySelectorAll('.sidebar-link');\n\n  links.forEach(link => {\n    link.addEventListener('click', (e) => {\n      e.preventDefault();\n\n      // Remove active class from all links\n      links.forEach(l => l.classList.remove('active'));\n\n      // Add active class to clicked link\n      link.classList.add('active');\n\n      // Dispatch custom event for navigation\n      const page = link.dataset.page;\n      window.dispatchEvent(new CustomEvent('navigate', { detail: { page } }));\n    });\n  });\n\n  // Function to update active state based on current hash\n  const updateActiveState = () => {\n    // Remove leading slash and hash from the path\n    let currentHash = window.location.hash.slice(1) || 'home';\n    // Remove leading slash if present (e.g., '/dream-team' -> 'dream-team')\n    if (currentHash.startsWith('/')) {\n      currentHash = currentHash.slice(1);\n    }\n\n    // Remove active class from all links first\n    links.forEach(l => l.classList.remove('active'));\n\n    // Find and activate the matching link\n    const activeLink = document.querySelector(`.sidebar-link[data-page=\"${currentHash}\"]`);\n    if (activeLink) {\n      activeLink.classList.add('active');\n    }\n  };\n\n  // Set initial active state\n  updateActiveState();\n\n  // Listen for hash changes to update active state\n  window.addEventListener('hashchange', updateActiveState);\n  window.addEventListener('popstate', updateActiveState);\n}\n","// Home Page Component\nimport { navigate } from '../App.js';\nimport { GAME_MODES } from '../utils/constants.js';\n\nexport function createHomePage() {\n\n  const page = document.createElement('div');\n  page.className = 'home-page';\n\n  // Add futuristic grid background\n  const bg = createBackgroundLines();\n  page.appendChild(bg);\n\n  // Hero Section\n  const hero = createHeroSection();\n  page.appendChild(hero);\n\n  // Games Section\n  const games = createGamesSection();\n  page.appendChild(games);\n\n  // Stats Section\n  const stats = createStatsSection();\n  page.appendChild(stats);\n\n  // Social Sticky Bar\n  const socialBar = createSocialBar();\n  page.appendChild(socialBar);\n\n  // Mouse glow effect\n  const mouseGlow = createMouseGlow();\n  page.appendChild(mouseGlow);\n\n  return page;\n}\n\nfunction createHeroSection() {\n  const section = document.createElement('section');\n  section.style.cssText = `\n    padding: var(--spacing-3xl) 0;\n    text-align: center;\n  `;\n\n  const container = document.createElement('div');\n  container.className = 'container';\n\n  container.innerHTML = `\n    <h1 style=\"font-size: 4rem; margin-bottom: var(--spacing-lg); animation: fadeIn 0.8s ease-out; color: #000000;\">\n      CRYPTO LEAGUES\n    </h1>\n    <p style=\"font-size: 1.2rem; line-height: 1.6; color: var(--color-text-secondary); margin-bottom: var(--spacing-2xl); max-width: 800px; margin-left: auto; margin-right: auto; animation: fadeIn 0.8s ease-out 0.2s both;\">\n      Experience the future of crypto fantasy trading. Compete in high-stakes leagues, predict market movements with precision, and build your dream portfolio.\n      Master the markets, climb the global leaderboards, and earn real rewards in a decentralized, skill-based ecosystem.\n    </p>\n    <div style=\"display: flex; gap: var(--spacing-md); justify-content: center; flex-wrap: wrap; animation: fadeIn 0.8s ease-out 0.4s both;\">\n      <button class=\"btn btn-primary btn-lg\" id=\"get-started\">\n        Get Started\n      </button>\n      <button class=\"btn btn-secondary btn-lg\" id=\"learn-more\">\n        Learn More\n      </button>\n    </div>\n  `;\n\n  section.appendChild(container);\n\n  // Add event listeners after appending\n  setTimeout(() => {\n    const getStartedBtn = section.querySelector('#get-started');\n    const learnMoreBtn = section.querySelector('#learn-more');\n\n    getStartedBtn?.addEventListener('click', () => {\n      navigate('/dream-team');\n    });\n\n    learnMoreBtn?.addEventListener('click', () => {\n      alert('Crypto Leagues is a Web3 fantasy trading platform where you can compete with other players by predicting crypto price movements!');\n    });\n  }, 0);\n\n  return section;\n}\n\nfunction createGamesSection() {\n  const section = document.createElement('section');\n  section.id = 'games';\n  section.style.cssText = `\n    padding: var(--spacing-3xl) 0;\n    background: transparent;\n  `;\n\n  const container = document.createElement('div');\n  container.className = 'container';\n\n  const title = document.createElement('h2');\n  title.textContent = 'Game Modes';\n  title.style.cssText = `\n    text-align: center;\n    margin-bottom: var(--spacing-2xl);\n    font-size: 2.5rem;\n  `;\n  container.appendChild(title);\n\n  const grid = document.createElement('div');\n  grid.className = 'grid'; // Keeping class name for consistency, though it's flex now\n  grid.style.cssText = `\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n    justify-items: center;\n    gap: var(--spacing-md);\n    max-width: 1400px;\n    padding: 0 var(--spacing-md);\n    margin: 0 auto;\n    animation: fadeIn 0.8s ease-out;\n  `;\n\n  // Reorder games: Dream Team, Crypto Duel, Time-Based, Predict Candle\n  const orderedModes = [\n    GAME_MODES.DREAM_TEAM,\n    GAME_MODES.TIME_BASED,\n    GAME_MODES.PREDICT_CANDLE,\n    GAME_MODES.PVP_MODE,\n    GAME_MODES.CRYPTO_DUEL,\n  ];\n\n  orderedModes.forEach((mode, index) => {\n    const card = createGameCard(mode, index);\n    grid.appendChild(card);\n  });\n\n  // Add \"Coming Soon\" card\n  const comingSoonCard = createComingSoonCard(orderedModes.length);\n  grid.appendChild(comingSoonCard);\n\n  container.appendChild(grid);\n  section.appendChild(container);\n\n  return section;\n}\n\nfunction createGameCard(mode, index) {\n  const card = document.createElement('div');\n  card.className = 'card game-mode-card';\n  card.style.cssText = `\n    cursor: pointer;\n    width: 100%;\n    max-width: 350px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    padding: var(--spacing-xl);\n    animation: fadeIn 0.6s ease-out ${index * 0.1}s both;\n  `;\n\n  card.innerHTML = `\n    <div style=\"height: 80px; display: flex; align-items: center; justify-content: center; margin-bottom: var(--spacing-md);\">\n      <div style=\"transform: scale(1.2);\">\n        ${mode.icon}\n      </div>\n    </div>\n    <h3 style=\"margin-bottom: var(--spacing-md); text-align: center; min-height: 1.2em; display: flex; align-items: center;\">\n      ${mode.name}\n    </h3>\n    <p style=\"color: var(--color-text-secondary); text-align: center; margin-bottom: var(--spacing-lg); flex-grow: 1;\">\n      ${mode.description}\n    </p>\n    <button class=\"btn btn-primary\" style=\"width: max-content; margin: 0 auto; padding-left: var(--spacing-xl); padding-right: var(--spacing-xl);\">\n      ${getButtonText(mode.name)}\n    </button>\n  `;\n\n  card.addEventListener('click', () => {\n    navigate(mode.path);\n  });\n\n  return card;\n}\n\nfunction getButtonText(name) {\n  switch (name) {\n    case 'Dream Team': return 'Build Now';\n    case 'Crypto Duel': return 'Find Duel';\n    case 'Predict Candle': return 'Predict';\n    case 'PvP Battle': return 'Compete';\n    default: return 'Play Now';\n  }\n}\n\nfunction createComingSoonCard(index) {\n  const card = document.createElement('div');\n  card.className = 'card coming-soon-card';\n  card.style.cssText = `\n    width: 100%;\n    max-width: 350px;\n    animation: fadeIn 0.6s ease-out ${Object.keys(GAME_MODES).length * 0.1}s both;\n    opacity: 0.7;\n    cursor: not-allowed;\n    position: relative;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    padding: var(--spacing-xl);\n  `;\n\n  card.innerHTML = `\n    <div style=\"height: 80px; display: flex; align-items: center; justify-content: center; margin-bottom: var(--spacing-md);\">\n      <style>\n        @keyframes gradient-spin { \n          to { transform: rotate(360deg); } \n        }\n        .gradient-ring {\n          position: relative;\n          width: 48px;\n          height: 48px;\n          border-radius: 50%;\n          background: transparent;\n        }\n        .gradient-ring::before {\n          content: '';\n          position: absolute;\n          inset: 0;\n          border-radius: 50%;\n          background: conic-gradient(from 0deg, #09C285, #666666, #333333, #333333, #09C285);\n          -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 6px), #000 calc(100% - 6px));\n          mask: radial-gradient(farthest-side, transparent calc(100% - 6px), #000 calc(100% - 6px));\n          animation: gradient-spin 1.2s linear infinite;\n        }\n      </style>\n      <div class=\"gradient-ring\"></div>\n    </div>\n    <p style=\"color: var(--color-text-secondary); text-align: center; margin-bottom: var(--spacing-lg);\">\n      Exciting and competitive modes are coming soon stay tuned for updates!\n    </p>\n\n  `;\n\n  return card;\n}\n\nfunction createStatsSection() {\n  const section = document.createElement('section');\n  section.id = 'stats';\n  section.style.cssText = `\n    padding: var(--spacing-3xl) 0;\n  `;\n\n  const container = document.createElement('div');\n  container.className = 'container';\n\n  const title = document.createElement('h2');\n  title.textContent = 'Platform Stats';\n  title.style.cssText = `\n    text-align: center;\n    margin-bottom: var(--spacing-2xl);\n    font-size: 2.5rem;\n  `;\n  container.appendChild(title);\n\n  const statsGrid = document.createElement('div');\n  statsGrid.className = 'grid grid-4';\n  statsGrid.style.animation = 'fadeIn 0.8s ease-out';\n\n  const stats = [\n    { label: 'Total Players', value: '10,234', icon: '' },\n    { label: 'Active Games', value: '1,456', icon: '' },\n    { label: 'Total Volume', value: '$2.4M', icon: '' },\n    { label: 'Rewards Paid', value: '$156K', icon: '' },\n  ];\n\n  stats.forEach((stat, index) => {\n    const statCard = document.createElement('div');\n    statCard.className = 'card';\n    statCard.style.cssText = `\n      text-align: center;\n      animation: scaleIn 0.6s ease-out ${index * 0.1}s both;\n    `;\n\n    statCard.innerHTML = `\n      <div style=\"font-size: 2.5rem; margin-bottom: var(--spacing-sm);\">\n        ${stat.icon}\n      </div>\n      <div style=\"font-size: 2rem; font-weight: 700; margin-bottom: var(--spacing-sm); background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;\">\n        ${stat.value}\n      </div>\n      <div style=\"color: var(--color-text-secondary); font-size: 0.875rem;\">\n        ${stat.label}\n      </div>\n    `;\n\n    statsGrid.appendChild(statCard);\n  });\n\n  container.appendChild(statsGrid);\n  section.appendChild(container);\n\n  return section;\n}\n\nfunction createBackgroundLines() {\n  const bg = document.createElement('div');\n  bg.style.cssText = `\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n    overflow: hidden;\n    pointer-events: none;\n  `;\n\n  // Grid Lines - smoother animation with reduced opacity and larger grid\n  bg.innerHTML = `\n    <div class=\"grid-container\" style=\"\n      position: absolute;\n      width: 400%;\n      height: 400%;\n      top: -150%;\n      left: -150%;\n      background-image: \n        linear-gradient(rgba(9, 194, 133, 0.12) 1px, transparent 1px),\n        linear-gradient(90deg, rgba(9, 194, 133, 0.12) 1px, transparent 1px);\n      background-size: 50px 50px;\n      transform: perspective(1000px) rotateX(70deg);\n      animation: gridMove 50s linear infinite;\n      will-change: transform;\n    \"></div>\n    \n    <!-- Subtle fade at edges only -->\n    <div style=\"\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: \n        radial-gradient(ellipse 120% 100% at center 100%, transparent 0%, transparent 60%, var(--color-bg-primary) 90%),\n        linear-gradient(to bottom, var(--color-bg-primary) 0%, transparent 5%, transparent 95%, var(--color-bg-primary) 100%),\n        linear-gradient(to right, var(--color-bg-primary) 0%, transparent 5%, transparent 95%, var(--color-bg-primary) 100%);\n      pointer-events: none;\n    \"></div>\n    \n    <style>\n      @keyframes gridMove {\n        0% { transform: perspective(1000px) rotateX(70deg) translateY(0); }\n        100% { transform: perspective(1000px) rotateX(70deg) translateY(50px); }\n      }\n    </style>\n  `;\n\n  return bg;\n}\n\nfunction createSocialBar() {\n  const bar = document.createElement('div');\n  bar.className = 'social-sticky-bar';\n  bar.style.cssText = `\n    position: fixed;\n    right: 0;\n    top: 50%;\n    transform: translateY(-50%);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 0;\n    z-index: 100;\n    padding: 16px 12px;\n    background: transparent;\n    border: 1px solid rgba(255, 255, 255, 0.15);\n    border-right: none;\n    border-radius: 16px 0 0 16px;\n  `;\n\n  const socials = [\n    {\n      name: 'X (Twitter)',\n      url: 'https://x.com/leaguesdotfun',\n      icon: `<svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <path d=\"M4 4l11.733 16h4.267l-11.733 -16z\"/>\n        <path d=\"M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772\"/>\n      </svg>`\n    },\n    {\n      name: 'Discord',\n      url: 'https://discord.gg/cryptoleagues',\n      icon: `<svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <path d=\"M8 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0\"/>\n        <path d=\"M14 12a1 1 0 1 0 2 0a1 1 0 0 0 -2 0\"/>\n        <path d=\"M15.5 17c0 1 1.5 3 2 3c1.5 0 2.833 -1.667 3.5 -3c.667 -1.667 .5 -5.833 -1.5 -11.5c-1.457 -1.015 -3 -1.34 -4.5 -1.5l-.972 1.923a11.913 11.913 0 0 0 -4.053 0l-.975 -1.923c-1.5 .16 -3.043 .485 -4.5 1.5c-2 5.667 -2.167 9.833 -1.5 11.5c.667 1.333 2 3 3.5 3c.5 0 2 -2 2 -3\"/>\n        <path d=\"M7 16.5c3.5 1 6.5 1 10 0\"/>\n      </svg>`\n    },\n    {\n      name: 'Telegram',\n      url: 'https://t.me/cryptoleagues',\n      icon: `<svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <path d=\"M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4\"/>\n      </svg>`\n    },\n    {\n      name: 'Docs',\n      url: 'https://docs.cryptoleagues.io',\n      icon: `<svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <path d=\"M14 3v4a1 1 0 0 0 1 1h4\"/>\n        <path d=\"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z\"/>\n        <path d=\"M9 9l1 0\"/>\n        <path d=\"M9 13l6 0\"/>\n        <path d=\"M9 17l6 0\"/>\n      </svg>`\n    }\n  ];\n\n  bar.innerHTML = `\n    <style>\n      .social-link-item {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      }\n      .social-link {\n        width: 36px;\n        height: 36px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: rgba(255, 255, 255, 0.5);\n        background: transparent;\n        transition: all 0.3s ease;\n        text-decoration: none;\n        position: relative;\n      }\n      .social-link:hover {\n        color: #09C285;\n        transform: scale(1.15);\n      }\n      .social-link svg {\n        width: 18px;\n        height: 18px;\n      }\n      .social-divider {\n        width: 20px;\n        height: 1px;\n        background: rgba(255, 255, 255, 0.1);\n        margin: 8px 0;\n      }\n      .social-link::before {\n        content: attr(data-tooltip);\n        position: absolute;\n        right: 44px;\n        top: 50%;\n        transform: translateY(-50%);\n        background: rgba(0, 0, 0, 0.85);\n        color: white;\n        padding: 6px 10px;\n        border-radius: 6px;\n        font-size: 0.7rem;\n        white-space: nowrap;\n        opacity: 0;\n        visibility: hidden;\n        transition: all 0.2s ease;\n        pointer-events: none;\n        border: 1px solid rgba(255, 255, 255, 0.1);\n      }\n      .social-link:hover::before {\n        opacity: 1;\n        visibility: visible;\n        right: 48px;\n      }\n    </style>\n    ${socials.map((social, index) => `\n      <div class=\"social-link-item\">\n        <a href=\"${social.url}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"social-link\" data-tooltip=\"${social.name}\">\n          ${social.icon}\n        </a>\n        ${index < socials.length - 1 ? '<div class=\"social-divider\"></div>' : ''}\n      </div>\n    `).join('')}\n  `;\n\n  return bar;\n}\n\nfunction createMouseGlow() {\n  const glow = document.createElement('div');\n  glow.className = 'mouse-glow';\n  glow.style.cssText = `\n    position: fixed;\n    width: 400px;\n    height: 400px;\n    border-radius: 50%;\n    background: radial-gradient(circle, rgba(9, 194, 133, 0.15) 0%, rgba(9, 194, 133, 0.05) 30%, transparent 70%);\n    pointer-events: none;\n    z-index: 0;\n    transform: translate(-50%, -50%);\n    transition: opacity 0.3s ease;\n    opacity: 0;\n    will-change: left, top;\n  `;\n\n  let mouseX = 0;\n  let mouseY = 0;\n  let currentX = 0;\n  let currentY = 0;\n  let isVisible = false;\n  let isAnimating = false;\n  let isPageVisible = true;\n  let animationId = null;\n\n  // Smooth animation loop - only runs when needed\n  function animate() {\n    if (!isPageVisible || !isVisible) {\n      isAnimating = false;\n      return;\n    }\n\n    // Smooth interpolation (ease towards mouse position)\n    const dx = mouseX - currentX;\n    const dy = mouseY - currentY;\n\n    currentX += dx * 0.08;\n    currentY += dy * 0.08;\n\n    glow.style.left = currentX + 'px';\n    glow.style.top = currentY + 'px';\n\n    // Stop animating if we're very close to target (within 0.5px)\n    if (Math.abs(dx) < 0.5 && Math.abs(dy) < 0.5) {\n      isAnimating = false;\n      return;\n    }\n\n    animationId = requestAnimationFrame(animate);\n  }\n\n  // Start animation only if not already running\n  function startAnimation() {\n    if (!isAnimating && isPageVisible && isVisible) {\n      isAnimating = true;\n      animate();\n    }\n  }\n\n  // Track mouse movement\n  document.addEventListener('mousemove', (e) => {\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n\n    if (!isVisible) {\n      isVisible = true;\n      glow.style.opacity = '1';\n    }\n\n    // Start animation when mouse moves\n    startAnimation();\n  });\n\n  // Hide when mouse leaves window\n  document.addEventListener('mouseleave', () => {\n    isVisible = false;\n    glow.style.opacity = '0';\n  });\n\n  // Show when mouse enters\n  document.addEventListener('mouseenter', () => {\n    isVisible = true;\n    glow.style.opacity = '1';\n    startAnimation();\n  });\n\n  // Optimization 2: Pause when page is not visible\n  document.addEventListener('visibilitychange', () => {\n    isPageVisible = !document.hidden;\n\n    if (isPageVisible && isVisible) {\n      // Resume animation when page becomes visible\n      startAnimation();\n    } else if (animationId) {\n      // Cancel animation when page hidden\n      cancelAnimationFrame(animationId);\n      isAnimating = false;\n    }\n  });\n\n  return glow;\n}\n","// Token Whitelist\n// Curated list of tokens to display in the Dream Team game\n// Organized by category for easy maintenance\n\n/**\n * Whitelist of allowed token symbols\n * These are the only tokens that will be displayed in the game\n */\nexport const ALLOWED_TOKENS = [\n    // Major Cryptocurrencies\n    'BTC', 'ETH', 'XRP', 'BNB', 'SOL', 'TRX', 'DOGE', 'ADA', 'BCH', 'LINK',\n    'HYPE', 'XLM', 'XMR', 'LTC', 'SUI', 'AVAX', 'HBAR', 'ZEC', 'SHIB', 'CRO',\n    'TON', 'MNT', 'UNI', 'DOT', 'AAVE', 'TAO', 'BGB', 'CC', 'NEAR',\n    'ASTER', 'ETC', 'ENA', 'ICP', 'PEPE', 'PUMP', 'KAS', 'WLD', 'QNT', 'POL',\n    'APT', 'ALGO', 'TRUMP', 'ARB', 'VET', 'FIL', 'ATOM',\n\n    // DeFi & Layer 2\n    'RENDER', 'SEI', 'CAKE', 'BONK', 'IP', 'JUP', 'MORPHO', 'PENGU', 'AERO',\n    'MYX', 'DASH', 'OP', 'VIRTUAL', 'INJ', 'STX', 'STRK', 'XTZ', 'TIA', 'GRT',\n    'ETHFI', 'FLOKI', '2Z', 'ENS', 'IOTA', 'PENDLE', 'PYTH', 'BAT', 'LUNC',\n    'MERL', 'FARTCOIN', 'WIF', 'SAND', 'HNT', 'S', 'FLOW', 'JASMY', 'XPL',\n    'GALA', 'THETA', 'GNO', 'CHZ', 'SYRUP', 'COMP', 'RAY', 'BORG', 'MON',\n    'MANA', 'NEO', 'ZK', 'ZRO', 'ZBCN', 'PIPPIN', 'AR', '1INCH', 'CHEEMS',\n\n    // Infrastructure & Gaming\n    'EIGEN', 'WAL', 'IMX', 'RUNE', 'EGLD', 'ZORA', 'KMNO', 'WEMIX', 'W',\n    'JTO', 'AXS', 'DYDX', 'SNX', 'SFP', 'MET', 'KAITO', 'QTUM', 'GRASS',\n    'KSM', 'AIOZ', 'LINEA', 'RON', 'CORE', 'MOVE', 'AXL', 'AKT', 'KAVA',\n    'BABYDOGE', 'MINA', 'BERA', 'DGB', 'EOS', 'H'\n];\n\n/**\n * Map of token symbols to their CoinGecko IDs\n * This helps with fetching the correct token data\n */\nexport const TOKEN_ID_MAP = {\n    'BTC': 'bitcoin',\n    'ETH': 'ethereum',\n    'XRP': 'ripple',\n    'BNB': 'binancecoin',\n    'SOL': 'solana',\n    'TRX': 'tron',\n    'DOGE': 'dogecoin',\n    'ADA': 'cardano',\n    'BCH': 'bitcoin-cash',\n    'LINK': 'chainlink',\n    'HYPE': 'hyperliquid',\n    'XLM': 'stellar',\n    'XMR': 'monero',\n    'LTC': 'litecoin',\n    'SUI': 'sui',\n    'AVAX': 'avalanche-2',\n    'HBAR': 'hedera-hashgraph',\n    'ZEC': 'zcash',\n    'SHIB': 'shiba-inu',\n    'CRO': 'crypto-com-chain',\n    'TON': 'the-open-network',\n    'MNT': 'mantle',\n    'UNI': 'uniswap',\n    'DOT': 'polkadot',\n    'AAVE': 'aave',\n    'TAO': 'bittensor',\n    'BGB': 'bitget-token',\n    'CC': 'canton-network',\n    'NEAR': 'near',\n    'ASTER': 'aster',\n    'ETC': 'ethereum-classic',\n    'ENA': 'ethena',\n    'ICP': 'internet-computer',\n    'PEPE': 'pepe',\n    'PUMP': 'pump-fun',\n    'KAS': 'kaspa',\n    'WLD': 'worldcoin-wld',\n    'QNT': 'quant-network',\n    'POL': 'matic-network',\n    'APT': 'aptos',\n    'ALGO': 'algorand',\n    'TRUMP': 'official-trump',\n    'ARB': 'arbitrum',\n    'VET': 'vechain',\n    'FIL': 'filecoin',\n    'ATOM': 'cosmos',\n    'RENDER': 'render-token',\n    'SEI': 'sei-network',\n    'CAKE': 'pancakeswap-token',\n    'BONK': 'bonk',\n    'IP': 'story-protocol',\n    'JUP': 'jupiter-exchange-solana',\n    'MORPHO': 'morpho',\n    'PENGU': 'pudgy-penguins',\n    'AERO': 'aerodrome-finance',\n    'MYX': 'myx-finance',\n    'DASH': 'dash',\n    'OP': 'optimism',\n    'VIRTUAL': 'virtuals-protocol',\n    'INJ': 'injective-protocol',\n    'STX': 'blockstack',\n    'STRK': 'starknet',\n    'XTZ': 'tezos',\n    'TIA': 'celestia',\n    'GRT': 'the-graph',\n    'ETHFI': 'ether-fi',\n    'FLOKI': 'floki',\n    '2Z': 'doublezero',\n    'ENS': 'ethereum-name-service',\n    'IOTA': 'iota',\n    'PENDLE': 'pendle',\n    'PYTH': 'pyth-network',\n    'BAT': 'basic-attention-token',\n    'LUNC': 'terra-luna',\n    'MERL': 'merlin-chain',\n    'FARTCOIN': 'fartcoin',\n    'WIF': 'dogwifcoin',\n    'SAND': 'the-sandbox',\n    'HNT': 'helium',\n    'S': 'sonic-2',\n    'FLOW': 'flow',\n    'JASMY': 'jasmycoin',\n    'XPL': 'plasma-finance',\n    'GALA': 'gala',\n    'THETA': 'theta-token',\n    'GNO': 'gnosis',\n    'CHZ': 'chiliz',\n    'SYRUP': 'maple',\n    'COMP': 'compound-governance-token',\n    'RAY': 'raydium',\n    'BORG': 'swissborg',\n    'MON': 'monad',\n    'MANA': 'decentraland',\n    'NEO': 'neo',\n    'ZK': 'zksync',\n    'ZRO': 'layerzero',\n    'ZBCN': 'zebec-protocol',\n    'PIPPIN': 'pippin',\n    'AR': 'arweave',\n    '1INCH': '1inch',\n    'CHEEMS': 'cheems',\n    'EIGEN': 'eigenlayer',\n    'WAL': 'walrus',\n    'IMX': 'immutable-x',\n    'RUNE': 'thorchain',\n    'EGLD': 'elrond-erd-2',\n    'ZORA': 'zora',\n    'KMNO': 'kamino',\n    'WEMIX': 'wemix-token',\n    'W': 'wormhole',\n    'JTO': 'jito-governance-token',\n    'AXS': 'axie-infinity',\n    'DYDX': 'dydx-chain',\n    'SNX': 'havven',\n    'SFP': 'safepal',\n    'MET': 'metronome',\n    'KAITO': 'kaito',\n    'QTUM': 'qtum',\n    'GRASS': 'grass',\n    'KSM': 'kusama',\n    'AIOZ': 'aioz-network',\n    'LINEA': 'linea',\n    'RON': 'ronin',\n    'CORE': 'coredaoorg',\n    'MOVE': 'movement',\n    'AXL': 'axelar',\n    'AKT': 'akash-network',\n    'KAVA': 'kava',\n    'BABYDOGE': 'baby-doge-coin',\n    'MINA': 'mina-protocol',\n    'BERA': 'berachain-bera',\n    'DGB': 'digibyte',\n    'EOS': 'eos',\n    'H': 'humanity-protocol'\n};\n","// Price Service - CoinGecko API Integration\n\nimport { API_ENDPOINTS } from '../utils/constants.js';\nimport { ALLOWED_TOKENS } from '../utils/tokenWhitelist.js';\n\n/**\n * Fetch top cryptocurrencies by market cap\n * @param {number} limit - Number of tokens to fetch\n * @returns {Promise<Array>} Array of token data\n */\nexport async function fetchTopTokens(limit = 20) {\n    try {\n        // Fetch a larger set to ensure we get enough whitelisted tokens after filtering\n        // CoinGecko free tier allows up to 250 per page\n        const fetchLimit = 250;\n        const response = await fetch(\n            `${API_ENDPOINTS.COINGECKO_MARKETS}?vs_currency=usd&order=market_cap_desc&per_page=${fetchLimit}&page=1&sparkline=false&price_change_percentage=24h,7d`\n        );\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n\n        // Filter to only include whitelisted tokens\n        const whitelistedTokens = data.filter(token => {\n            const symbol = token.symbol.toUpperCase();\n            return ALLOWED_TOKENS.includes(symbol);\n        });\n\n        // Return only the requested limit\n        return whitelistedTokens.slice(0, limit).map(token => ({\n            id: token.id,\n            symbol: token.symbol,\n            name: token.name,\n            image: token.image,\n            currentPrice: token.current_price,\n            marketCap: token.market_cap,\n            marketCapRank: token.market_cap_rank,\n            priceChange24h: token.price_change_percentage_24h,\n            priceChange7d: token.price_change_percentage_7d_in_currency,\n            volume24h: token.total_volume,\n            circulatingSupply: token.circulating_supply,\n            totalSupply: token.total_supply,\n            high24h: token.high_24h,\n            low24h: token.low_24h,\n        }));\n    } catch (error) {\n        console.error('Error fetching top tokens:', error);\n        throw error;\n    }\n}\n\n/**\n * Fetch specific token prices\n * @param {Array<string>} tokenIds - Array of CoinGecko token IDs\n * @returns {Promise<Object>} Object with token prices\n */\nexport async function fetchTokenPrices(tokenIds) {\n    try {\n        const ids = tokenIds.join(',');\n        const response = await fetch(\n            `${API_ENDPOINTS.COINGECKO_PRICE}?ids=${ids}&vs_currencies=usd&include_24hr_change=true&include_market_cap=true`\n        );\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        return await response.json();\n    } catch (error) {\n        console.error('Error fetching token prices:', error);\n        throw error;\n    }\n}\n\n/**\n * Fetch historical price data for a token\n * @param {string} tokenId - CoinGecko token ID\n * @param {number} days - Number of days of historical data\n * @returns {Promise<Array>} Array of price data points\n */\nexport async function fetchHistoricalPrices(tokenId, days = 7) {\n    try {\n        const response = await fetch(\n            `https://api.coingecko.com/api/v3/coins/${tokenId}/market_chart?vs_currency=usd&days=${days}`\n        );\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n\n        return data.prices.map(([timestamp, price]) => ({\n            timestamp,\n            price,\n            date: new Date(timestamp),\n        }));\n    } catch (error) {\n        console.error('Error fetching historical prices:', error);\n        throw error;\n    }\n}\n\n/**\n * Get the UTC 00:00 opening price for a token (for daily competitions)\n * @param {string} tokenId - CoinGecko token ID\n * @returns {Promise<Object>} Object with opening price and timestamp\n */\nexport async function getUTCOpeningPrice(tokenId) {\n    try {\n        // Fetch OHLC data for the last 1 day to get today's opening price\n        const response = await fetch(\n            `https://api.coingecko.com/api/v3/coins/${tokenId}/ohlc?vs_currency=usd&days=1`\n        );\n\n        if (!response.ok) {\n            throw new Error(`HTTP error! status: ${response.status}`);\n        }\n\n        const data = await response.json();\n\n        if (data && data.length > 0) {\n            // OHLC data format: [timestamp, open, high, low, close]\n            // Get the first candle which should be closest to midnight UTC\n            const firstCandle = data[0];\n            return {\n                timestamp: firstCandle[0],\n                openPrice: firstCandle[1],\n                date: new Date(firstCandle[0]),\n            };\n        }\n\n        throw new Error('No OHLC data available');\n    } catch (error) {\n        console.error('Error fetching UTC opening price:', error);\n        throw error;\n    }\n}\n\n/**\n * Get UTC 00:00 opening prices for multiple tokens\n * @param {Array<string>} tokenIds - Array of CoinGecko token IDs\n * @returns {Promise<Object>} Object with token IDs as keys and opening prices as values\n */\nexport async function getUTCOpeningPrices(tokenIds) {\n    try {\n        const prices = {};\n\n        // Fetch opening price for each token\n        // Note: This makes multiple API calls, consider rate limiting in production\n        for (const tokenId of tokenIds) {\n            try {\n                const data = await getUTCOpeningPrice(tokenId);\n                prices[tokenId] = data;\n            } catch (error) {\n                console.warn(`Could not fetch opening price for ${tokenId}:`, error.message);\n                prices[tokenId] = null;\n            }\n        }\n\n        return prices;\n    } catch (error) {\n        console.error('Error fetching UTC opening prices:', error);\n        throw error;\n    }\n}\n\n/**\n * Get competition time info (UTC based daily competition)\n * Competition starts at UTC 00:00 and ends at UTC 23:59:59\n * @returns {Object} Object with competition timing info\n */\nexport function getCompetitionTimeInfo() {\n    const now = new Date();\n\n    // Get today's UTC 00:00\n    const todayUTC = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), 0, 0, 0));\n\n    // Competition end time: UTC 23:59:59\n    const competitionEnd = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), 23, 59, 59));\n\n    // Time remaining in milliseconds\n    const timeRemaining = competitionEnd.getTime() - now.getTime();\n\n    // Format time remaining\n    const hours = Math.floor(timeRemaining / (1000 * 60 * 60));\n    const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));\n    const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);\n\n    return {\n        competitionStart: todayUTC,\n        competitionEnd: competitionEnd,\n        timeRemaining: timeRemaining,\n        timeRemainingFormatted: `${hours}h ${minutes}m ${seconds}s`,\n        isActive: timeRemaining > 0,\n        startTimestamp: todayUTC.getTime(),\n        endTimestamp: competitionEnd.getTime(),\n    };\n}\n\n/**\n * Search for tokens by name or symbol (within whitelist only)\n * @param {string} query - Search query\n * @returns {Promise<Array>} Array of matching tokens\n */\nexport async function searchTokens(query) {\n    try {\n        // Fetch all whitelisted tokens (up to 250)\n        const allTokens = await fetchTopTokens(250);\n\n        // Filter tokens based on search query\n        const searchLower = query.toLowerCase().trim();\n        const matchingTokens = allTokens.filter(token => {\n            const nameMatch = token.name.toLowerCase().includes(searchLower);\n            const symbolMatch = token.symbol.toLowerCase().includes(searchLower);\n            return nameMatch || symbolMatch;\n        });\n\n        // Return top 20 matches\n        return matchingTokens.slice(0, 20);\n    } catch (error) {\n        console.error('Error searching tokens:', error);\n        throw error;\n    }\n}\n\n/**\n * Calculate price change between two values\n * @param {number} oldPrice - Previous price\n * @param {number} newPrice - Current price\n * @returns {number} Percentage change\n */\nexport function calculatePriceChange(oldPrice, newPrice) {\n    if (!oldPrice || oldPrice === 0) return 0;\n    return ((newPrice - oldPrice) / oldPrice) * 100;\n}\n\n/**\n * Determine which token performed better\n * @param {Object} tokenA - First token with price data\n * @param {Object} tokenB - Second token with price data\n * @returns {string} 'A', 'B', or 'TIE'\n */\nexport function compareTokenPerformance(tokenA, tokenB) {\n    const changeA = tokenA.priceChange24h || 0;\n    const changeB = tokenB.priceChange24h || 0;\n\n    if (Math.abs(changeA - changeB) < 0.01) return 'TIE';\n    return changeA > changeB ? 'A' : 'B';\n}\n\n/**\n * Create a price update listener (mock WebSocket for demo)\n * @param {Array<string>} tokenIds - Token IDs to watch\n * @param {Function} callback - Callback function for price updates\n * @returns {Function} Cleanup function\n */\nexport function subscribeToPriceUpdates(tokenIds, callback) {\n    // In a real app, this would use WebSocket\n    // For now, we'll poll every 30 seconds\n    const interval = setInterval(async () => {\n        try {\n            const prices = await fetchTokenPrices(tokenIds);\n            callback(prices);\n        } catch (error) {\n            console.error('Error in price update:', error);\n        }\n    }, 30000);\n\n    // Return cleanup function\n    return () => clearInterval(interval);\n}\n","// Game Contract Interaction Utilities\n\nimport walletManager from '../wallet/walletManager.js';\nimport { CONTRACT_ADDRESSES } from '../utils/constants.js';\nimport { getABI, CONTRACT_TYPES } from './interfaces.js';\n\n/**\n * Submit a crypto duel prediction\n * @param {Object} prediction - Prediction data\n * @returns {Promise<Object>} Transaction result\n */\nexport async function submitDuelPrediction(prediction) {\n    const { tokenA, tokenB, predictedWinner, duration } = prediction;\n\n    // For demo purposes, simulate contract interaction\n    console.log('Submitting duel prediction:', prediction);\n\n    try {\n        const state = walletManager.getState();\n        if (!state.connected) {\n            throw new Error('Wallet not connected');\n        }\n\n        // Simulate transaction\n        await simulateTransaction();\n\n        // In production, this would interact with the actual smart contract\n        const predictionId = Math.floor(Math.random() * 1000000);\n\n        return {\n            success: true,\n            predictionId,\n            txHash: `0x${Math.random().toString(16).substring(2, 66)}`,\n            message: 'Prediction submitted successfully!',\n        };\n    } catch (error) {\n        console.error('Error submitting prediction:', error);\n        throw error;\n    }\n}\n\n/**\n * Submit a dream team\n * @param {Object} team - Team data\n * @returns {Promise<Object>} Transaction result\n */\nexport async function submitDreamTeam(payload) {\n    const { team, captainIndex, viceCaptainIndex } = payload;\n\n    console.log('Submitting dream team:', payload);\n\n    try {\n        const state = walletManager.getState();\n        if (!state.connected) {\n            throw new Error('Wallet not connected');\n        }\n\n        if (team.length !== 15) {\n            throw new Error('Team must have exactly 15 tokens');\n        }\n\n        await simulateTransaction();\n\n        const teamId = Math.floor(Math.random() * 1000000);\n\n        return {\n            success: true,\n            teamId,\n            txHash: `0x${Math.random().toString(16).substring(2, 66)}`,\n            message: 'Team submitted successfully!',\n        };\n    } catch (error) {\n        console.error('Error submitting team:', error);\n        throw error;\n    }\n}\n\n/**\n * Submit a time-based action\n * @param {Object} action - Action data\n * @returns {Promise<Object>} Transaction result\n */\nexport async function submitTimeAction(action) {\n    const { challengeId, actionType, token } = action;\n\n    console.log('Submitting time action:', action);\n\n    try {\n        const state = walletManager.getState();\n        if (!state.connected) {\n            throw new Error('Wallet not connected');\n        }\n\n        await simulateTransaction();\n\n        const actionId = Math.floor(Math.random() * 1000000);\n\n        return {\n            success: true,\n            actionId,\n            txHash: `0x${Math.random().toString(16).substring(2, 66)}`,\n            message: 'Action submitted successfully!',\n        };\n    } catch (error) {\n        console.error('Error submitting action:', error);\n        throw error;\n    }\n}\n\n/**\n * Submit a candle prediction\n * @param {Object} prediction - Prediction data\n * @returns {Promise<Object>} Transaction result\n */\nexport async function submitCandlePrediction(prediction) {\n    const { token, isGreen, timeframe } = prediction;\n\n    console.log('Submitting candle prediction:', prediction);\n\n    try {\n        const state = walletManager.getState();\n        if (!state.connected) {\n            throw new Error('Wallet not connected');\n        }\n\n        await simulateTransaction();\n\n        const predictionId = Math.floor(Math.random() * 1000000);\n\n        return {\n            success: true,\n            predictionId,\n            txHash: `0x${Math.random().toString(16).substring(2, 66)}`,\n            message: 'Prediction submitted successfully!',\n        };\n    } catch (error) {\n        console.error('Error submitting prediction:', error);\n        throw error;\n    }\n}\n\n/**\n * Get user stats from leaderboard contract\n * @param {string} address - User address\n * @returns {Promise<Object>} User stats\n */\nexport async function getUserStats(address) {\n    console.log('Fetching user stats for:', address);\n\n    try {\n        // Simulate fetching from contract\n        await new Promise(resolve => setTimeout(resolve, 500));\n\n        return {\n            totalGames: Math.floor(Math.random() * 100),\n            wins: Math.floor(Math.random() * 50),\n            totalScore: Math.floor(Math.random() * 10000),\n            rank: Math.floor(Math.random() * 1000) + 1,\n        };\n    } catch (error) {\n        console.error('Error fetching user stats:', error);\n        throw error;\n    }\n}\n\n/**\n * Get leaderboard data\n * @param {string} gameMode - Game mode\n * @param {number} limit - Number of top players\n * @returns {Promise<Array>} Leaderboard data\n */\nexport async function getLeaderboard(gameMode, limit = 10) {\n    console.log('Fetching leaderboard for:', gameMode);\n\n    try {\n        // Simulate fetching from contract\n        await new Promise(resolve => setTimeout(resolve, 500));\n\n        const leaderboard = [];\n        for (let i = 0; i < limit; i++) {\n            leaderboard.push({\n                rank: i + 1,\n                address: `0x${Math.random().toString(16).substring(2, 42)}`,\n                score: Math.floor(Math.random() * 10000) - i * 100,\n                wins: Math.floor(Math.random() * 50),\n            });\n        }\n\n        return leaderboard;\n    } catch (error) {\n        console.error('Error fetching leaderboard:', error);\n        throw error;\n    }\n}\n\n/**\n * Claim rewards for a prediction\n * @param {number} predictionId - Prediction ID\n * @returns {Promise<Object>} Transaction result\n */\nexport async function claimReward(predictionId) {\n    console.log('Claiming reward for prediction:', predictionId);\n\n    try {\n        const state = walletManager.getState();\n        if (!state.connected) {\n            throw new Error('Wallet not connected');\n        }\n\n        await simulateTransaction();\n\n        const reward = Math.floor(Math.random() * 1000) / 100;\n\n        return {\n            success: true,\n            reward,\n            txHash: `0x${Math.random().toString(16).substring(2, 66)}`,\n            message: `Claimed ${reward} tokens!`,\n        };\n    } catch (error) {\n        console.error('Error claiming reward:', error);\n        throw error;\n    }\n}\n\n/**\n * Simulate a blockchain transaction (for demo)\n * @returns {Promise<void>}\n */\nasync function simulateTransaction() {\n    // Simulate network delay\n    await new Promise(resolve => setTimeout(resolve, 1000 + Math.random() * 1000));\n\n    // Simulate occasional failures (10% chance)\n    if (Math.random() < 0.1) {\n        throw new Error('Transaction failed: Insufficient gas or user rejected');\n    }\n}\n\n/**\n * Get contract address for current network\n * @param {string} contractType - Type of contract\n * @returns {string} Contract address\n */\nexport function getContractAddress(contractType) {\n    const state = walletManager.getState();\n\n    // For demo, return placeholder addresses\n    return '0x0000000000000000000000000000000000000000';\n}\n","// Candlestick Service - Binance WebSocket Integration\n// Real-time OHLC data for Predict the Candle game\n\n/**\n * Binance-supported tokens with their trading pair symbols\n * Format: Symbol -> Binance trading pair (always paired with USDT)\n */\nexport const BINANCE_TOKENS = {\n    // Major Cryptocurrencies\n    'BTC': { pair: 'BTCUSDT', name: 'Bitcoin', image: 'https://assets.coingecko.com/coins/images/1/small/bitcoin.png' },\n    'ETH': { pair: 'ETHUSDT', name: 'Ethereum', image: 'https://assets.coingecko.com/coins/images/279/small/ethereum.png' },\n    'XRP': { pair: 'XRPUSDT', name: 'XRP', image: 'https://assets.coingecko.com/coins/images/44/small/xrp-symbol-white-128.png' },\n    'BNB': { pair: 'BNBUSDT', name: 'BNB', image: 'https://assets.coingecko.com/coins/images/825/small/bnb-icon2_2x.png' },\n    'SOL': { pair: 'SOLUSDT', name: 'Solana', image: 'https://assets.coingecko.com/coins/images/4128/small/solana.png' },\n    'TRX': { pair: 'TRXUSDT', name: 'TRON', image: 'https://assets.coingecko.com/coins/images/1094/small/tron-logo.png' },\n    'DOGE': { pair: 'DOGEUSDT', name: 'Dogecoin', image: 'https://assets.coingecko.com/coins/images/5/small/dogecoin.png' },\n    'ADA': { pair: 'ADAUSDT', name: 'Cardano', image: 'https://assets.coingecko.com/coins/images/975/small/cardano.png' },\n    'LINK': { pair: 'LINKUSDT', name: 'Chainlink', image: 'https://assets.coingecko.com/coins/images/877/small/chainlink-new-logo.png' },\n    'AVAX': { pair: 'AVAXUSDT', name: 'Avalanche', image: 'https://assets.coingecko.com/coins/images/12559/small/Avalanche_Circle_RedWhite_Trans.png' },\n    'SUI': { pair: 'SUIUSDT', name: 'Sui', image: 'https://assets.coingecko.com/coins/images/26375/small/sui_asset.jpeg' },\n    'XLM': { pair: 'XLMUSDT', name: 'Stellar', image: 'https://assets.coingecko.com/coins/images/100/small/Stellar_symbol_black_RGB.png' },\n    'LTC': { pair: 'LTCUSDT', name: 'Litecoin', image: 'https://assets.coingecko.com/coins/images/2/small/litecoin.png' },\n    'SHIB': { pair: 'SHIBUSDT', name: 'Shiba Inu', image: 'https://assets.coingecko.com/coins/images/11939/small/shiba.png' },\n    'DOT': { pair: 'DOTUSDT', name: 'Polkadot', image: 'https://assets.coingecko.com/coins/images/12171/small/polkadot.png' },\n    'UNI': { pair: 'UNIUSDT', name: 'Uniswap', image: 'https://assets.coingecko.com/coins/images/12504/small/uniswap-uni.png' },\n    'AAVE': { pair: 'AAVEUSDT', name: 'Aave', image: 'https://assets.coingecko.com/coins/images/12645/small/AAVE.png' },\n    'NEAR': { pair: 'NEARUSDT', name: 'NEAR', image: 'https://assets.coingecko.com/coins/images/10365/small/near.jpg' },\n    'ETC': { pair: 'ETCUSDT', name: 'Ethereum Classic', image: 'https://assets.coingecko.com/coins/images/453/small/ethereum-classic-logo.png' },\n    'ICP': { pair: 'ICPUSDT', name: 'Internet Computer', image: 'https://assets.coingecko.com/coins/images/14495/small/Internet_Computer_logo.png' },\n    'PEPE': { pair: 'PEPEUSDT', name: 'Pepe', image: 'https://assets.coingecko.com/coins/images/29850/small/pepe-token.jpeg' },\n    'APT': { pair: 'APTUSDT', name: 'Aptos', image: 'https://assets.coingecko.com/coins/images/26455/small/aptos_round.png' },\n    'ALGO': { pair: 'ALGOUSDT', name: 'Algorand', image: 'https://assets.coingecko.com/coins/images/4380/small/download.png' },\n    'ARB': { pair: 'ARBUSDT', name: 'Arbitrum', image: 'https://assets.coingecko.com/coins/images/16547/small/photo_2023-03-29_21.47.00.jpeg' },\n    'VET': { pair: 'VETUSDT', name: 'VeChain', image: 'https://assets.coingecko.com/coins/images/1167/small/VET_Token_Icon.png' },\n    'FIL': { pair: 'FILUSDT', name: 'Filecoin', image: 'https://assets.coingecko.com/coins/images/12817/small/filecoin.png' },\n    'ATOM': { pair: 'ATOMUSDT', name: 'Cosmos', image: 'https://assets.coingecko.com/coins/images/1481/small/cosmos_hub.png' },\n    'SEI': { pair: 'SEIUSDT', name: 'Sei', image: 'https://assets.coingecko.com/coins/images/28205/small/Sei_Logo_-_Transparent.png' },\n    'CAKE': { pair: 'CAKEUSDT', name: 'PancakeSwap', image: 'https://assets.coingecko.com/coins/images/12632/small/pancakeswap-cake-logo.png' },\n    'BONK': { pair: 'BONKUSDT', name: 'Bonk', image: 'https://assets.coingecko.com/coins/images/28600/small/bonk.jpg' },\n    'OP': { pair: 'OPUSDT', name: 'Optimism', image: 'https://assets.coingecko.com/coins/images/25244/small/Optimism.png' },\n    'INJ': { pair: 'INJUSDT', name: 'Injective', image: 'https://assets.coingecko.com/coins/images/12882/small/Secondary_Symbol.png' },\n    'STX': { pair: 'STXUSDT', name: 'Stacks', image: 'https://assets.coingecko.com/coins/images/2069/small/Stacks_logo_full.png' },\n    'XTZ': { pair: 'XTZUSDT', name: 'Tezos', image: 'https://assets.coingecko.com/coins/images/976/small/Tezos-logo.png' },\n    'TIA': { pair: 'TIAUSDT', name: 'Celestia', image: 'https://assets.coingecko.com/coins/images/31967/small/tia.jpg' },\n    'GRT': { pair: 'GRTUSDT', name: 'The Graph', image: 'https://assets.coingecko.com/coins/images/13397/small/Graph_Token.png' },\n    'ENS': { pair: 'ENSUSDT', name: 'Ethereum Name Service', image: 'https://assets.coingecko.com/coins/images/19785/small/acatxTm8_400x400.jpg' },\n    'IOTA': { pair: 'IOTAUSDT', name: 'IOTA', image: 'https://assets.coingecko.com/coins/images/692/small/IOTA_Swirl.png' },\n    'PENDLE': { pair: 'PENDLEUSDT', name: 'Pendle', image: 'https://assets.coingecko.com/coins/images/15069/small/Pendle_Logo_Normal-03.png' },\n    'PYTH': { pair: 'PYTHUSDT', name: 'Pyth Network', image: 'https://assets.coingecko.com/coins/images/31924/small/pyth.png' },\n    'BAT': { pair: 'BATUSDT', name: 'Basic Attention Token', image: 'https://assets.coingecko.com/coins/images/677/small/basic-attention-token.png' },\n    'WIF': { pair: 'WIFUSDT', name: 'dogwifhat', image: 'https://assets.coingecko.com/coins/images/33566/small/dogwifhat.jpg' },\n    'SAND': { pair: 'SANDUSDT', name: 'The Sandbox', image: 'https://assets.coingecko.com/coins/images/12129/small/sandbox_logo.jpg' },\n    'FLOW': { pair: 'FLOWUSDT', name: 'Flow', image: 'https://assets.coingecko.com/coins/images/13446/small/5f6294c0c7a8cda55cb1c936_Flow_Wordmark.png' },\n    'JASMY': { pair: 'JASMYUSDT', name: 'JasmyCoin', image: 'https://assets.coingecko.com/coins/images/13876/small/JASMY200x200.jpg' },\n    'GALA': { pair: 'GALAUSDT', name: 'Gala', image: 'https://assets.coingecko.com/coins/images/12493/small/GALA-COINGECKO.png' },\n    'THETA': { pair: 'THETAUSDT', name: 'Theta Network', image: 'https://assets.coingecko.com/coins/images/2538/small/theta-token-logo.png' },\n    'CHZ': { pair: 'CHZUSDT', name: 'Chiliz', image: 'https://assets.coingecko.com/coins/images/8834/small/CHZ_Token_updated.png' },\n    'COMP': { pair: 'COMPUSDT', name: 'Compound', image: 'https://assets.coingecko.com/coins/images/10775/small/COMP.png' },\n    'MANA': { pair: 'MANAUSDT', name: 'Decentraland', image: 'https://assets.coingecko.com/coins/images/878/small/decentraland-mana.png' },\n    'NEO': { pair: 'NEOUSDT', name: 'Neo', image: 'https://assets.coingecko.com/coins/images/480/small/NEO_512_512.png' },\n    'ZK': { pair: 'ZKUSDT', name: 'zkSync', image: 'https://assets.coingecko.com/coins/images/38043/small/ZKTokenBlack.png' },\n    'ZRO': { pair: 'ZROUSDT', name: 'LayerZero', image: 'https://assets.coingecko.com/coins/images/28206/small/ftxG9_TJ_400x400.jpeg' },\n    'AR': { pair: 'ARUSDT', name: 'Arweave', image: 'https://assets.coingecko.com/coins/images/4343/small/oRt6SiEN_400x400.jpg' },\n    '1INCH': { pair: '1INCHUSDT', name: '1inch', image: 'https://assets.coingecko.com/coins/images/13469/small/1inch-token.png' },\n    'IMX': { pair: 'IMXUSDT', name: 'Immutable', image: 'https://assets.coingecko.com/coins/images/17233/small/immutableX-symbol-BLK-RGB.png' },\n    'RUNE': { pair: 'RUNEUSDT', name: 'THORChain', image: 'https://assets.coingecko.com/coins/images/6595/small/Rune200x200.png' },\n    'EGLD': { pair: 'EGLDUSDT', name: 'MultiversX', image: 'https://assets.coingecko.com/coins/images/12335/small/egld-token-logo.png' },\n    'AXS': { pair: 'AXSUSDT', name: 'Axie Infinity', image: 'https://assets.coingecko.com/coins/images/13029/small/axie_infinity_logo.png' },\n    'DYDX': { pair: 'DYDXUSDT', name: 'dYdX', image: 'https://assets.coingecko.com/coins/images/17500/small/hjnIm9bV.jpg' },\n    'SNX': { pair: 'SNXUSDT', name: 'Synthetix', image: 'https://assets.coingecko.com/coins/images/3406/small/SNX.png' },\n    'QTUM': { pair: 'QTUMUSDT', name: 'Qtum', image: 'https://assets.coingecko.com/coins/images/684/small/Qtum_Logo_blue_CG.png' },\n    'KSM': { pair: 'KSMUSDT', name: 'Kusama', image: 'https://assets.coingecko.com/coins/images/9568/small/m4zRhP5e_400x400.jpg' },\n    'RON': { pair: 'RONUSDT', name: 'Ronin', image: 'https://assets.coingecko.com/coins/images/20009/small/ronin.jpg' },\n    'AXL': { pair: 'AXLUSDT', name: 'Axelar', image: 'https://assets.coingecko.com/coins/images/27277/small/V-65_xQ1_400x400.jpeg' },\n    'KAVA': { pair: 'KAVAUSDT', name: 'Kava', image: 'https://assets.coingecko.com/coins/images/9761/small/kava.png' },\n    'MINA': { pair: 'MINAUSDT', name: 'Mina Protocol', image: 'https://assets.coingecko.com/coins/images/15628/small/JM4_vQ34_400x400.png' },\n    'EOS': { pair: 'EOSUSDT', name: 'EOS', image: 'https://assets.coingecko.com/coins/images/738/small/eos-eos-logo.png' },\n    'FLOKI': { pair: 'FLOKIUSDT', name: 'FLOKI', image: 'https://assets.coingecko.com/coins/images/16746/small/PNG_image.png' },\n    'WLD': { pair: 'WLDUSDT', name: 'Worldcoin', image: 'https://assets.coingecko.com/coins/images/31069/small/worldcoin.jpeg' },\n    'STRK': { pair: 'STRKUSDT', name: 'Starknet', image: 'https://assets.coingecko.com/coins/images/26433/small/starknet.png' },\n    'RENDER': { pair: 'RENDERUSDT', name: 'Render', image: 'https://assets.coingecko.com/coins/images/11636/small/rndr.png' },\n    'JTO': { pair: 'JTOUSDT', name: 'Jito', image: 'https://assets.coingecko.com/coins/images/33228/small/jto.png' },\n    'JUP': { pair: 'JUPUSDT', name: 'Jupiter', image: 'https://assets.coingecko.com/coins/images/34188/small/jup.png' },\n    'BERA': { pair: 'BERAUSDT', name: 'Berachain', image: 'https://assets.coingecko.com/coins/images/36017/small/bera.png' },\n    'MOVE': { pair: 'MOVEUSDT', name: 'Movement', image: 'https://assets.coingecko.com/coins/images/37160/small/move.jpg' },\n    'POL': { pair: 'POLUSDT', name: 'Polygon', image: 'https://assets.coingecko.com/coins/images/4713/small/polygon.png' },\n};\n\n// List of symbol keys for easy iteration\nexport const BINANCE_TOKEN_SYMBOLS = Object.keys(BINANCE_TOKENS);\n\n// Active WebSocket connections\nlet activeConnections = new Map();\n\n/**\n * Binance Kline intervals\n */\nexport const KLINE_INTERVALS = {\n    '1m': '1m',\n    '3m': '3m',\n    '5m': '5m',\n    '15m': '15m',\n    '30m': '30m',\n    '1h': '1h',\n    '4h': '4h',\n    '1d': '1d',\n};\n\n/**\n * Fetch historical klines (candlesticks) from Binance REST API\n * @param {string} symbol - Token symbol (e.g., 'BTC')\n * @param {string} interval - Kline interval (e.g., '1m', '5m')\n * @param {number} limit - Number of candles to fetch (max 1000)\n * @returns {Promise<Array>} Array of candle objects\n */\nexport async function fetchHistoricalCandles(symbol, interval = '1m', limit = 50) {\n    const tokenInfo = BINANCE_TOKENS[symbol];\n    if (!tokenInfo) {\n        throw new Error(`Token ${symbol} not supported on Binance`);\n    }\n\n    const url = `https://api.binance.com/api/v3/klines?symbol=${tokenInfo.pair}&interval=${interval}&limit=${limit}`;\n\n    try {\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(`Binance API error: ${response.status}`);\n        }\n\n        const data = await response.json();\n\n        // Transform Binance kline format to our format\n        // Binance format: [openTime, open, high, low, close, volume, closeTime, ...]\n        return data.map(kline => ({\n            openTime: kline[0],\n            open: parseFloat(kline[1]),\n            high: parseFloat(kline[2]),\n            low: parseFloat(kline[3]),\n            close: parseFloat(kline[4]),\n            volume: parseFloat(kline[5]),\n            closeTime: kline[6],\n            isGreen: parseFloat(kline[4]) >= parseFloat(kline[1]), // close >= open\n            isClosed: true,\n        }));\n    } catch (error) {\n        console.error(`Error fetching candles for ${symbol}:`, error);\n        throw error;\n    }\n}\n\n/**\n * Subscribe to real-time candlestick updates via WebSocket\n * @param {string} symbol - Token symbol (e.g., 'BTC')\n * @param {string} interval - Kline interval (e.g., '1m', '5m')\n * @param {Function} onCandle - Callback for candle updates\n * @returns {Function} Unsubscribe function\n */\n/**\n * Subscribe to real-time candlestick updates via WebSocket\n * Supports multiple subscribers for the same token/interval\n * @param {string} symbol - Token symbol (e.g., 'BTC')\n * @param {string} interval - Kline interval (e.g., '1m', '5m')\n * @param {Function} onCandle - Callback for candle updates\n * @returns {Function} Unsubscribe function\n */\nexport function subscribeToCandleUpdates(symbol, interval, onCandle) {\n    const tokenInfo = BINANCE_TOKENS[symbol];\n    if (!tokenInfo) {\n        console.error(`Token ${symbol} not supported on Binance`);\n        return () => { };\n    }\n\n    const streamName = `${tokenInfo.pair.toLowerCase()}@kline_${interval}`;\n    const connectionKey = `${symbol}_${interval}`;\n\n    // If connection exists, add callback to listeners\n    if (activeConnections.has(connectionKey)) {\n        const connection = activeConnections.get(connectionKey);\n        connection.callbacks.add(onCandle);\n\n        return () => {\n            if (activeConnections.has(connectionKey)) {\n                const conn = activeConnections.get(connectionKey);\n                conn.callbacks.delete(onCandle);\n                if (conn.callbacks.size === 0) {\n                    conn.close();\n                    activeConnections.delete(connectionKey);\n                }\n            }\n        };\n    }\n\n    // New connection setup\n    const callbacks = new Set([onCandle]);\n    const wsUrl = `wss://stream.binance.com:9443/ws/${streamName}`;\n\n    let ws;\n    let isActive = true;\n    let reconnectTimeout;\n    let reconnectAttempts = 0;\n\n    const close = () => {\n        isActive = false;\n        if (reconnectTimeout) clearTimeout(reconnectTimeout);\n        if (ws) {\n            ws.onclose = null;\n            ws.close();\n        }\n    };\n\n    function connect() {\n        if (!isActive) return;\n\n        ws = new WebSocket(wsUrl);\n\n        ws.onopen = () => {\n            console.log(`WebSocket connected: ${symbol} ${interval}`);\n            reconnectAttempts = 0;\n        };\n\n        ws.onmessage = (event) => {\n            try {\n                const data = JSON.parse(event.data);\n                const kline = data.k;\n\n                const candle = {\n                    openTime: kline.t,\n                    open: parseFloat(kline.o),\n                    high: parseFloat(kline.h),\n                    low: parseFloat(kline.l),\n                    close: parseFloat(kline.c),\n                    volume: parseFloat(kline.v),\n                    closeTime: kline.T,\n                    isGreen: parseFloat(kline.c) >= parseFloat(kline.o),\n                    isClosed: kline.x, // true if candle is closed\n                    symbol: symbol,\n                    interval: interval,\n                };\n\n                // Notify all subscribers\n                callbacks.forEach(cb => {\n                    try { cb(candle); } catch (e) { console.error('Error in candle callback:', e); }\n                });\n            } catch (error) {\n                console.error('Error parsing candle data:', error);\n            }\n        };\n\n        ws.onerror = (error) => {\n            // console.error(`WebSocket error for ${symbol}:`, error);\n        };\n\n        ws.onclose = () => {\n            if (isActive) {\n                // Infinite retries with max 30s backoff\n                reconnectAttempts++;\n                const delay = Math.min(1000 * Math.pow(1.5, reconnectAttempts), 30000);\n                console.log(`WebSocket closed for ${symbol} ${interval}, reconnecting in ${delay}ms...`);\n                reconnectTimeout = setTimeout(connect, delay);\n            }\n        };\n    }\n\n    connect();\n\n    // Store connection info\n    activeConnections.set(connectionKey, {\n        callbacks,\n        close\n    });\n\n    return () => {\n        if (activeConnections.has(connectionKey)) {\n            const conn = activeConnections.get(connectionKey);\n            conn.callbacks.delete(onCandle);\n            if (conn.callbacks.size === 0) {\n                conn.close();\n                activeConnections.delete(connectionKey);\n            }\n        }\n    };\n}\n\n/**\n * Subscribe to multiple tokens at once\n * @param {Array<string>} symbols - Array of token symbols\n * @param {string} interval - Kline interval\n * @param {Function} onCandle - Callback for candle updates\n * @returns {Function} Unsubscribe function for all\n */\nexport function subscribeToMultipleTokens(symbols, interval, onCandle) {\n    const unsubscribeFns = symbols\n        .filter(symbol => BINANCE_TOKENS[symbol])\n        .map(symbol => subscribeToCandleUpdates(symbol, interval, onCandle));\n\n    return () => {\n        unsubscribeFns.forEach(unsub => unsub());\n    };\n}\n\n/**\n * Get formatted token data for display\n * @param {string} symbol - Token symbol\n * @returns {Object|null} Token display data\n */\nexport function getTokenDisplayData(symbol) {\n    const tokenInfo = BINANCE_TOKENS[symbol];\n    if (!tokenInfo) return null;\n\n    return {\n        id: symbol.toLowerCase(),\n        symbol: symbol,\n        name: tokenInfo.name,\n        image: tokenInfo.image,\n        pair: tokenInfo.pair,\n    };\n}\n\n/**\n * Get all available tokens for Predict the Candle\n * @param {number} limit - Maximum number of tokens\n * @returns {Array} Array of token display data\n */\nexport function getAvailableTokens(limit = 12) {\n    const priorityTokens = [\n        'BTC', 'ETH', 'SOL', 'XRP', 'DOGE', 'PEPE',\n        'BNB', 'ADA', 'AVAX', 'LINK', 'DOT', 'SHIB'\n    ];\n\n    const tokens = priorityTokens\n        .slice(0, limit)\n        .map(symbol => getTokenDisplayData(symbol))\n        .filter(Boolean);\n\n    return tokens;\n}\n\n/**\n * Clean up all active WebSocket connections\n */\nexport function cleanupAllConnections() {\n    activeConnections.forEach((connection, key) => {\n        if (connection.close) connection.close();\n        else if (connection.unsubscribe) connection.unsubscribe(); // Fallback for any legacy connections\n    });\n    activeConnections.clear();\n    console.log('All WebSocket connections cleaned up');\n}\n\n/**\n * Get current price from last candle\n * @param {string} symbol - Token symbol\n * @returns {Promise<Object>} Current price data\n */\nexport async function getCurrentPrice(symbol) {\n    const candles = await fetchHistoricalCandles(symbol, '1m', 1);\n    if (candles.length > 0) {\n        const lastCandle = candles[0];\n        return {\n            symbol,\n            price: lastCandle.close,\n            priceChange24h: 0, // Would need separate API call for 24h change\n            lastUpdate: new Date(),\n        };\n    }\n    return null;\n}\n\n/**\n * Subscribe to real-time ticker (price) updates via WebSocket\n * Perfect for displaying live prices in Crypto Duel\n * @param {string} symbol - Token symbol (e.g., 'BTC')\n * @param {Function} onTicker - Callback for ticker updates\n * @returns {Function} Unsubscribe function\n */\n/**\n * Subscribe to real-time ticker (price) updates via WebSocket\n * Supports multiple subscribers for the same token\n * @param {string} symbol - Token symbol (e.g., 'BTC')\n * @param {Function} onTicker - Callback for ticker updates\n * @returns {Function} Unsubscribe function\n */\nexport function subscribeToTickerUpdates(symbol, onTicker) {\n    const tokenInfo = BINANCE_TOKENS[symbol];\n    if (!tokenInfo) {\n        console.error(`Token ${symbol} not supported on Binance`);\n        return () => { };\n    }\n\n    const streamName = `${tokenInfo.pair.toLowerCase()}@ticker`;\n    const connectionKey = `ticker_${symbol}`;\n\n    // If connection exists, add callback to subscribers list\n    if (activeConnections.has(connectionKey)) {\n        const connection = activeConnections.get(connectionKey);\n        connection.callbacks.add(onTicker);\n\n        // Return unplug function for this specific listener\n        return () => {\n            if (activeConnections.has(connectionKey)) {\n                const conn = activeConnections.get(connectionKey);\n                conn.callbacks.delete(onTicker);\n                // If no more listeners, close connection\n                if (conn.callbacks.size === 0) {\n                    conn.close();\n                    activeConnections.delete(connectionKey);\n                }\n            }\n        };\n    }\n\n    // New connection setup\n    const callbacks = new Set([onTicker]);\n    const wsUrl = `wss://stream.binance.com:9443/ws/${streamName}`;\n\n    let ws;\n    let isActive = true;\n    let reconnectTimeout;\n    let reconnectAttempts = 0;\n\n    const close = () => {\n        isActive = false;\n        if (reconnectTimeout) clearTimeout(reconnectTimeout);\n        if (ws) {\n            ws.onclose = null; // Prevent reconnection logic triggered by manual close\n            ws.close();\n        }\n    };\n\n    function connect() {\n        if (!isActive) return;\n\n        ws = new WebSocket(wsUrl);\n\n        ws.onopen = () => {\n            console.log(`Ticker WebSocket connected: ${symbol}`);\n            reconnectAttempts = 0;\n        };\n\n        ws.onmessage = (event) => {\n            try {\n                const data = JSON.parse(event.data);\n                const ticker = {\n                    symbol: symbol,\n                    price: parseFloat(data.c),\n                    priceChange24h: parseFloat(data.P),\n                    high24h: parseFloat(data.h),\n                    low24h: parseFloat(data.l),\n                    volume24h: parseFloat(data.v),\n                    lastUpdate: Date.now(),\n                };\n\n                // Notify all subscribers\n                callbacks.forEach(cb => {\n                    try { cb(ticker); } catch (e) { console.error('Error in ticker callback:', e); }\n                });\n            } catch (error) {\n                console.error('Error parsing ticker data:', error);\n            }\n        };\n\n        ws.onerror = (error) => {\n            // console.error(`Ticker WebSocket error for ${symbol}:`, error);\n        };\n\n        ws.onclose = () => {\n            if (isActive) {\n                // Infinite retries with max 30s backoff\n                reconnectAttempts++;\n                const delay = Math.min(1000 * Math.pow(1.5, reconnectAttempts), 30000);\n                console.log(`Ticker WebSocket closed for ${symbol}, reconnecting in ${delay}ms...`);\n                reconnectTimeout = setTimeout(connect, delay);\n            }\n        };\n    }\n\n    connect();\n\n    // Store connection info\n    activeConnections.set(connectionKey, {\n        callbacks,\n        close\n    });\n\n    // Return unsubscribe function\n    return () => {\n        if (activeConnections.has(connectionKey)) {\n            const conn = activeConnections.get(connectionKey);\n            conn.callbacks.delete(onTicker);\n            if (conn.callbacks.size === 0) {\n                conn.close();\n                activeConnections.delete(connectionKey);\n            }\n        }\n    };\n}\n\n/**\n * Get 24hr ticker data from Binance REST API (for initial load)\n * @param {string} symbol - Token symbol\n * @returns {Promise<Object>} Ticker data\n */\nexport async function fetchTickerData(symbol) {\n    const tokenInfo = BINANCE_TOKENS[symbol];\n    if (!tokenInfo) {\n        throw new Error(`Token ${symbol} not supported on Binance`);\n    }\n\n    const url = `https://api.binance.com/api/v3/ticker/24hr?symbol=${tokenInfo.pair}`;\n\n    try {\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(`Binance API error: ${response.status}`);\n        }\n\n        const data = await response.json();\n\n        return {\n            symbol: symbol,\n            name: tokenInfo.name,\n            image: tokenInfo.image,\n            price: parseFloat(data.lastPrice),\n            priceChange24h: parseFloat(data.priceChangePercent),\n            high24h: parseFloat(data.highPrice),\n            low24h: parseFloat(data.lowPrice),\n            volume24h: parseFloat(data.volume),\n        };\n    } catch (error) {\n        console.error(`Error fetching ticker for ${symbol}:`, error);\n        throw error;\n    }\n}\n\n/**\n * Fetch ticker data for multiple tokens\n * @param {Array<string>} symbols - Array of token symbols\n * @returns {Promise<Array>} Array of ticker data\n */\nexport async function fetchMultipleTickers(symbols) {\n    try {\n        // Use bulk endpoint to get ALL tickers in one request\n        // This is much faster and avoids rate limits compared to 100+ individual requests\n        const response = await fetch('https://api.binance.com/api/v3/ticker/24hr');\n        if (!response.ok) {\n            throw new Error(`Binance API error: ${response.status}`);\n        }\n\n        const allTickers = await response.json();\n\n        // Create a map for quick lookup: \"BTCUSDT\" -> tickerData\n        const tickerMap = new Map();\n        allTickers.forEach(t => {\n            tickerMap.set(t.symbol, t);\n        });\n\n        // Filter and map our requested symbols\n        const results = symbols\n            .filter(sym => BINANCE_TOKENS[sym]) // Ensure we support this token\n            .map(sym => {\n                const tokenInfo = BINANCE_TOKENS[sym];\n                const tickerData = tickerMap.get(tokenInfo.pair);\n\n                if (!tickerData) return null;\n\n                return {\n                    symbol: sym,\n                    name: tokenInfo.name,\n                    image: tokenInfo.image,\n                    price: parseFloat(tickerData.lastPrice),\n                    priceChange24h: parseFloat(tickerData.priceChangePercent),\n                    high24h: parseFloat(tickerData.highPrice),\n                    low24h: parseFloat(tickerData.lowPrice),\n                    volume24h: parseFloat(tickerData.volume),\n                };\n            })\n            .filter(Boolean); // Remove nulls\n\n        return results;\n    } catch (error) {\n        console.error('Error fetching multiple tickers:', error);\n        return [];\n    }\n}\n\n","// Crypto Duel Game Component\n\nimport { fetchTopTokens } from '../../services/priceService.js';\nimport { submitDuelPrediction } from '../../contracts/gameContract.js';\nimport { formatCurrency, formatPercentage, getPriceChangeClass } from '../../utils/formatters.js';\nimport { TIME_PERIODS } from '../../utils/constants.js';\nimport walletManager from '../../wallet/walletManager.js';\nimport {\n  BINANCE_TOKENS,\n  fetchMultipleTickers,\n  subscribeToTickerUpdates,\n  cleanupAllConnections\n} from '../../services/candleService.js';\n\n// Store active ticker subscriptions\nlet activeTickerSubscriptions = [];\n\nexport function createCryptoDuel() {\n  // Reset selection state on load\n  selectedTokens = { a: null, b: null };\n\n  const page = document.createElement('div');\n  page.className = 'crypto-duel-page';\n  page.style.cssText = `\n    display: flex;\n    align-items: stretch;\n    height: calc(100vh - 64px);\n    overflow: hidden;\n  `;\n\n  // Main content area (left side with tokens)\n  const mainContent = document.createElement('div');\n  mainContent.id = 'duel-main-content';\n  mainContent.style.cssText = `\n    flex: 1;\n    overflow-y: auto;\n    padding: var(--spacing-xl) var(--spacing-lg);\n    transition: margin-right 0.3s ease;\n  `;\n\n  // Header\n  const header = document.createElement('div');\n  header.style.cssText = 'margin-bottom: var(--spacing-xl); text-align: center;';\n  header.innerHTML = `\n    <h1 style=\"font-size: 2.5rem; margin-bottom: var(--spacing-sm); display: flex; align-items: center; justify-content: center; gap: var(--spacing-md);\">\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <defs>\n          <linearGradient id=\"vs-grad-page\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n            <stop offset=\"0%\" style=\"stop-color:#09C285\"/>\n            <stop offset=\"100%\" style=\"stop-color:#07a371\"/>\n          </linearGradient>\n        </defs>\n        <!-- Outer circle with gradient -->\n        <circle cx=\"32\" cy=\"32\" r=\"28\" fill=\"url(#vs-grad-page)\"/>\n        <!-- Inner circle -->\n        <circle cx=\"32\" cy=\"32\" r=\"22\" fill=\"none\" stroke=\"#FFFFFF\" stroke-width=\"2\" opacity=\"0.3\"/>\n        <!-- VS Text -->\n        <text x=\"32\" y=\"40\" text-anchor=\"middle\" fill=\"#FFFFFF\" font-size=\"22\" font-weight=\"bold\" font-family=\"Arial, sans-serif\">VS</text>\n      </svg>\n      Crypto Duel\n    </h1>\n    <p style=\"color: var(--color-text-secondary); font-size: 1.125rem;\">\n      Select two cryptocurrencies and predict which one will outperform the other\n    </p>\n  `;\n  mainContent.appendChild(header);\n\n  // Token Grid\n  const tokenGrid = document.createElement('div');\n  tokenGrid.id = 'token-grid';\n  tokenGrid.className = 'grid grid-auto';\n  tokenGrid.style.marginBottom = 'var(--spacing-xl)';\n  mainContent.appendChild(tokenGrid);\n\n  // Selection Panel (Right Sidebar - Fixed position)\n  const selectionPanel = document.createElement('div');\n  selectionPanel.id = 'selection-panel';\n  selectionPanel.style.cssText = `\n    position: fixed;\n    top: 64px;\n    right: 0;\n    width: 320px;\n    height: calc(100vh - 64px);\n    background: var(--glass-bg);\n    border-left: 1px solid var(--glass-border);\n    padding: var(--spacing-md);\n    display: none;\n    flex-direction: column;\n    overflow-y: auto;\n    z-index: 100;\n  `;\n\n  page.appendChild(mainContent);\n  page.appendChild(selectionPanel);\n\n  // Load tokens\n  loadTokens(tokenGrid, selectionPanel);\n\n  return page;\n}\n\nlet selectedTokens = { a: null, b: null };\nlet selectedDuration = 1;\n\nasync function loadTokens(gridContainer, selectionPanel) {\n  gridContainer.innerHTML = '<div class=\"loading\" style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl);\"></div>';\n\n  // Cleanup previous subscriptions\n  activeTickerSubscriptions.forEach(unsub => unsub());\n  activeTickerSubscriptions = [];\n\n  try {\n    // Try Binance first for priority tokens\n    const prioritySymbols = ['BTC', 'ETH', 'SOL', 'XRP', 'DOGE', 'PEPE', 'BNB', 'ADA', 'AVAX', 'LINK', 'DOT', 'SHIB', 'LTC', 'UNI', 'NEAR', 'ATOM', 'ARB', 'OP', 'SUI', 'APT'];\n\n    const binanceTokens = await fetchMultipleTickers(prioritySymbols);\n\n    if (binanceTokens.length > 0) {\n      // Transform to match expected format\n      const tokens = binanceTokens.map(t => ({\n        id: t.symbol.toLowerCase(),\n        symbol: t.symbol,\n        name: t.name,\n        image: t.image,\n        currentPrice: t.price,\n        priceChange24h: t.priceChange24h,\n      }));\n\n      renderTokens(tokens, gridContainer, selectionPanel);\n\n      // Subscribe to real-time updates\n      binanceTokens.forEach(token => {\n        const unsub = subscribeToTickerUpdates(token.symbol, (ticker) => {\n          updateTokenCardPrice(gridContainer, ticker.symbol.toLowerCase(), ticker.price, ticker.priceChange24h);\n        });\n        activeTickerSubscriptions.push(unsub);\n      });\n\n      console.log(' Loaded tokens from Binance with real-time updates');\n    } else {\n      throw new Error('No Binance tokens loaded');\n    }\n  } catch (error) {\n    console.log('Falling back to CoinGecko:', error.message);\n    try {\n      const tokens = await fetchTopTokens(20);\n      renderTokens(tokens, gridContainer, selectionPanel);\n    } catch (fallbackError) {\n      gridContainer.innerHTML = `\n        <div style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl); color: var(--color-danger);\">\n          Failed to load tokens. Please try again later.\n        </div>\n      `;\n    }\n  }\n}\n\n// Update token card price in real-time\nfunction updateTokenCardPrice(gridContainer, tokenId, price, priceChange) {\n  const card = gridContainer.querySelector(`.token-card[data-token-id=\"${tokenId}\"]`);\n  if (!card) return;\n\n  const priceEl = card.querySelector('.token-price-value');\n  const changeEl = card.querySelector('.token-price-change');\n\n  if (priceEl) {\n    const oldPrice = priceEl.dataset.price || 0;\n    priceEl.textContent = formatCurrency(price);\n    priceEl.dataset.price = price;\n\n    // Flash animation\n    if (parseFloat(oldPrice) !== price) {\n      priceEl.style.transition = 'color 0.3s';\n      priceEl.style.color = price > parseFloat(oldPrice) ? '#09C285' : '#FF4D4F';\n      setTimeout(() => { priceEl.style.color = ''; }, 500);\n    }\n  }\n\n  if (changeEl) {\n    changeEl.textContent = formatPercentage(priceChange);\n    changeEl.className = `token-price-change ${getPriceChangeClass(priceChange)}`;\n  }\n}\n\nfunction addDuelTrackerStyles() {\n  const styleId = 'duel-tracker-styles';\n  if (document.getElementById(styleId)) return;\n\n  const style = document.createElement('style');\n  style.id = styleId;\n  style.textContent = `\n        .duel-tracker-card {\n            position: fixed;\n            bottom: 24px;\n            right: 24px;\n            z-index: 1000;\n            \n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            gap: 12px;\n            min-width: 200px;\n            \n            padding: 12px 20px;\n            background: rgba(15, 23, 42, 0.8);\n            backdrop-filter: blur(12px);\n            -webkit-backdrop-filter: blur(12px);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            border-radius: 12px;\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n            \n            cursor: pointer;\n            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n            animation: fadeIn 0.3s ease-out;\n        }\n\n        .duel-tracker-card:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);\n            border-color: var(--color-primary);\n            background: rgba(15, 23, 42, 0.9);\n        }\n\n        /* Pulse animation class */\n        .duel-tracker-card.pulse {\n            animation: duelPulse 2s infinite;\n        }\n\n        @keyframes duelPulse {\n          0% {\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n          }\n          50% {\n            box-shadow: 0 4px 25px rgba(9, 194, 133, 0.4);\n          }\n          100% {\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n          }\n        }\n    `;\n  document.head.appendChild(style);\n}\n\nfunction renderTokens(tokens, gridContainer, selectionPanel) {\n  gridContainer.innerHTML = '';\n\n  tokens.forEach(token => {\n    const card = createTokenCard(token);\n    card.addEventListener('click', () => selectToken(token, gridContainer, selectionPanel));\n    gridContainer.appendChild(card);\n  });\n}\n\nfunction createTokenCard(token) {\n  const card = document.createElement('div');\n  card.className = 'token-card';\n  card.dataset.tokenId = token.id;\n\n  const changeClass = getPriceChangeClass(token.priceChange24h);\n\n  card.innerHTML = `\n    <div class=\"token-icon\">\n      <img src=\"${token.image}\" alt=\"${token.name}\" />\n    </div>\n    <div class=\"token-info\">\n      <div class=\"token-name\">${token.name}</div>\n      <div class=\"token-symbol\">${token.symbol.toUpperCase()}</div>\n    </div>\n    <div class=\"token-price\">\n      <div class=\"token-price-value\">${formatCurrency(token.currentPrice)}</div>\n      <div class=\"token-price-change ${changeClass}\">\n        ${formatPercentage(token.priceChange24h)}\n      </div>\n    </div>\n  `;\n\n  return card;\n}\n\nfunction selectToken(token, gridContainer, selectionPanel) {\n  // Check if already selected\n  if (selectedTokens.a?.id === token.id) {\n    selectedTokens.a = null;\n    updateTokenSelection(gridContainer);\n    updateSelectionPanel(selectionPanel);\n    return;\n  }\n  if (selectedTokens.b?.id === token.id) {\n    selectedTokens.b = null;\n    updateTokenSelection(gridContainer);\n    updateSelectionPanel(selectionPanel);\n    return;\n  }\n\n  // Select token\n  if (!selectedTokens.a) {\n    selectedTokens.a = token;\n  } else if (!selectedTokens.b) {\n    selectedTokens.b = token;\n  } else {\n    // Replace first token\n    selectedTokens.a = selectedTokens.b;\n    selectedTokens.b = token;\n  }\n\n  updateTokenSelection(gridContainer);\n  updateSelectionPanel(selectionPanel);\n}\n\nfunction updateTokenSelection(gridContainer) {\n  const cards = gridContainer.querySelectorAll('.token-card');\n  cards.forEach(card => {\n    const tokenId = card.dataset.tokenId;\n    if (tokenId === selectedTokens.a?.id || tokenId === selectedTokens.b?.id) {\n      card.classList.add('selected');\n    } else {\n      card.classList.remove('selected');\n    }\n  });\n}\n\nfunction updateSelectionPanel(panel) {\n  const selectionCount = (selectedTokens.a ? 1 : 0) + (selectedTokens.b ? 1 : 0);\n  const mainContent = document.getElementById('duel-main-content');\n  const tokenGrid = document.getElementById('token-grid');\n  const tokenCards = document.querySelectorAll('#token-grid .token-card');\n\n  if (selectionCount === 0) {\n    panel.style.display = 'none';\n    // Reset main content margin when panel is hidden\n    if (mainContent) {\n      mainContent.style.marginRight = '0';\n    }\n    // Remove compact mode from token cards and grid\n    if (tokenGrid) {\n      tokenGrid.classList.remove('compact-grid');\n    }\n    tokenCards.forEach(card => card.classList.remove('compact-mode'));\n    return;\n  }\n\n  // Adjust main content to make room for the panel\n  if (mainContent) {\n    mainContent.style.marginRight = '320px';\n  }\n\n  // Make token grid and cards compact when panel is open\n  if (tokenGrid) {\n    tokenGrid.classList.add('compact-grid');\n  }\n  tokenCards.forEach(card => card.classList.add('compact-mode'));\n\n  // Set all flex properties together to ensure proper layout\n  panel.style.cssText = `\n    position: fixed;\n    top: 64px;\n    right: 0;\n    width: 320px;\n    height: calc(100vh - 64px);\n    background: var(--glass-bg);\n    border-left: 1px solid var(--glass-border);\n    padding: var(--spacing-sm) var(--spacing-md) var(--spacing-md);\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    gap: var(--spacing-md);\n    overflow-y: auto;\n    z-index: 100;\n    /* Hide scrollbar */\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n    animation: slideInRight 0.3s ease-out;\n  `;\n\n  panel.innerHTML = `\n    <!-- Top Content -->\n    <div>\n      <!-- Header -->\n      <div style=\"display: flex; align-items: center; justify-content: space-between; padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--glass-border); margin-bottom: var(--spacing-md);\">\n        <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-primary)\" stroke-width=\"2\">\n            <path d=\"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"></path>\n            <polyline points=\"14 2 14 8 20 8\"></polyline>\n          </svg>\n          <span style=\"font-weight: 600; font-size: 1.1rem;\">Duel Slip</span>\n          <span style=\"background: var(--color-primary); color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 600;\">${selectionCount}</span>\n        </div>\n        <button id=\"close-panel-btn\" style=\"background: none; border: none; cursor: pointer; padding: 2px; color: var(--color-text-muted);\">\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n          </svg>\n        </button>\n      </div>\n\n      <!-- Duel Card -->\n      <div style=\"background: var(--color-bg-secondary); border-radius: var(--radius-lg); padding: var(--spacing-md); border: 1px solid var(--glass-border);\">\n        <!-- Match Title -->\n        <div style=\"display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--spacing-md); padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--glass-border);\">\n          <div style=\"font-size: 0.85rem; font-weight: 500; color: var(--color-text-primary); flex: 1;\">\n            ${selectedTokens.a ? selectedTokens.a.symbol.toUpperCase() : '???'} vs ${selectedTokens.b ? selectedTokens.b.symbol.toUpperCase() : '???'}\n          </div>\n          <button class=\"remove-selection-btn\" style=\"background: none; border: none; cursor: pointer; padding: 2px; color: var(--color-text-muted); font-size: 1rem;\"></button>\n        </div>\n        \n        <!-- Tokens Display -->\n        <div style=\"display: flex; align-items: center; justify-content: space-between; gap: var(--spacing-sm); margin-bottom: var(--spacing-md);\">\n          ${createCompactTokenDisplay(selectedTokens.a, 'A')}\n          <div style=\"font-size: 0.9rem; font-weight: 700; color: var(--color-accent-orange); padding: 0 var(--spacing-xs);\">VS</div>\n          ${createCompactTokenDisplay(selectedTokens.b, 'B')}\n        </div>\n\n        <!-- Live Performance Comparison -->\n        <!-- 24h Performance Comparison (Simplified) -->\n        ${selectedTokens.a && selectedTokens.b ? `\n        <div style=\"background: var(--color-bg-tertiary); border-radius: var(--radius-md); padding: var(--spacing-sm); margin-bottom: var(--spacing-md); text-align: center;\">\n             ${(() => {\n        const changeA = selectedTokens.a.priceChange24h || 0;\n        const changeB = selectedTokens.b.priceChange24h || 0;\n        const diff = Math.abs(changeA - changeB).toFixed(2);\n\n        if (changeA > changeB) {\n          return `<span style=\"font-size: 0.8rem; color: var(--color-text-secondary); line-height: 1.4; display: block;\"><b>${selectedTokens.a.symbol.toUpperCase()}</b> currently leads <b>${selectedTokens.b.symbol.toUpperCase()}</b> by <b style=\"color: #09C285\">${diff}%</b></span>`;\n        } else if (changeB > changeA) {\n          return `<span style=\"font-size: 0.8rem; color: var(--color-text-secondary); line-height: 1.4; display: block;\"><b>${selectedTokens.b.symbol.toUpperCase()}</b> currently leads <b>${selectedTokens.a.symbol.toUpperCase()}</b> by <b style=\"color: #09C285\">${diff}%</b></span>`;\n        } else {\n          return `<span style=\"font-size: 0.8rem; color: var(--color-text-muted);\">Both tokens have equal performance in last 24H</span>`;\n        }\n      })()}\n        </div>\n        ` : ''}\n\n        <!-- Time Period Selection -->\n        <div>\n          <div style=\"font-size: 0.75rem; color: var(--color-text-muted); margin-bottom: var(--spacing-xs);\">Duration</div>\n          <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px;\">\n            ${Object.entries(TIME_PERIODS).map(([key, period]) => `\n              <button class=\"time-option ${period.hours === selectedDuration ? 'selected' : ''}\" data-hours=\"${period.hours}\" style=\"padding: 0.4rem 0.5rem; font-size: 0.8rem;\">\n                ${period.label}\n              </button>\n            `).join('')}\n          </div>\n        </div>\n      </div>\n    </div>\n\n<!-- Bottom Section (Centered) -->\n<div style=\"border-top: 1px solid var(--glass-border); padding-top: var(--spacing-md); text-align: center;\">\n  <div style=\"margin-bottom: var(--spacing-xs);\">\n    <div style=\"color: var(--color-text-muted); font-size: 0.85rem;\">Selected Tokens</div>\n    <div style=\"font-weight: 600; font-size: 0.85rem;\">${selectionCount}/2</div>\n  </div>\n  <div style=\"margin-bottom: var(--spacing-md);\">\n    <div style=\"color: var(--color-text-muted); font-size: 0.85rem;\">Duration</div>\n    <div style=\"font-weight: 600; font-size: 0.85rem; color: var(--color-primary);\">\n      ${(() => {\n      const found = Object.keys(TIME_PERIODS).find(k => Math.abs(TIME_PERIODS[k].hours - selectedDuration) < 0.001);\n      return found ? TIME_PERIODS[found].label : '1H';\n    })()}\n    </div>\n  </div>\n  <button class=\"btn btn-primary\" style=\"width: 100%; padding: 0.875rem;\" id=\"start-duel-btn\" ${selectionCount < 2 ? 'disabled' : ''}>\n    ${selectionCount < 2 ? 'Select 2 Tokens' : 'Start Duel'}\n  </button>\n</div>\n  `;\n\n  // Add time option listeners\n  panel.querySelectorAll('.time-option').forEach(btn => {\n    btn.addEventListener('click', () => {\n      selectedDuration = parseFloat(btn.dataset.hours);\n      updateSelectionPanel(panel);\n    });\n  });\n\n  // Add close panel listener\n  const closeBtn = panel.querySelector('#close-panel-btn');\n  if (closeBtn) {\n    closeBtn.addEventListener('click', () => {\n      selectedTokens = { a: null, b: null };\n      const gridContainer = document.getElementById('token-grid');\n      const mainContent = document.getElementById('duel-main-content');\n      const tokenCards = document.querySelectorAll('#token-grid .token-card');\n\n      if (gridContainer) {\n        updateTokenSelection(gridContainer);\n        gridContainer.classList.remove('compact-grid');\n      }\n      if (mainContent) {\n        mainContent.style.marginRight = '0';\n      }\n      tokenCards.forEach(card => card.classList.remove('compact-mode'));\n      panel.style.display = 'none';\n    });\n  }\n\n  // Add remove selection listener\n  const removeBtn = panel.querySelector('.remove-selection-btn');\n  if (removeBtn) {\n    removeBtn.addEventListener('click', () => {\n      selectedTokens = { a: null, b: null };\n      const gridContainer = document.getElementById('token-grid');\n      if (gridContainer) updateTokenSelection(gridContainer);\n      updateSelectionPanel(panel);\n    });\n  }\n\n  // Add start duel listener - always attach, check disabled state inside\n  const startBtn = panel.querySelector('#start-duel-btn');\n  if (startBtn) {\n    startBtn.onclick = () => {\n      if (!startBtn.disabled) {\n        showPredictionModal();\n      }\n    };\n  }\n}\n\n// Compact token display for bet slip style\nfunction createCompactTokenDisplay(token, label, priceId = null) {\n  if (!token) {\n    return `\n      <div style=\"display: flex; align-items: center; gap: var(--spacing-xs); flex: 1;\">\n        <div style=\"width: 32px; height: 32px; border-radius: 50%; background: var(--color-bg-tertiary); display: flex; align-items: center; justify-content: center; font-size: 0.9rem; color: var(--color-text-muted);\">?</div>\n        <div>\n          <div style=\"font-size: 0.75rem; color: var(--color-text-muted);\">Token ${label}</div>\n          <div style=\"font-size: 0.85rem; font-weight: 600; color: var(--color-text-muted);\">Select</div>\n        </div>\n      </div>\n    `;\n  }\n\n  // Determine font size based on price length\n  const priceStr = formatCurrency(token.currentPrice);\n  let priceFontSize = '0.75rem';\n  if (priceStr.length > 10) {\n    priceFontSize = '0.6rem';\n  } else if (priceStr.length > 8) {\n    priceFontSize = '0.65rem';\n  } else if (priceStr.length > 6) {\n    priceFontSize = '0.7rem';\n  }\n\n  return `\n    <div style=\"display: flex; align-items: center; gap: var(--spacing-xs); flex: 1; min-width: 0; overflow: hidden;\">\n      <img src=\"${token.image}\" alt=\"${token.symbol}\" style=\"width: 32px; height: 32px; border-radius: 50%; flex-shrink: 0;\" />\n      <div style=\"min-width: 0; overflow: hidden;\">\n        <div style=\"font-size: 0.7rem; color: var(--color-text-muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">${token.name.length > 8 ? token.symbol.toUpperCase() : token.name}</div>\n        <div ${priceId ? `id=\"${priceId}\"` : ''} style=\"font-size: ${priceFontSize}; font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">${priceStr}</div>\n      </div>\n    </div>\n  `;\n}\n\nfunction createSelectedTokenDisplay(token, label) {\n  if (!token) {\n    return `\n      <div style=\"text-align: center; padding: var(--spacing-sm); background: var(--color-bg-secondary); border-radius: var(--radius-lg); width: 100%;\">\n        <div style=\"width: 60px; height: 60px; border-radius: 50%; background: var(--color-bg-tertiary); display: flex; align-items: center; justify-content: center; margin: 0 auto var(--spacing-sm); font-size: 1.5rem; color: var(--color-text-muted);\">\n          ?\n        </div>\n        <div style=\"color: var(--color-text-muted); font-size: 0.85rem;\">Select Token ${label}</div>\n      </div>\n    `;\n  }\n\n  const changeClass = getPriceChangeClass(token.priceChange24h);\n\n  return `\n    <div style=\"text-align: center; padding: var(--spacing-sm); background: var(--color-bg-secondary); border-radius: var(--radius-lg); width: 100%;\">\n      <div style=\"width: 60px; height: 60px; border-radius: 50%; overflow: hidden; margin: 0 auto var(--spacing-sm); border: 3px solid var(--color-primary);\">\n        <img src=\"${token.image}\" alt=\"${token.name}\" style=\"width: 100%; height: 100%; object-fit: cover;\" />\n      </div>\n      <div style=\"font-weight: 600; font-size: 0.95rem; margin-bottom: 2px;\">${token.name}</div>\n      <div style=\"font-size: 0.8rem; color: var(--color-text-muted); margin-bottom: 2px;\">${token.symbol.toUpperCase()}</div>\n      <div style=\"font-weight: 600; font-size: 0.9rem;\">${formatCurrency(token.currentPrice)}</div>\n      <div class=\"token-price-change ${changeClass}\" style=\"font-size: 0.8rem;\">\n        ${formatPercentage(token.priceChange24h)}\n      </div>\n    </div>\n  `;\n}\n\nfunction showPredictionModal() {\n  const state = walletManager.getState();\n  if (!state.connected) {\n    alert('Please connect your wallet first!');\n    return;\n  }\n\n  const overlay = document.createElement('div');\n  overlay.className = 'modal-overlay';\n\n  const modal = document.createElement('div');\n  modal.className = 'modal';\n  modal.style.maxWidth = '500px';\n\n  modal.innerHTML = `\n    <button class=\"modal-close\"></button>\n    <h2 class=\"modal-title\">Make Your Prediction</h2>\n    \n    <div class=\"modal-body\">\n      <p style=\"text-align: center; color: var(--color-text-secondary); margin-bottom: var(--spacing-lg);\">\n        Which token will perform better in the next ${(() => {\n      const found = Object.keys(TIME_PERIODS).find(k => Math.abs(TIME_PERIODS[k].hours - selectedDuration) < 0.001);\n      return found ? TIME_PERIODS[found].label.toLowerCase() : '1h';\n    })()}?\n      </p>\n\n      <div style=\"display: flex; flex-direction: column; gap: var(--spacing-md);\">\n        <button class=\"btn btn-success btn-lg\" id=\"predict-a\">\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <path d=\"M12 19V5M5 12l7-7 7 7\"></path>\n          </svg>\n          ${selectedTokens.a.name} will outperform ${selectedTokens.b.name}\n        </button>\n        \n        <button class=\"btn btn-success btn-lg\" id=\"predict-b\">\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <path d=\"M12 19V5M5 12l7-7 7 7\"></path>\n          </svg>\n          ${selectedTokens.b.name} will outperform ${selectedTokens.a.name}\n        </button>\n      </div>\n    </div>\n  `;\n\n  overlay.appendChild(modal);\n  document.body.appendChild(overlay);\n\n  // Close button\n  modal.querySelector('.modal-close').addEventListener('click', () => overlay.remove());\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) overlay.remove();\n  });\n\n  // Prediction buttons\n  modal.querySelector('#predict-a').addEventListener('click', () => makePrediction('A', overlay));\n  modal.querySelector('#predict-b').addEventListener('click', () => makePrediction('B', overlay));\n}\n\n// Store active duels for tracking\nlet activeDuels = [];\n\nasync function makePrediction(winner, overlay) {\n  const btn = overlay.querySelector(winner === 'A' ? '#predict-a' : '#predict-b');\n  btn.disabled = true;\n  btn.innerHTML = '<div class=\"loading\"></div> Fetching prices...';\n\n  try {\n    // Try Binance first for starting prices\n    let startPriceA, startPriceB;\n\n    try {\n      const { fetchTickerData } = await import('../../services/candleService.js');\n      const [tickerA, tickerB] = await Promise.all([\n        fetchTickerData(selectedTokens.a.symbol.toUpperCase()),\n        fetchTickerData(selectedTokens.b.symbol.toUpperCase())\n      ]);\n      startPriceA = tickerA.price;\n      startPriceB = tickerB.price;\n      console.log(' Got starting prices from Binance');\n    } catch (binanceError) {\n      console.log('Falling back to CoinGecko for starting prices');\n      const { fetchTokenPrices } = await import('../../services/priceService.js');\n      const prices = await fetchTokenPrices([selectedTokens.a.id, selectedTokens.b.id]);\n      startPriceA = prices[selectedTokens.a.id]?.usd || selectedTokens.a.currentPrice;\n      startPriceB = prices[selectedTokens.b.id]?.usd || selectedTokens.b.currentPrice;\n    }\n\n    console.log(`[Duel Start] ${selectedTokens.a.symbol}: $${startPriceA}`);\n    console.log(`[Duel Start] ${selectedTokens.b.symbol}: $${startPriceB}`);\n\n    btn.innerHTML = '<div class=\"loading\"></div> Submitting...';\n\n    const predictedWinner = winner;\n    const durationHours = selectedDuration;\n    const durationMs = durationHours * 60 * 60 * 1000; // Convert hours to milliseconds\n\n    const result = await submitDuelPrediction({\n      tokenA: selectedTokens.a.id,\n      tokenB: selectedTokens.b.id,\n      predictedWinner: winner,\n      duration: selectedDuration,\n    });\n\n    overlay.remove();\n\n    // Hide the Duel Slip panel\n    const selectionPanel = document.getElementById('selection-panel');\n    const mainContent = document.getElementById('duel-main-content');\n    const tokenGrid = document.getElementById('token-grid');\n    const tokenCards = document.querySelectorAll('#token-grid .token-card');\n\n    if (selectionPanel) {\n      selectionPanel.style.display = 'none';\n    }\n    if (mainContent) {\n      mainContent.style.marginRight = '0';\n    }\n    if (tokenGrid) {\n      tokenGrid.classList.remove('compact-grid');\n    }\n    tokenCards.forEach(card => {\n      card.classList.remove('compact-mode', 'selected');\n    });\n\n    // Store duel info for tracking with fresh prices\n    const duelInfo = {\n      id: result.predictionId,\n      tokenA: { ...selectedTokens.a, startPrice: startPriceA },\n      tokenB: { ...selectedTokens.b, startPrice: startPriceB },\n      predictedWinner,\n      duration: durationHours,\n      startTime: Date.now(),\n    };\n\n    activeDuels.push(duelInfo);\n\n    // Show countdown notification with actual duration\n    showDuelCountdown(duelInfo, durationMs);\n\n    // Reset selection\n    selectedTokens = { a: null, b: null };\n\n  } catch (error) {\n    btn.disabled = false;\n    btn.innerHTML = winner === 'A' ? `${selectedTokens.a.name} will win` : `${selectedTokens.b.name} will win`;\n    alert(` Error: ${error.message}`);\n  }\n}\n\n// Show countdown and then determine winner\nasync function showDuelCountdown(duelInfo, durationMs) {\n  // Track if showing in panel or as floating\n  let isInPanel = true;\n\n  // Track live prices\n  let livePriceA = duelInfo.tokenA.startPrice;\n  let livePriceB = duelInfo.tokenB.startPrice;\n  let tickerUnsubA = null;\n  let tickerUnsubB = null;\n\n  // Create countdown element (this will hold the LIVE part)\n  const countdownElement = document.createElement('div');\n  countdownElement.id = `duel-countdown-${duelInfo.id}`;\n\n  // Styles for panel (inside Duel Slip - at bottom)\n  const setPanelStyles = () => {\n    // Push to bottom using margin-top: auto\n    countdownElement.className = '';\n    countdownElement.style.cssText = 'margin-top: auto; border-top: 1px solid var(--glass-border); padding-top: var(--spacing-md);';\n  };\n\n  // Styles for floating (bottom right)\n  const setFloatingStyles = () => {\n    addDuelTrackerStyles();\n    countdownElement.className = 'duel-tracker-card pulse';\n    // Clear any inline styles that might interfere/remain from previous states\n    countdownElement.style.cssText = '';\n  };\n\n  // Format currency helper\n  const formatPrice = (price) => {\n    if (price >= 1000) return '$' + price.toLocaleString('en-US', { maximumFractionDigits: 2 });\n    if (price >= 1) return '$' + price.toFixed(2);\n    return '$' + price.toFixed(6);\n  };\n\n  // Calculate change percentage\n  const calcChange = (current, start) => ((current - start) / start * 100);\n\n  // Subscribe to real-time ticker updates\n  const startTickerUpdates = async () => {\n    try {\n      const { subscribeToTickerUpdates } = await import('../../services/candleService.js');\n\n      tickerUnsubA = subscribeToTickerUpdates(duelInfo.tokenA.symbol.toUpperCase(), (ticker) => {\n        livePriceA = ticker.price;\n      });\n\n      tickerUnsubB = subscribeToTickerUpdates(duelInfo.tokenB.symbol.toUpperCase(), (ticker) => {\n        livePriceB = ticker.price;\n      });\n\n      console.log(' Started live price tracking for duel');\n    } catch (error) {\n      console.log('Could not start ticker updates:', error);\n    }\n  };\n\n  // Cleanup ticker subscriptions\n  const stopTickerUpdates = () => {\n    if (tickerUnsubA) tickerUnsubA();\n    if (tickerUnsubB) tickerUnsubB();\n    console.log(' Stopped live price tracking for duel');\n  };\n\n  // Render minimized floating version\n  const renderFloating = (remainingMs) => {\n    const seconds = Math.ceil(remainingMs / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    const timeDisplay = minutes > 0 ? `${minutes}:${secs.toString().padStart(2, '0')}` : `${seconds}s`;\n\n    const changeA = calcChange(livePriceA, duelInfo.tokenA.startPrice);\n    const changeB = calcChange(livePriceB, duelInfo.tokenB.startPrice);\n    const leadingToken = changeA >= changeB ? duelInfo.tokenA.symbol : duelInfo.tokenB.symbol;\n\n    countdownElement.innerHTML = `\n      <div class=\"loading\" style=\"width: 14px; height: 14px; border-color: white; border-top-color: transparent;\"></div>\n      <span style=\"color: white; font-weight: 600; font-size: 0.85rem;\">${leadingToken} </span>\n      <span style=\"color: rgba(255,255,255,0.8); font-weight: 700; font-size: 0.9rem;\">${timeDisplay}</span>\n    `;\n  };\n\n  // Render panel version (Live footer content)\n  const renderPanel = (remainingMs) => {\n    const seconds = Math.ceil(remainingMs / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    const timeDisplay = minutes > 0 ? `${minutes}m ${secs}s` : `${seconds}s`;\n\n    const changeA = calcChange(livePriceA, duelInfo.tokenA.startPrice);\n    const changeB = calcChange(livePriceB, duelInfo.tokenB.startPrice);\n    const isALeading = changeA > changeB;\n    const isBLeading = changeB > changeA;\n    const isTied = Math.abs(changeA - changeB) < 0.001;\n\n    // Update LIVE prices in the \"static\" top part if they exist\n    const priceElA = document.getElementById('live-price-a');\n    if (priceElA) priceElA.textContent = formatPrice(livePriceA);\n\n    const priceElB = document.getElementById('live-price-b');\n    if (priceElB) priceElB.textContent = formatPrice(livePriceB);\n\n    // Update LIVE performance summary in the top part\n    const perfSummaryEl = document.getElementById('live-perf-summary');\n    if (perfSummaryEl) {\n      const diff = Math.abs(changeA - changeB).toFixed(3);\n      if (isALeading) {\n        perfSummaryEl.innerHTML = `<span style=\"font-size: 0.8rem; color: var(--color-text-secondary); line-height: 1.4; display: block;\">Token <b>${duelInfo.tokenA.symbol.toUpperCase()}</b> is leading <b>${duelInfo.tokenB.symbol.toUpperCase()}</b> by <b style=\"color: #09C285\">${diff}%</b></span>`;\n      } else if (isBLeading) {\n        perfSummaryEl.innerHTML = `<span style=\"font-size: 0.8rem; color: var(--color-text-secondary); line-height: 1.4; display: block;\">Token <b>${duelInfo.tokenB.symbol.toUpperCase()}</b> is leading <b>${duelInfo.tokenA.symbol.toUpperCase()}</b> by <b style=\"color: #09C285\">${diff}%</b></span>`;\n      } else {\n        perfSummaryEl.innerHTML = `<span style=\"font-size: 0.8rem; color: var(--color-text-muted);\">Both tokens have equal performance since start</span>`;\n      }\n    }\n\n    countdownElement.innerHTML = `\n      <div style=\"display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--spacing-sm);\">\n        <div style=\"display: flex; align-items: center; gap: var(--spacing-xs);\">\n          <div class=\"loading\" style=\"width: 12px; height: 12px;\"></div>\n          <span style=\"font-weight: 600; font-size: 0.85rem; color: var(--color-primary);\">LIVE DUEL</span>\n        </div>\n        <span style=\"font-weight: 700; font-size: 0.9rem; color: var(--color-text-primary);\">${timeDisplay}</span>\n      </div>\n      \n      <!-- Live Status -->\n      <div style=\"background: rgba(9, 194, 133, 0.1); border: 1px solid rgba(9, 194, 133, 0.3); border-radius: var(--radius-md); padding: var(--spacing-sm); text-align: center;\">\n         <div style=\"font-weight: 700; font-size: 0.9rem; margin-bottom: 2px;\">\n            ${isTied ? ' Currently Tied' : isALeading ? ` ${duelInfo.tokenA.symbol} LEADING` : ` ${duelInfo.tokenB.symbol} LEADING`}\n         </div>\n         <div style=\"font-size: 0.75rem; color: var(--color-text-muted);\">\n            ${isTied ? 'Both tokens have equal performance' : `Leading by ${Math.abs(changeA - changeB).toFixed(3)}%`}\n         </div>\n         <div style=\"display: flex; justify-content: space-between; margin-top: 6px; font-size: 0.75rem;\">\n            <span style=\"color: ${changeA >= 0 ? '#09C285' : '#FF4D4F'}\">${duelInfo.tokenA.symbol}: ${changeA >= 0 ? '+' : ''}${changeA.toFixed(3)}%</span>\n            <span style=\"color: ${changeB >= 0 ? '#09C285' : '#FF4D4F'}\">${duelInfo.tokenB.symbol}: ${changeB >= 0 ? '+' : ''}${changeB.toFixed(3)}%</span>\n         </div>\n      </div>\n      \n      <button class=\"btn\" style=\"width: 100%; margin-top: var(--spacing-md); background: var(--color-bg-tertiary); color: var(--color-text-muted); opacity: 0.7; cursor: not-allowed;\">\n        Duel in Progress...\n      </button>\n    `;\n  };\n\n  // Helper to build the static part of the panel\n  const buildStaticPanel = () => {\n    return `\n      <!-- Top Content -->\n      <div>\n        <!-- Header -->\n        <div style=\"display: flex; align-items: center; justify-content: space-between; padding-bottom: var(--spacing-md); border-bottom: 1px solid var(--glass-border); margin-bottom: var(--spacing-md);\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-primary)\" stroke-width=\"2\">\n              <path d=\"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\"></path>\n              <polyline points=\"14 2 14 8 20 8\"></polyline>\n            </svg>\n            <span style=\"font-weight: 600; font-size: 1.1rem;\">Duel Slip</span>\n            <span style=\"background: var(--color-primary); color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; font-weight: 600;\">2</span>\n          </div>\n          <button id=\"close-panel-btn-disabled\" style=\"background: none; border: none; cursor: default; padding: 4px; color: var(--color-text-muted); opacity: 0.5;\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n            </svg>\n          </button>\n        </div>\n\n        <!-- Duel Card -->\n        <div style=\"background: var(--color-bg-secondary); border-radius: var(--radius-lg); padding: var(--spacing-md); border: 1px solid var(--glass-border);\">\n          <!-- Match Title -->\n          <div style=\"display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--spacing-md); padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--glass-border);\">\n            <div style=\"font-size: 0.85rem; font-weight: 500; color: var(--color-text-primary); flex: 1;\">\n              ${duelInfo.tokenA.symbol.toUpperCase()} vs ${duelInfo.tokenB.symbol.toUpperCase()}\n            </div>\n          </div>\n          \n          <!-- Tokens Display -->\n          <div style=\"display: flex; align-items: center; justify-content: space-between; gap: var(--spacing-sm); margin-bottom: var(--spacing-md);\">\n            ${createCompactTokenDisplay(duelInfo.tokenA, 'A', 'live-price-a')}\n            <div style=\"font-size: 0.9rem; font-weight: 700; color: var(--color-accent-orange); padding: 0 var(--spacing-xs);\">VS</div>\n            ${createCompactTokenDisplay(duelInfo.tokenB, 'B', 'live-price-b')}\n          </div>\n\n          <!-- 24h Performance Comparison (Simplified Static Context) -->\n          <div id=\"live-perf-summary\" style=\"background: var(--color-bg-tertiary); border-radius: var(--radius-md); padding: var(--spacing-sm); margin-bottom: var(--spacing-md); text-align: center;\">\n             ${(() => {\n        const changeA = duelInfo.tokenA.priceChange24h || 0;\n        const changeB = duelInfo.tokenB.priceChange24h || 0;\n        const diff = Math.abs(changeA - changeB).toFixed(2);\n\n        if (changeA > changeB) {\n          return `<span style=\"font-size: 0.8rem; color: var(--color-text-secondary); line-height: 1.4; display: block;\">Token <b>${duelInfo.tokenA.symbol.toUpperCase()}</b> is leading <b>${duelInfo.tokenB.symbol.toUpperCase()}</b> by <b style=\"color: #09C285\">${diff}%</b></span>`;\n        } else if (changeB > changeA) {\n          return `<span style=\"font-size: 0.8rem; color: var(--color-text-secondary); line-height: 1.4; display: block;\">Token <b>${duelInfo.tokenB.symbol.toUpperCase()}</b> is leading <b>${duelInfo.tokenA.symbol.toUpperCase()}</b> by <b style=\"color: #09C285\">${diff}%</b></span>`;\n        } else {\n          return `<span style=\"font-size: 0.8rem; color: var(--color-text-muted);\">Both tokens have equal performance in last 24H</span>`;\n        }\n      })()}\n          </div>\n\n          <!-- Time Period Selection -->\n          <div>\n            <div style=\"font-size: 0.75rem; color: var(--color-text-muted); margin-bottom: var(--spacing-xs);\">Duration</div>\n            <div style=\"display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px;\">\n               <div style=\"padding: 0.4rem 0.5rem; font-size: 0.8rem; background: var(--gradient-green); border-radius: var(--radius-md); text-align: center; font-weight: 600; border: 1px solid transparent;\">\n                  ${Object.values(TIME_PERIODS).find(p => Math.abs(p.hours - duelInfo.duration) < 0.001)?.label || '1H'}\n               </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `;\n  };\n\n  // Check current page and position element accordingly\n  const updatePosition = () => {\n    const currentPath = window.location.hash.replace('#', '').replace('/', '');\n    const isOnDuelPage = currentPath === 'crypto-duel';\n    const selectionPanel = document.getElementById('selection-panel');\n\n    if (isOnDuelPage && selectionPanel) {\n      // Show in Duel Slip panel\n      if (!isInPanel || countdownElement.parentElement !== selectionPanel) {\n        isInPanel = true;\n\n        // Remove from body if there\n        if (countdownElement.parentElement === document.body) {\n          document.body.removeChild(countdownElement);\n        }\n\n        // Show the panel\n        selectionPanel.style.display = 'flex';\n        const mainContent = document.getElementById('duel-main-content');\n        if (mainContent) mainContent.style.marginRight = '320px';\n\n        // Rebuild panel structure with static info + live footer\n        selectionPanel.innerHTML = buildStaticPanel();\n\n        // Append live tracker at bottom\n        setPanelStyles();\n        selectionPanel.appendChild(countdownElement);\n        renderPanel(remaining);\n      }\n    } else {\n      // Show as floating button\n      if (isInPanel || countdownElement.parentElement !== document.body) {\n        isInPanel = false;\n        // Remove from panel if there\n        if (countdownElement.parentElement) {\n          countdownElement.parentElement.removeChild(countdownElement);\n          // And hide panel since we left\n          const selectionPanel = document.getElementById('selection-panel');\n          if (selectionPanel) selectionPanel.style.display = 'none';\n        }\n        setFloatingStyles();\n        document.body.appendChild(countdownElement);\n        renderFloating(remaining);\n      }\n    }\n  };\n\n  // Click on floating to navigate to crypto-duel\n  countdownElement.addEventListener('click', () => {\n    if (!isInPanel) {\n      window.location.hash = '#/crypto-duel';\n    }\n  });\n\n  // Listen for navigation\n  window.addEventListener('hashchange', updatePosition);\n  window.addEventListener('navigate', updatePosition);\n\n  // Start ticker updates\n  startTickerUpdates();\n\n  // Initial position\n  let remaining = durationMs;\n  updatePosition();\n\n  // Update countdown every second\n  const countdownInterval = setInterval(() => {\n    remaining -= 1000;\n    if (remaining <= 0) {\n      clearInterval(countdownInterval);\n      stopTickerUpdates(); // Stop live updates\n      window.removeEventListener('hashchange', updatePosition);\n      window.removeEventListener('navigate', updatePosition);\n\n      // Move to body for results display\n      if (countdownElement.parentElement !== document.body) {\n        if (countdownElement.parentElement) {\n          countdownElement.parentElement.removeChild(countdownElement);\n        }\n        countdownElement.style.cssText = `\n          position: fixed;\n          bottom: 20px;\n          right: 20px;\n          background: var(--glass-bg);\n          border: 1px solid var(--glass-border);\n          border-radius: var(--radius-xl);\n          padding: var(--spacing-lg);\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n          z-index: 1000;\n          min-width: 300px;\n          backdrop-filter: blur(10px);\n        `;\n        document.body.appendChild(countdownElement);\n      }\n      determineDuelWinner(duelInfo, countdownElement);\n    } else {\n      if (isInPanel) {\n        renderPanel(remaining);\n      } else {\n        renderFloating(remaining);\n      }\n    }\n  }, 1000);\n}\n\n// Determine the winner after timeframe ends\nasync function determineDuelWinner(duelInfo, countdownOverlay) {\n  countdownOverlay.innerHTML = `\n    <div style=\"display: flex; align-items: center; gap: var(--spacing-sm); padding: var(--spacing-sm);\">\n      <div class=\"loading\" style=\"width: 20px; height: 20px;\"></div>\n      <span>Calculating results...</span>\n    </div>\n  `;\n\n  try {\n    // Try Binance first for end prices\n    let endPriceA, endPriceB;\n\n    try {\n      const { fetchTickerData } = await import('../../services/candleService.js');\n      const [tickerA, tickerB] = await Promise.all([\n        fetchTickerData(duelInfo.tokenA.symbol.toUpperCase()),\n        fetchTickerData(duelInfo.tokenB.symbol.toUpperCase())\n      ]);\n      endPriceA = tickerA.price;\n      endPriceB = tickerB.price;\n      console.log(' Got final prices from Binance');\n    } catch (binanceError) {\n      console.log('Falling back to CoinGecko for final prices');\n      const { fetchTokenPrices } = await import('../../services/priceService.js');\n      const prices = await fetchTokenPrices([duelInfo.tokenA.id, duelInfo.tokenB.id]);\n      endPriceA = prices[duelInfo.tokenA.id]?.usd || duelInfo.tokenA.startPrice;\n      endPriceB = prices[duelInfo.tokenB.id]?.usd || duelInfo.tokenB.startPrice;\n    }\n\n    const changeA = ((endPriceA - duelInfo.tokenA.startPrice) / duelInfo.tokenA.startPrice) * 100;\n    const changeB = ((endPriceB - duelInfo.tokenB.startPrice) / duelInfo.tokenB.startPrice) * 100;\n\n    // Determine actual winner\n    let actualWinner;\n    if (Math.abs(changeA - changeB) < 0.001) {\n      actualWinner = 'TIE';\n    } else {\n      actualWinner = changeA > changeB ? 'A' : 'B';\n    }\n\n    // Check if user won\n    const userWon = actualWinner === 'TIE' ? null : (duelInfo.predictedWinner === actualWinner);\n\n    // Show result\n    showDuelResult(duelInfo, countdownOverlay, {\n      changeA,\n      changeB,\n      actualWinner,\n      userWon,\n      endPriceA,\n      endPriceB,\n    });\n\n    // Remove from active duels\n    activeDuels = activeDuels.filter(d => d.id !== duelInfo.id);\n\n  } catch (error) {\n    console.error('Error determining winner:', error);\n    countdownOverlay.innerHTML = `\n      <div style=\"color: var(--color-danger); text-align: center; padding: var(--spacing-md);\">\n         Error fetching results\n        <button onclick=\"this.parentElement.parentElement.remove()\" style=\"display: block; margin: var(--spacing-sm) auto 0; padding: 0.5rem 1rem; cursor: pointer;\">Dismiss</button>\n      </div>\n    `;\n  }\n}\n\n// Show the final duel result\nfunction showDuelResult(duelInfo, overlay, result) {\n  const winnerToken = result.actualWinner === 'A' ? duelInfo.tokenA : duelInfo.tokenB;\n  const loserToken = result.actualWinner === 'A' ? duelInfo.tokenB : duelInfo.tokenA;\n\n  const selectionPanel = document.getElementById('selection-panel');\n  const isInsidePanel = selectionPanel && selectionPanel.contains(overlay);\n\n  if (!isInsidePanel) {\n    // Floating overlay (outside panel)\n    overlay.style.cssText = `\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      background: var(--glass-bg);\n      border: 1px solid var(--glass-border);\n      border-radius: var(--radius-xl);\n      padding: var(--spacing-lg);\n      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n      z-index: 1000;\n      min-width: 300px;\n      backdrop-filter: blur(10px);\n    `;\n  } else {\n    // Inside the Duel Slip panel\n    // Clear all previous styles that cause misalignment\n    overlay.style.cssText = `\n      width: 100%;\n      max-width: 300px;\n      margin: 0 auto var(--spacing-md) auto;\n      padding: 0;\n      align-self: center;\n    `;\n    // Remove panel's bottom padding to avoid extra space\n    selectionPanel.style.paddingBottom = '0';\n    // Ensure panel uses 'flex-start' so card isn't pushed down\n    selectionPanel.style.justifyContent = 'flex-start';\n  }\n\n  overlay.innerHTML = `\n    <div style=\"text-align: center; animation: fadeIn 0.4s ease-out;\">\n      <div style=\"font-size: 3rem; margin-bottom: var(--spacing-sm);\">\n        ${result.userWon === null ? '' : result.userWon ? '' : ''}\n      </div>\n      <div style=\"font-size: 1.25rem; font-weight: 700; margin-bottom: var(--spacing-md); color: ${result.userWon === null ? 'var(--color-warning)' : result.userWon ? 'var(--color-success)' : 'var(--color-danger)'};\">\n        ${result.userWon === null ? \"It's a Tie!\" : result.userWon ? 'You Won!' : 'You Lost'}\n      </div>\n      <!-- Token A Results -->\n      <div style=\"background: var(--color-bg-secondary); border-radius: var(--radius-md); padding: var(--spacing-sm); margin-bottom: var(--spacing-xs); ${result.actualWinner === 'A' ? 'border: 2px solid var(--color-success);' : ''}\">\n        <div style=\"display: flex; align-items: center; gap: var(--spacing-md); margin-bottom: var(--spacing-xs);\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-xs);\">\n            <img src=\"${duelInfo.tokenA.image}\" style=\"width: 24px; height: 24px; border-radius: 50%;\" />\n            <span style=\"font-weight: 600;\">${duelInfo.tokenA.symbol.toUpperCase()}</span>\n            ${result.actualWinner === 'A' ? '<span style=\"font-size: 0.7rem; background: var(--color-success); color: white; padding: 1px 6px; border-radius: 4px; margin-left: 4px;\">WINNER</span>' : ''}\n          </div>\n          <span style=\"color: ${result.changeA >= 0 ? 'var(--color-success)' : 'var(--color-danger)'}; font-weight: 700; font-size: 1.1rem; white-space: nowrap;\">\n            ${result.changeA >= 0 ? '+' : ''}${result.changeA.toFixed(3)}%\n          </span>\n        </div>\n        <div style=\"display: flex; gap: var(--spacing-md); font-size: 0.75rem; color: var(--color-text-muted);\">\n          <span>Start: $${duelInfo.tokenA.startPrice.toLocaleString('en-US', { maximumFractionDigits: 6 })}</span>\n          <span>End: $${result.endPriceA.toLocaleString('en-US', { maximumFractionDigits: 6 })}</span>\n        </div>\n      </div>\n      <!-- Token B Results -->\n      <div style=\"background: var(--color-bg-secondary); border-radius: var(--radius-md); padding: var(--spacing-sm); margin-bottom: var(--spacing-md); ${result.actualWinner === 'B' ? 'border: 2px solid var(--color-success);' : ''}\">\n        <div style=\"display: flex; align-items: center; gap: var(--spacing-md); margin-bottom: var(--spacing-xs);\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-xs);\">\n            <img src=\"${duelInfo.tokenB.image}\" style=\"width: 24px; height: 24px; border-radius: 50%;\" />\n            <span style=\"font-weight: 600;\">${duelInfo.tokenB.symbol.toUpperCase()}</span>\n            ${result.actualWinner === 'B' ? '<span style=\"font-size: 0.7rem; background: var(--color-success); color: white; padding: 1px 6px; border-radius: 4px; margin-left: 4px;\">WINNER</span>' : ''}\n          </div>\n          <span style=\"color: ${result.changeB >= 0 ? 'var(--color-success)' : 'var(--color-danger)'}; font-weight: 700; font-size: 1.1rem; white-space: nowrap;\">\n            ${result.changeB >= 0 ? '+' : ''}${result.changeB.toFixed(3)}%\n          </span>\n        </div>\n        <div style=\"display: flex; gap: var(--spacing-md); font-size: 0.75rem; color: var(--color-text-muted);\">\n          <span>Start: $${duelInfo.tokenB.startPrice.toLocaleString('en-US', { maximumFractionDigits: 6 })}</span>\n          <span>End: $${result.endPriceB.toLocaleString('en-US', { maximumFractionDigits: 6 })}</span>\n        </div>\n      </div>\n      <!-- Difference Summary -->\n      <div style=\"background: var(--color-bg-tertiary); border-radius: var(--radius-md); padding: var(--spacing-sm); margin-bottom: var(--spacing-md); text-align: center;\">\n        ${result.actualWinner === 'TIE'\n      ? '<span style=\"font-size: 0.85rem; color: var(--color-text-muted);\">Both tokens performed equally!</span>'\n      : `<span style=\"font-size: 0.85rem;\">${winnerToken.symbol.toUpperCase()} outperformed by <strong style=\"color: var(--color-success);\">${Math.abs(result.changeA - result.changeB).toFixed(3)}%</strong></span>`\n    }\n      </div>\n      <button id=\"close-duel-result-btn\" class=\"btn ${result.userWon ? 'btn-success' : 'btn-primary'}\" style=\"width: 100%;\">\n        ${result.userWon ? ' Claim Reward' : 'Claim Reward'}\n      </button>\n    </div>\n  `;\n\n  const closeBtn = overlay.querySelector('#close-duel-result-btn');\n  if (closeBtn) {\n    closeBtn.addEventListener('click', (e) => {\n      e.stopPropagation();\n      overlay.remove();\n\n      const selectionPanel = document.getElementById('selection-panel');\n      // If the panel exists in DOM, hide it and reset layout (regardless of page hash)\n      if (selectionPanel) {\n        selectionPanel.style.display = 'none';\n\n        const mainContent = document.getElementById('duel-main-content');\n        if (mainContent) mainContent.style.marginRight = '0';\n\n        const tokenGrid = document.getElementById('token-grid');\n        const tokenCards = document.querySelectorAll('#token-grid .token-card');\n        if (tokenGrid) tokenGrid.classList.remove('compact-grid');\n        tokenCards.forEach(card => card.classList.remove('compact-mode'));\n      }\n    });\n  }\n}\n\n// Add time option styles\nconst style = document.createElement('style');\nstyle.textContent = `\n  .time-option {\n    padding: 0.5rem 1rem;\n    background: var(--glass-bg);\n    border: 1px solid var(--glass-border);\n    border-radius: var(--radius-md);\n    color: var(--color-text-primary);\n    cursor: pointer;\n    transition: all var(--transition-fast);\n    font-family: var(--font-primary);\n    font-size: 0.875rem;\n  }\n\n  .time-option:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  .time-option.selected {\n    background: var(--gradient-green);\n    border-color: transparent;\n  }\n\n  /* Torn Paper Effect for Duel Slip */\n  #selection-panel::before {\n    content: '';\n  /* Torn Paper Effect for Duel Slip - REMOVED */\n  #selection-panel::before {\n    display: none;\n  }\n\n  /* Clip-path version - REMOVED */\n  #selection-panel {\n    /* Hide scrollbar but allow scrolling */\n    -ms-overflow-style: none;  /* IE and Edge */\n    scrollbar-width: none;  /* Firefox */\n  }\n  \n  #selection-panel::-webkit-scrollbar {\n    display: none;\n  }\n\n  /* Compact mode for token cards when duel slip is open */\n  #token-grid.compact-grid {\n    grid-template-columns: repeat(4, 1fr) !important;\n    gap: var(--spacing-sm) !important;\n  }\n\n  .token-card.compact-mode {\n    padding: var(--spacing-md);\n    gap: var(--spacing-sm);\n    min-height: unset;\n  }\n\n  .token-card.compact-mode .token-icon {\n    width: 48px;\n    height: 48px;\n  }\n\n  .token-card.compact-mode .token-icon img {\n    width: 48px;\n    height: 48px;\n  }\n\n  .token-card.compact-mode .token-info {\n    flex: 0 0 auto;\n  }\n\n  .token-card.compact-mode .token-name {\n    display: none;\n  }\n\n  .token-card.compact-mode .token-symbol {\n    font-size: 1.1rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    margin-bottom: 0;\n  }\n\n  .token-card.compact-mode .token-price {\n    flex: 1;\n    text-align: right;\n  }\n\n  .token-card.compact-mode .token-price-value {\n    font-size: 1rem;\n    margin-bottom: 2px;\n  }\n\n  .token-card.compact-mode .token-price-change {\n    font-size: 0.9rem;\n  }\n`;\ndocument.head.appendChild(style);\n","// Global Team State Manager\n// Allows sharing selected team state across components\n\nlet selectedTeam = [];\nlet subscribers = [];\n\nexport function getSelectedTeam() {\n    return [...selectedTeam];\n}\n\nexport function setSelectedTeam(team) {\n    selectedTeam = [...team];\n    notifySubscribers();\n}\n\nexport function addToTeam(token) {\n    if (selectedTeam.length < 15 && !selectedTeam.find(t => t.id === token.id)) {\n        selectedTeam.push(token);\n        notifySubscribers();\n        return true;\n    }\n    return false;\n}\n\nexport function removeFromTeam(tokenId) {\n    const index = selectedTeam.findIndex(t => t.id === tokenId);\n    if (index !== -1) {\n        selectedTeam.splice(index, 1);\n        notifySubscribers();\n        return true;\n    }\n    return false;\n}\n\nexport function clearTeam() {\n    selectedTeam = [];\n    notifySubscribers();\n}\n\nexport function isTeamComplete() {\n    return selectedTeam.length === 15;\n}\n\nexport function subscribeToTeam(callback) {\n    subscribers.push(callback);\n    // Return unsubscribe function\n    return () => {\n        const index = subscribers.indexOf(callback);\n        if (index !== -1) {\n            subscribers.splice(index, 1);\n        }\n    };\n}\n\nfunction notifySubscribers() {\n    subscribers.forEach(callback => callback(getSelectedTeam()));\n}\n\n// Flag to auto-open modal when navigating from widget\nlet shouldOpenModal = false;\n\nexport function setShouldOpenModal(value) {\n    shouldOpenModal = value;\n}\n\nexport function getShouldOpenModal() {\n    const value = shouldOpenModal;\n    shouldOpenModal = false; // Reset after reading\n    return value;\n}\n","// Dream Team Game Component\n\nimport { fetchTopTokens, searchTokens, getCompetitionTimeInfo } from '../../services/priceService.js';\nimport { submitDreamTeam } from '../../contracts/gameContract.js';\nimport { formatCurrency, formatPercentage, getPriceChangeClass } from '../../utils/formatters.js';\nimport { MULTIPLIERS } from '../../utils/constants.js';\nimport walletManager from '../../wallet/walletManager.js';\nimport { getSelectedTeam, setSelectedTeam, getShouldOpenModal } from '../../utils/teamState.js';\n\nexport function createDreamTeam() {\n  const page = document.createElement('div');\n  page.className = 'dream-team-page';\n  page.id = 'dream-team-page';\n\n  const container = document.createElement('div');\n  container.className = 'container';\n  container.id = 'dream-team-container';\n  container.style.cssText = `\n    padding: var(--spacing-sm) var(--spacing-lg) var(--spacing-xl);\n    transition: all 0.3s ease;\n  `;\n\n  // Info Cards Section (above header) - 3 column layout\n  const infoCardsSection = document.createElement('div');\n  infoCardsSection.style.cssText = `\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    gap: var(--spacing-lg);\n    margin-bottom: var(--spacing-xl);\n  `;\n\n  // Live Competitions Card (Left column)\n  const liveCompCard = document.createElement('div');\n  liveCompCard.className = 'card';\n  liveCompCard.style.cssText = 'position: relative; padding: var(--spacing-lg);';\n\n  // Get initial competition time info\n  const compTimeInfo = getCompetitionTimeInfo();\n\n  liveCompCard.innerHTML = `\n    <div style=\"display: flex; justify-content: center; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-sm);\">\n      <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#09C285\" stroke-width=\"2\">\n        <path d=\"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\"></path>\n        <path d=\"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\"></path>\n        <path d=\"M4 22h16\"></path>\n        <path d=\"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\"></path>\n        <path d=\"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\"></path>\n        <path d=\"M18 2H6v7a6 6 0 0 0 12 0V2Z\"></path>\n      </svg>\n      <h3 style=\"margin: 0; font-size: 1.125rem; font-weight: 600;\">Daily Competition</h3>\n    </div>\n    \n    <div style=\"background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; padding: var(--spacing-md); backdrop-filter: blur(10px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\">\n      <div style=\"text-align: center; margin-bottom: var(--spacing-sm);\">\n        <div style=\"font-size: 0.75rem; color: var(--color-text-muted); margin-bottom: 2px;\">Reference: UTC 00:00 Opening Price</div>\n        <div style=\"font-size: 0.75rem; color: var(--color-text-muted);\">Competition ends at 23:59 UTC</div>\n      </div>\n      \n      <div style=\"display: flex; justify-content: space-between; margin-bottom: var(--spacing-sm);\">\n        <div>\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-xs); color: var(--color-text-secondary); font-size: 0.875rem; margin-bottom: 4px;\">\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M6 9H4.5a2.5 2.5 0 0 1 0-5H6\"></path>\n              <path d=\"M18 9h1.5a2.5 2.5 0 0 0 0-5H18\"></path>\n              <path d=\"M4 22h16\"></path>\n              <path d=\"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22\"></path>\n              <path d=\"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22\"></path>\n              <path d=\"M18 2H6v7a6 6 0 0 0 12 0V2Z\"></path>\n            </svg>\n            Prize Pool\n          </div>\n          <div style=\"font-size: 1.5rem; font-weight: 700; color: #09C285;\">$25,000</div>\n        </div>\n        <div style=\"text-align: right;\">\n          <div style=\"display: flex; align-items: center; justify-content: flex-end; gap: var(--spacing-xs); color: var(--color-text-secondary); font-size: 0.875rem; margin-bottom: 4px;\">\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"></path>\n              <circle cx=\"9\" cy=\"7\" r=\"4\"></circle>\n              <path d=\"M22 21v-2a4 4 0 0 0-3-3.87\"></path>\n              <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path>\n            </svg>\n            Players\n          </div>\n          <div style=\"font-size: 1.5rem; font-weight: 700;\">1,523</div>\n        </div>\n      </div>\n      \n      <div style=\"display: flex; align-items: center; justify-content: center; gap: var(--spacing-xs); color: var(--color-warning); font-size: 0.9rem; font-weight: 600; margin-bottom: var(--spacing-sm);\">\n        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n          <path d=\"M12 6v6l4 2\"></path>\n        </svg>\n        <span id=\"competition-timer\">${compTimeInfo.timeRemainingFormatted}</span> remaining\n      </div>\n      \n      <div style=\"display: flex; justify-content: center;\">\n        <button class=\"btn btn-primary\" id=\"join-competition-btn\">Join Competition</button>\n      </div>\n    </div>\n    \n    <div style=\"display: flex; justify-content: center; gap: var(--spacing-sm); margin-top: var(--spacing-sm);\">\n      <button class=\"carousel-btn\" id=\"comp-prev\" style=\"background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 6px; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; cursor: pointer;\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M15 18l-6-6 6-6\"></path>\n        </svg>\n      </button>\n      <button class=\"carousel-btn\" id=\"comp-next\" style=\"background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 6px; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; cursor: pointer;\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M9 18l6-6-6-6\"></path>\n        </svg>\n      </button>\n    </div>\n  `;\n\n  // Start timer update interval\n  const timerInterval = setInterval(() => {\n    const timerElement = liveCompCard.querySelector('#competition-timer');\n    if (timerElement) {\n      const timeInfo = getCompetitionTimeInfo();\n      timerElement.textContent = timeInfo.timeRemainingFormatted;\n    }\n  }, 1000);\n\n  // Join Competition button click handler - scroll to build section with categories\n  const joinBtn = liveCompCard.querySelector('#join-competition-btn');\n  if (joinBtn) {\n    joinBtn.onclick = (e) => {\n      e.preventDefault();\n      // Scroll to controls row (categories) so they're visible\n      const controlsRow = document.getElementById('dream-team-controls');\n      if (controlsRow) {\n        controlsRow.scrollIntoView({ behavior: 'smooth', block: 'start' });\n      }\n    };\n  }\n\n  // Recent Winners Card (spans 2 columns and 2 rows)\n  const winnersCard = document.createElement('div');\n  winnersCard.className = 'card';\n  winnersCard.style.cssText = 'position: relative; padding: var(--spacing-md);';\n  winnersCard.innerHTML = `\n    <div style=\"display: flex; justify-content: center; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-sm);\">\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#09C285\" stroke-width=\"2\">\n        <circle cx=\"12\" cy=\"8\" r=\"6\"></circle>\n        <path d=\"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11\"></path>\n      </svg>\n      <h3 style=\"margin: 0; font-size: 1.125rem; font-weight: 600;\">Recent Winners</h3>\n    </div>\n    \n    <div style=\"background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; padding: var(--spacing-sm); backdrop-filter: blur(10px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); max-height: 250px; overflow-y: auto;\">\n      <div style=\"display: flex; flex-direction: column; gap: var(--spacing-xs);\">\n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: white;\">1</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x7a9f...3b2c</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Weekend Warriors</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$25,000</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">2h ago</div>\n          </div>\n        </div>\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(135deg, #C0C0C0 0%, #A8A8A8 100%); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: white;\">2</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x4e1d...8f9a</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Crypto Sprint</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$10,000</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">5h ago</div>\n          </div>\n        </div>\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(135deg, #CD7F32 0%, #B87333 100%); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: white;\">3</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x9c2b...5d7e</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Daily Duel</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$5,000</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">8h ago</div>\n          </div>\n        </div>\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: var(--glass-border); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: var(--color-text-primary);\">4</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x3f8a...2c1d</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Bull Run</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$2,500</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">12h ago</div>\n          </div>\n        </div>\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: var(--glass-border); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: var(--color-text-primary);\">5</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x1b5e...7a4f</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Moon Shot</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$1,000</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">18h ago</div>\n          </div>\n        </div>\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: var(--glass-border); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: var(--color-text-primary);\">6</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x8d2c...4e7b</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Diamond Hands</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$750</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">20h ago</div>\n          </div>\n        </div>\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: var(--glass-border); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: var(--color-text-primary);\">7</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x2f9a...1c3d</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Altcoin Arena</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$500</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">21h ago</div>\n          </div>\n        </div>\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: var(--glass-border); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: var(--color-text-primary);\">8</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x5e7f...9a2b</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Token Titans</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$400</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">22h ago</div>\n          </div>\n        </div>\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: var(--glass-border); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: var(--color-text-primary);\">9</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x6a3b...8d4c</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Pump Masters</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$300</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">23h ago</div>\n          </div>\n        </div>\n        \n        <div style=\"display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-xs); background: rgba(255,255,255,0.05); border-radius: 6px;\">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <div style=\"width: 24px; height: 24px; border-radius: 50%; background: var(--glass-border); display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700; color: var(--color-text-primary);\">10</div>\n            <div>\n              <div style=\"font-size: 0.8rem; font-weight: 600;\">0x4c8d...2f5e</div>\n              <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">Whale Watch</div>\n            </div>\n          </div>\n          <div style=\"text-align: right;\">\n            <div style=\"font-size: 0.8rem; font-weight: 700; color: #09C285;\">$200</div>\n            <div style=\"font-size: 0.65rem; color: var(--color-text-muted);\">24h ago</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n\n  // User Teams Card (Right column)\n  const userTeamsCard = document.createElement('div');\n  userTeamsCard.className = 'card';\n  userTeamsCard.style.cssText = 'position: relative; padding: var(--spacing-md);';\n  userTeamsCard.innerHTML = `\n    <div style=\"display: flex; justify-content: center; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-sm);\">\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#09C285\" stroke-width=\"2\">\n        <path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\"></path>\n        <circle cx=\"9\" cy=\"7\" r=\"4\"></circle>\n        <path d=\"M22 21v-2a4 4 0 0 0-3-3.87\"></path>\n        <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path>\n      </svg>\n      <h3 style=\"margin: 0; font-size: 1.125rem; font-weight: 600;\">My Teams</h3>\n    </div>\n    \n    <div style=\"background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 12px; padding: var(--spacing-sm); backdrop-filter: blur(10px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); max-height: 280px; overflow-y: auto;\">\n      <div style=\"display: flex; flex-direction: column; gap: var(--spacing-sm);\">\n        <div style=\"padding: var(--spacing-sm); background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 3px solid #09C285;\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xs);\">\n            <div style=\"font-size: 0.85rem; font-weight: 600;\">Team Alpha</div>\n            <span class=\"badge badge-success\" style=\"font-size: 0.65rem; padding: 0.15rem 0.4rem;\">Active</span>\n          </div>\n          <div style=\"font-size: 0.7rem; color: var(--color-text-muted); margin-bottom: var(--spacing-xs);\">15 tokens  Weekend Warriors</div>\n          <div style=\"display: flex; gap: 4px; flex-wrap: wrap;\">\n            <div style=\"width: 20px; height: 20px; border-radius: 50%; background: linear-gradient(135deg, #627EEA 0%, #4E5ECD 100%); border: 2px solid var(--color-bg-primary);\"></div>\n            <div style=\"width: 20px; height: 20px; border-radius: 50%; background: linear-gradient(135deg, #F7931A 0%, #E07A0A 100%); border: 2px solid var(--color-bg-primary);\"></div>\n            <div style=\"width: 20px; height: 20px; border-radius: 50%; background: linear-gradient(135deg, #8247E5 0%, #6B3CC7 100%); border: 2px solid var(--color-bg-primary);\"></div>\n            <div style=\"width: 20px; height: 20px; border-radius: 50%; background: var(--glass-bg); border: 2px solid var(--color-bg-primary); display: flex; align-items: center; justify-content: center; font-size: 0.6rem; color: var(--color-text-muted);\">+12</div>\n          </div>\n        </div>\n        \n        <div style=\"padding: var(--spacing-sm); background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 3px solid var(--color-text-muted); opacity: 0.8;\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xs);\">\n            <div style=\"font-size: 0.85rem; font-weight: 600;\">Team Beta</div>\n            <span class=\"badge\" style=\"font-size: 0.65rem; padding: 0.15rem 0.4rem; background: var(--glass-bg);\">Ended</span>\n          </div>\n          <div style=\"font-size: 0.7rem; color: var(--color-text-muted); margin-bottom: var(--spacing-xs);\">15 tokens  Crypto Sprint</div>\n          <div style=\"font-size: 0.75rem; color: #09C285; font-weight: 600;\">Rank: #42  +$250</div>\n        </div>\n        \n        <div style=\"padding: var(--spacing-sm); background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 3px solid var(--color-text-muted); opacity: 0.8;\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xs);\">\n            <div style=\"font-size: 0.85rem; font-weight: 600;\">Team Gamma</div>\n            <span class=\"badge\" style=\"font-size: 0.65rem; padding: 0.15rem 0.4rem; background: var(--glass-bg);\">Ended</span>\n          </div>\n          <div style=\"font-size: 0.7rem; color: var(--color-text-muted); margin-bottom: var(--spacing-xs);\">15 tokens  Daily Duel</div>\n          <div style=\"font-size: 0.75rem; color: #09C285; font-weight: 600;\">Rank: #15  +$500</div>\n        </div>\n        \n        <div style=\"padding: var(--spacing-sm); background: rgba(255,255,255,0.05); border-radius: 8px; border-left: 3px solid var(--color-text-muted); opacity: 0.8;\">\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-xs);\">\n            <div style=\"font-size: 0.85rem; font-weight: 600;\">Team Delta</div>\n            <span class=\"badge\" style=\"font-size: 0.65rem; padding: 0.15rem 0.4rem; background: var(--glass-bg);\">Ended</span>\n          </div>\n          <div style=\"font-size: 0.7rem; color: var(--color-text-muted); margin-bottom: var(--spacing-xs);\">15 tokens  Moon Shot</div>\n          <div style=\"font-size: 0.75rem; color: #09C285; font-weight: 600;\">Rank: #8  +$1,200</div>\n        </div>\n      </div>\n    </div>\n  `;\n\n  infoCardsSection.appendChild(liveCompCard);\n  infoCardsSection.appendChild(winnersCard);\n  infoCardsSection.appendChild(userTeamsCard);\n  container.appendChild(infoCardsSection);\n\n  // Centered Header with title and tagline\n  const header = document.createElement('div');\n  header.style.cssText = `\n    text-align: center;\n    margin-bottom: var(--spacing-md);\n  `;\n  header.innerHTML = `\n    <div style=\"display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-xs);\">\n      <svg width=\"36\" height=\"36\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <defs>\n          <linearGradient id=\"team-grad-page\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n            <stop offset=\"0%\" style=\"stop-color:#09C285\"/>\n            <stop offset=\"100%\" style=\"stop-color:#07a371\"/>\n          </linearGradient>\n        </defs>\n        <circle cx=\"32\" cy=\"22\" r=\"6\" fill=\"url(#team-grad-page)\"/>\n        <path d=\"M20 48C20 38 25 34 32 34C39 34 44 38 44 48\" fill=\"url(#team-grad-page)\"/>\n        <circle cx=\"16\" cy=\"26\" r=\"5\" fill=\"url(#team-grad-page)\" opacity=\"0.8\"/>\n        <path d=\"M8 48C8 40 11 36 16 36C21 36 24 40 24 48\" fill=\"url(#team-grad-page)\" opacity=\"0.8\"/>\n        <circle cx=\"48\" cy=\"26\" r=\"5\" fill=\"url(#team-grad-page)\" opacity=\"0.8\"/>\n        <path d=\"M40 48C40 40 43 36 48 36C53 36 56 40 56 48\" fill=\"url(#team-grad-page)\" opacity=\"0.8\"/>\n      </svg>\n      <h1 style=\"font-size: 2rem; margin: 0;\">Dream Team</h1>\n    </div>\n    <p style=\"color: var(--color-text-secondary); font-size: 1rem; margin: 0;\">Build your ultimate crypto portfolio of 15 tokens</p>\n  `;\n  container.appendChild(header);\n\n  // Controls row - Categories on left, Search and selection on right\n  const controlsRow = document.createElement('div');\n  controlsRow.id = 'dream-team-controls';\n  controlsRow.style.cssText = `\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: var(--spacing-lg);\n    gap: var(--spacing-md);\n    flex-wrap: wrap;\n    scroll-margin-top: 80px;\n  `;\n\n  // Left section - Category filters\n  const categoryFilters = document.createElement('div');\n  categoryFilters.style.cssText = `\n    display: flex;\n    gap: 6px;\n    flex-wrap: wrap;\n  `;\n  categoryFilters.innerHTML = `\n    <button class=\"category-btn active\" data-category=\"all\" style=\"padding: 0.375rem 0.875rem; border-radius: 12px; border: 1px solid var(--color-border); background: var(--color-primary); color: white; cursor: pointer; font-weight: 600; font-size: 0.85rem; transition: all 0.2s;\">All</button>\n    <button class=\"category-btn\" data-category=\"defi\" style=\"padding: 0.375rem 0.875rem; border-radius: 12px; border: 1px solid var(--color-border); background: var(--color-bg-secondary); color: var(--color-text-primary); cursor: pointer; font-weight: 600; font-size: 0.85rem; transition: all 0.2s;\">DeFi</button>\n    <button class=\"category-btn\" data-category=\"layer2\" style=\"padding: 0.375rem 0.875rem; border-radius: 12px; border: 1px solid var(--color-border); background: var(--color-bg-secondary); color: var(--color-text-primary); cursor: pointer; font-weight: 600; font-size: 0.85rem; transition: all 0.2s;\">Layer 2</button>\n    <button class=\"category-btn\" data-category=\"gaming\" style=\"padding: 0.375rem 0.875rem; border-radius: 12px; border: 1px solid var(--color-border); background: var(--color-bg-secondary); color: var(--color-text-primary); cursor: pointer; font-weight: 600; font-size: 0.85rem; transition: all 0.2s;\">Gaming</button>\n    <button class=\"category-btn\" data-category=\"meme\" style=\"padding: 0.375rem 0.875rem; border-radius: 12px; border: 1px solid var(--color-border); background: var(--color-bg-secondary); color: var(--color-text-primary); cursor: pointer; font-weight: 600; font-size: 0.85rem; transition: all 0.2s;\">Meme</button>\n  `;\n\n  // Right section - Search and selection status\n  const rightSection = document.createElement('div');\n  rightSection.style.cssText = `\n    display: flex;\n    align-items: center;\n    gap: var(--spacing-sm);\n    flex-shrink: 0;\n  `;\n\n  // Search bar\n  const searchBar = document.createElement('div');\n  searchBar.style.cssText = `transition: all 0.3s ease;`;\n  searchBar.innerHTML = `\n    <input type=\"text\" class=\"input\" placeholder=\"Search tokens...\" id=\"search-input\" style=\"width: 180px; border-radius: 12px; padding: 0.5rem 1rem; font-size: 0.85rem; border: 1px solid var(--color-border); background: var(--color-bg-secondary);\" />\n  `;\n\n  // Selection badge (initially hidden)\n  const selectionBadge = document.createElement('div');\n  selectionBadge.id = 'selected-badge';\n  selectionBadge.className = 'badge badge-primary';\n  selectionBadge.style.cssText = `\n    font-size: 0.85rem;\n    padding: 0.5rem 1rem;\n    border-radius: 12px;\n    font-weight: 600;\n    opacity: 0;\n    transform: translateX(20px);\n    transition: all 0.3s ease;\n    display: none;\n    white-space: nowrap;\n  `;\n  selectionBadge.innerHTML = `<span id=\"selected-count\">0</span>/15`;\n\n  rightSection.appendChild(searchBar);\n  rightSection.appendChild(selectionBadge);\n\n  controlsRow.appendChild(categoryFilters);\n  controlsRow.appendChild(rightSection);\n  container.appendChild(controlsRow);\n\n  // Scrollable token grid section\n  const tokenGridWrapper = document.createElement('div');\n  tokenGridWrapper.id = 'token-grid-wrapper';\n\n  const tokenGrid = document.createElement('div');\n  tokenGrid.id = 'token-grid';\n  tokenGrid.className = 'grid grid-auto';\n\n  tokenGridWrapper.appendChild(tokenGrid);\n  container.appendChild(tokenGridWrapper);\n\n  // Bottom Action Bar (shown only when 15 tokens selected)\n  const actionBar = document.createElement('div');\n  actionBar.id = 'action-bar';\n  actionBar.style.cssText = `\n    position: fixed;\n    bottom: 24px;\n    left: 0;\n    right: 0;\n    background: transparent;\n    padding: 0;\n    display: none;\n    justify-content: center;\n    align-items: center;\n    z-index: 100;\n    pointer-events: none;\n  `;\n  actionBar.innerHTML = `\n    <div style=\"\n      background: linear-gradient(135deg, rgba(255, 255, 255, 0.25) 0%, rgba(255, 255, 255, 0.15) 100%);\n      backdrop-filter: blur(24px);\n      -webkit-backdrop-filter: blur(24px);\n      border-radius: 18px;\n      padding: 6px;\n      box-shadow: \n        0 8px 32px rgba(0, 0, 0, 0.12), \n        inset 0 2px 4px rgba(255, 255, 255, 0.4),\n        inset 0 -2px 4px rgba(0, 0, 0, 0.05);\n      border: 1px solid rgba(255, 255, 255, 0.35);\n      pointer-events: auto;\n    \">\n      <button class=\"btn btn-primary\" id=\"bottom-submit-btn\" style=\"\n        padding: 0.875rem 2.5rem; \n        font-size: 1.1rem; \n        background: var(--color-primary);\n        border: none;\n        border-radius: 14px;\n        color: white;\n        font-weight: 600;\n        box-shadow: 0 4px 12px rgba(9, 194, 133, 0.35);\n      \">\n        Proceed to Submit\n      </button>\n    </div>\n  `;\n  page.appendChild(actionBar);\n\n  page.appendChild(container);\n\n  // Load tokens\n  loadTokens(tokenGrid);\n\n  // Setup category filters\n  const categoryButtons = categoryFilters.querySelectorAll('.category-btn');\n  categoryButtons.forEach(btn => {\n    btn.addEventListener('click', () => {\n      // Update active state\n      categoryButtons.forEach(b => {\n        b.style.background = 'var(--color-bg-secondary)';\n        b.style.color = 'var(--color-text-primary)';\n        b.classList.remove('active');\n      });\n      btn.style.background = 'var(--color-primary)';\n      btn.style.color = 'white';\n      btn.classList.add('active');\n\n      // Filter tokens by category\n      const category = btn.dataset.category;\n      filterByCategory(category, tokenGrid);\n    });\n  });\n\n  // Setup search\n  const searchInput = searchBar.querySelector('#search-input');\n  let searchTimeout;\n  searchInput.addEventListener('input', (e) => {\n    clearTimeout(searchTimeout);\n    searchTimeout = setTimeout(() => {\n      if (e.target.value.trim()) {\n        performSearch(e.target.value, tokenGrid);\n      } else {\n        loadTokens(tokenGrid);\n      }\n    }, 300);\n  });\n\n  return page;\n}\n\n\n// Initialize from global state (preserves team when navigating away and back)\nlet selectedTeam = getSelectedTeam();\n\n// Sync local team to global state whenever it changes\nfunction syncToGlobalState() {\n  setSelectedTeam(selectedTeam);\n}\nasync function loadTokens(gridContainer) {\n  gridContainer.innerHTML = '<div class=\"loading\" style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl);\"></div>';\n\n  try {\n    // Fetch all allowlisted tokens (max 250)\n    const tokens = await fetchTopTokens(250);\n    renderTokens(tokens, gridContainer);\n\n    // Refresh local team from global state (in case we navigated back)\n    selectedTeam = getSelectedTeam();\n\n    // Update UI to reflect current selection state (shows action bar if 15 selected)\n    updateUI();\n\n    // Check if we should auto-open modal (redirected from widget)\n    if (getShouldOpenModal() && selectedTeam.length === 15) {\n      setTimeout(() => openCaptainModal(), 500);\n    }\n  } catch (error) {\n    gridContainer.innerHTML = `\n      <div style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl); color: var(--color-danger);\">\n        Failed to load tokens. Please try again later.\n      </div>\n    `;\n  }\n}\n\nasync function performSearch(query, gridContainer) {\n  gridContainer.innerHTML = '<div class=\"loading\" style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl);\"></div>';\n\n  try {\n    const tokens = await searchTokens(query);\n    if (tokens.length === 0) {\n      gridContainer.innerHTML = `\n        <div style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl);\">\n          <div style=\"font-size: 1.25rem; font-weight: 700; color: var(--color-danger); margin-bottom: var(--spacing-sm);\">\n            YOU CANNOT CHOOSE THIS TOKEN IN THE DREAM TEAM\n          </div>\n          <div style=\"font-size: 0.875rem; color: var(--color-text-secondary);\">\n            Try searching for a different cryptocurrency from our available list.\n          </div>\n        </div>\n      `;\n    } else {\n      renderTokens(tokens, gridContainer);\n    }\n  } catch (error) {\n    gridContainer.innerHTML = `\n      <div style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl); color: var(--color-danger);\">\n        Search failed. Please try again.\n      </div>\n    `;\n  }\n}\n\nasync function filterByCategory(category, gridContainer) {\n  if (category === 'all') {\n    loadTokens(gridContainer);\n    return;\n  }\n\n  gridContainer.innerHTML = '<div class=\"loading\" style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl);\"></div>';\n\n  try {\n    const allTokens = await fetchTopTokens(250);\n\n    // Define category mappings\n    const categories = {\n      defi: ['AAVE', 'UNI', 'CAKE', 'MORPHO', 'PENDLE', 'COMP', 'SNX', 'DYDX', 'RUNE', 'SUSHI', 'CRV'],\n      layer2: ['ARB', 'OP', 'STRK', 'ZK', 'ZRO', 'LINEA', 'MERL', 'ZORA', 'MANTA'],\n      gaming: ['AXS', 'GALA', 'SAND', 'IMX', 'MANA', 'WEMIX', 'RON', 'BEAM', 'PRIME'],\n      meme: ['DOGE', 'SHIB', 'PEPE', 'BONK', 'FLOKI', 'WIF', 'FARTCOIN', 'CHEEMS', 'BABYDOGE']\n    };\n\n    const categoryTokens = categories[category] || [];\n    const filteredTokens = allTokens.filter(token =>\n      categoryTokens.includes(token.symbol.toUpperCase())\n    );\n\n    if (filteredTokens.length === 0) {\n      gridContainer.innerHTML = `\n        <div style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl); color: var(--color-text-secondary);\">\n          No tokens found in this category\n        </div>\n      `;\n    } else {\n      renderTokens(filteredTokens, gridContainer);\n    }\n  } catch (error) {\n    gridContainer.innerHTML = `\n      <div style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl); color: var(--color-danger);\">\n        Failed to load tokens. Please try again.\n      </div>\n    `;\n  }\n}\n\nfunction renderTokens(tokens, gridContainer) {\n  gridContainer.innerHTML = '';\n\n  tokens.forEach(token => {\n    const card = createTokenCard(token);\n    gridContainer.appendChild(card);\n  });\n}\n\nfunction createTokenCard(token) {\n  const card = document.createElement('div');\n  card.className = 'card token-card';\n  card.dataset.tokenId = token.id;\n  card.style.cssText = `\n    cursor: pointer;\n    transition: all var(--transition-base);\n    animation: fadeIn 0.6s ease-out;\n  `;\n\n  const changeClass = getPriceChangeClass(token.priceChange24h);\n  const index = selectedTeam.findIndex(t => t.id === token.id);\n  const isSelected = index > -1;\n  const direction = isSelected ? selectedTeam[index].direction : null;\n\n  if (isSelected) {\n    if (direction === 'UP') card.classList.add('selected-up');\n    else if (direction === 'DOWN') card.classList.add('selected-down');\n    else card.classList.add('selected');\n  }\n\n  // Hide coin name if longer than 8 characters\n  const showName = token.name.length <= 8;\n\n  //  FIXED WIDTH FOR PRICE COLUMN: 90px ensures consistent right alignment\n  card.innerHTML = `\n    <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n      <img src=\"${token.image}\" alt=\"${token.name}\" class=\"lifted-element\" style=\"width: 36px; height: 36px; border-radius: 50%; flex-shrink: 0;\" />\n      <div style=\"width: 55px; flex-shrink: 0;\">\n        <div class=\"lifted-element\" style=\"font-weight: 700; font-size: 1rem; ${showName ? 'margin-bottom: 2px;' : ''}\">${token.symbol.toUpperCase()}</div>\n        ${showName ? `<div style=\"font-size: 0.75rem; color: var(--color-text-muted);\">${token.name}</div>` : ''}\n      </div>\n      <!--  FIXED-WIDTH RIGHT COLUMN -->\n      <div style=\"width: 90px; text-align: right; flex-shrink: 0;\">\n        <div class=\"token-current-price\" style=\"font-size: 0.95rem; font-weight: 700; margin-bottom: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\n          ${formatCurrency(token.currentPrice)}\n        </div>\n        <div class=\"token-price-change ${changeClass}\" style=\"font-size: 0.8rem; white-space: nowrap;\">\n          ${formatPercentage(token.priceChange24h)}\n        </div>\n      </div>\n\n    </div>\n    <!-- Split Selection Overlay -->\n    <div class=\"selection-overlay\">\n      <div class=\"selection-overlay-left\" onclick=\"event.stopPropagation();\"></div>\n      <div class=\"selection-overlay-right\" onclick=\"event.stopPropagation();\"></div>\n    </div>\n  `;\n\n  // Attach proper event listeners (not inline onclick)\n  const leftOverlay = card.querySelector('.selection-overlay-left');\n  const rightOverlay = card.querySelector('.selection-overlay-right');\n\n  if (leftOverlay) {\n    leftOverlay.addEventListener('click', (e) => {\n      e.stopPropagation();\n      toggleTokenSelection(token, card, 'DOWN');\n    });\n  }\n  if (rightOverlay) {\n    rightOverlay.addEventListener('click', (e) => {\n      e.stopPropagation();\n      toggleTokenSelection(token, card, 'UP');\n    });\n  }\n\n  card.addEventListener('click', (e) => {\n    if (isSelected && !e.target.closest('.selection-overlay')) {\n      toggleTokenSelection(token, card, null);\n    }\n  });\n\n  return card;\n}\n\n// Confetti animation\nfunction createConfetti() {\n  const colors = ['#09C285', '#4a90e2', '#FFD700', '#FF6B6B', '#4ECDC4', '#95E1D3'];\n  const confettiCount = 50;\n\n  for (let i = 0; i < confettiCount; i++) {\n    const confetti = document.createElement('div');\n    confetti.style.cssText = `\n      position: fixed;\n      width: 10px;\n      height: 10px;\n      background: ${colors[Math.floor(Math.random() * colors.length)]};\n      left: ${Math.random() * 100}vw;\n      top: -10px;\n      opacity: 1;\n      border-radius: ${Math.random() > 0.5 ? '50%' : '0'};\n      z-index: 9999;\n      pointer-events: none;\n      animation: confetti-fall ${2 + Math.random() * 2}s linear forwards;\n    `;\n\n    document.body.appendChild(confetti);\n\n    // Remove after animation\n    setTimeout(() => {\n      confetti.remove();\n    }, 4000);\n  }\n}\n\n// Add confetti animation CSS\nconst confettiStyle = document.createElement('style');\nconfettiStyle.textContent = `\n  @keyframes confetti-fall {\n    0% {\n      transform: translateY(0) rotate(0deg);\n      opacity: 1;\n    }\n    100% {\n      transform: translateY(100vh) rotate(${360 + Math.random() * 360}deg);\n      opacity: 0;\n    }\n  }\n`;\ndocument.head.appendChild(confettiStyle);\n\nfunction toggleTokenSelection(token, card, direction) {\n  const index = selectedTeam.findIndex(t => t.id === token.id);\n\n  if (index > -1) {\n    // If already specific direction and clicked that direction, unselect?\n    // Or if clicked different direction, switch direction?\n    // If direction is null (clicked card body), remove\n\n    if (direction === null) {\n      selectedTeam.splice(index, 1);\n      card.classList.remove('selected', 'selected-up', 'selected-down');\n    } else if (selectedTeam[index].direction === direction) {\n      // Toggle off if same direction clicked\n      selectedTeam.splice(index, 1);\n      card.classList.remove('selected', 'selected-up', 'selected-down');\n    } else {\n      // Switch direction\n      selectedTeam[index].direction = direction;\n      card.classList.remove('selected-up', 'selected-down');\n      card.classList.add(direction === 'UP' ? 'selected-up' : 'selected-down');\n      // Update badge\n      const badge = card.querySelector('.badge');\n      if (badge) {\n        badge.className = `badge ${direction === 'UP' ? 'badge-success' : 'badge-danger'}`;\n        badge.textContent = direction === 'UP' ? 'UP' : 'Down';\n      }\n    }\n  } else {\n    // Add to selection\n    if (selectedTeam.length >= 15) {\n      alert('You can only select up to 15 tokens!');\n      return;\n    }\n\n    // Default direction if none provided (shouldn't happen with overlay, but safety)\n    const newDirection = direction || 'UP';\n\n    selectedTeam.push({ ...token, direction: newDirection });\n    card.classList.add(newDirection === 'UP' ? 'selected-up' : 'selected-down');\n  }\n\n  updateUI();\n}\n\nfunction updateUI() {\n  // Toggle scroll mode based on selection\n  const pageEl = document.getElementById('dream-team-page');\n  const containerEl = document.getElementById('dream-team-container');\n  const tokenGridWrapper = document.getElementById('token-grid-wrapper');\n  const tokenGrid = document.getElementById('token-grid');\n  const infoCards = document.querySelector('.dream-team-page .container > div:first-child');\n\n  // Get header elements for layout transformation\n  const headerEl = containerEl?.querySelector('div[style*=\"text-align: center\"]');\n  const controlsRow = headerEl?.nextElementSibling;\n\n  if (selectedTeam.length > 0 && pageEl && containerEl && tokenGridWrapper) {\n    // Fixed header mode - hide info cards, only token grid scrolls\n    pageEl.style.cssText = `\n      display: flex;\n      flex-direction: column;\n      height: calc(100vh - 64px);\n      overflow: hidden;\n    `;\n    containerEl.style.cssText = `\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      padding: var(--spacing-sm) var(--spacing-md) 0;\n      transition: all 0.3s ease;\n    `;\n    tokenGridWrapper.style.cssText = `\n      flex: 1;\n      overflow-y: auto;\n      padding: var(--spacing-lg) var(--spacing-sm) var(--spacing-lg) 0;\n    `;\n\n    // Transform header to compact single-line layout\n    if (headerEl) {\n      headerEl.style.cssText = `\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin-bottom: 0;\n        gap: var(--spacing-md);\n      `;\n      // Hide tagline, show compact title\n      const titleDiv = headerEl.querySelector('div[style*=\"justify-content: center\"]');\n      const tagline = headerEl.querySelector('p');\n      if (titleDiv) {\n        titleDiv.style.justifyContent = 'flex-start';\n        titleDiv.style.marginBottom = '0';\n        const h1 = titleDiv.querySelector('h1');\n        if (h1) h1.style.fontSize = '1.5rem';\n        const svg = titleDiv.querySelector('svg');\n        if (svg) {\n          svg.setAttribute('width', '28');\n          svg.setAttribute('height', '28');\n        }\n      }\n      if (tagline) tagline.style.display = 'none';\n\n      // Move controls into header\n      if (controlsRow) {\n        controlsRow.style.display = 'none';\n        // Move category filters and right section into header\n        const categories = controlsRow.querySelector('div:first-child');\n        const rightSection = controlsRow.querySelector('div:last-child');\n        if (categories && !headerEl.querySelector('.category-btn')) {\n          const categoriesClone = categories.cloneNode(true);\n          categoriesClone.id = 'compact-categories';\n          headerEl.appendChild(categoriesClone);\n          // Re-attach event listeners to cloned buttons\n          categoriesClone.querySelectorAll('.category-btn').forEach(btn => {\n            btn.addEventListener('click', () => {\n              categoriesClone.querySelectorAll('.category-btn').forEach(b => {\n                b.style.background = 'var(--color-bg-secondary)';\n                b.style.color = 'var(--color-text-primary)';\n              });\n              btn.style.background = 'var(--color-primary)';\n              btn.style.color = 'white';\n              const category = btn.dataset.category;\n              const tokenGridEl = document.getElementById('token-grid');\n              if (tokenGridEl) filterByCategory(category, tokenGridEl);\n            });\n          });\n        }\n        if (rightSection && !headerEl.querySelector('#search-input')) {\n          const rightClone = rightSection.cloneNode(true);\n          rightClone.id = 'compact-right';\n          headerEl.appendChild(rightClone);\n          // Re-attach search listener\n          const searchInput = rightClone.querySelector('#search-input');\n          if (searchInput) {\n            searchInput.id = 'search-input'; // Keep same ID\n            let searchTimeout;\n            searchInput.addEventListener('input', (e) => {\n              clearTimeout(searchTimeout);\n              searchTimeout = setTimeout(() => {\n                const tokenGridEl = document.getElementById('token-grid');\n                if (e.target.value.trim() && tokenGridEl) {\n                  performSearch(e.target.value, tokenGridEl);\n                } else if (tokenGridEl) {\n                  loadTokens(tokenGridEl);\n                }\n              }, 300);\n            });\n          }\n        }\n      }\n    }\n\n    // Add custom scrollbar styling\n    const scrollbarStyle = document.createElement('style');\n    scrollbarStyle.id = 'token-grid-scrollbar';\n    if (!document.getElementById('token-grid-scrollbar')) {\n      scrollbarStyle.textContent = `\n        #token-grid-wrapper::-webkit-scrollbar {\n          width: 8px;\n        }\n        #token-grid-wrapper::-webkit-scrollbar-track {\n          background: transparent;\n          margin: var(--spacing-md) 0;\n        }\n        #token-grid-wrapper::-webkit-scrollbar-thumb {\n          background: rgba(255, 255, 255, 0.1);\n          border-radius: 4px;\n        }\n        #token-grid-wrapper::-webkit-scrollbar-thumb:hover {\n          background: rgba(255, 255, 255, 0.2);\n        }\n      `;\n      document.head.appendChild(scrollbarStyle);\n    }\n    // Hide info cards\n    if (infoCards) {\n      infoCards.style.display = 'none';\n    }\n    // Change grid to 5 columns with reduced gap\n    if (tokenGrid) {\n      tokenGrid.style.gridTemplateColumns = 'repeat(5, 1fr)';\n      tokenGrid.style.gap = 'var(--spacing-sm)';\n    }\n  } else if (pageEl && containerEl && tokenGridWrapper) {\n    // Normal scroll mode - show info cards\n    pageEl.style.cssText = '';\n    containerEl.style.cssText = `\n      padding: var(--spacing-sm) var(--spacing-lg) var(--spacing-xl);\n      transition: all 0.3s ease;\n    `;\n    tokenGridWrapper.style.cssText = 'display: block;';\n\n    // Revert header to centered layout\n    if (headerEl) {\n      headerEl.style.cssText = `\n        text-align: center;\n        margin-bottom: var(--spacing-md);\n      `;\n      const titleDiv = headerEl.querySelector('div[style*=\"flex-start\"], div[style*=\"justify-content\"]');\n      const tagline = headerEl.querySelector('p');\n      if (titleDiv) {\n        titleDiv.style.justifyContent = 'center';\n        titleDiv.style.marginBottom = 'var(--spacing-xs)';\n        const h1 = titleDiv.querySelector('h1');\n        if (h1) h1.style.fontSize = '2rem';\n        const svg = titleDiv.querySelector('svg');\n        if (svg) {\n          svg.setAttribute('width', '36');\n          svg.setAttribute('height', '36');\n        }\n      }\n      if (tagline) tagline.style.display = 'block';\n\n      // Remove compact elements and show original controls\n      const compactCategories = headerEl.querySelector('#compact-categories');\n      const compactRight = headerEl.querySelector('#compact-right');\n      if (compactCategories) compactCategories.remove();\n      if (compactRight) compactRight.remove();\n    }\n    if (controlsRow) {\n      controlsRow.style.display = 'flex';\n    }\n\n    // Show info cards with grid layout\n    if (infoCards) {\n      infoCards.style.display = 'grid';\n    }\n    // Revert grid to responsive auto-fill\n    if (tokenGrid) {\n      tokenGrid.style.gridTemplateColumns = '';\n      tokenGrid.style.gap = '';\n    }\n  }\n\n  // Update count\n  const countEl = document.getElementById('selected-count');\n  if (countEl) {\n    countEl.textContent = selectedTeam.length;\n  }\n\n  // Show/hide badge based on selection with slide-in animation\n  const badge = document.getElementById('selected-badge');\n  const searchInput = document.getElementById('search-input');\n\n  // Check for Unselect All button\n  let unselectAllBtn = document.getElementById('unselect-all-btn');\n  if (!unselectAllBtn) {\n    unselectAllBtn = document.createElement('button');\n    unselectAllBtn.id = 'unselect-all-btn';\n    unselectAllBtn.innerHTML = `\n      <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n      </svg>\n      Clear\n    `;\n    unselectAllBtn.style.cssText = `\n      display: none;\n      align-items: center;\n      gap: 4px;\n      padding: 0.5rem 0.75rem;\n      border-radius: 12px;\n      border: none;\n      background: rgba(255, 77, 79, 0.15);\n      color: var(--color-danger);\n      font-size: 0.8rem;\n      font-weight: 600;\n      line-height: 1.5;\n      height: 36px;\n      box-sizing: border-box;\n      cursor: pointer;\n      transition: all 0.2s ease;\n    `;\n    unselectAllBtn.onmouseover = () => {\n      unselectAllBtn.style.background = 'rgba(255, 77, 79, 0.2)';\n    };\n    unselectAllBtn.onmouseout = () => {\n      unselectAllBtn.style.background = 'rgba(255, 77, 79, 0.15)';\n    };\n\n    // Insert before badge if possible\n    const badgeParent = document.getElementById('selected-badge');\n    if (badgeParent && badgeParent.parentNode) {\n      badgeParent.parentNode.insertBefore(unselectAllBtn, badgeParent);\n    }\n  }\n\n  // Always re-attach onclick to ensure it works after layout changes\n  unselectAllBtn.onclick = () => {\n    // Clear the selected team\n    selectedTeam = [];\n    syncToGlobalState();\n\n    // Reset all card styles\n    document.querySelectorAll('.token-card').forEach(card => {\n      card.classList.remove('selected', 'selected-up', 'selected-down');\n      // Remove any direction badges\n      const badge = card.querySelector('.badge');\n      if (badge) badge.remove();\n    });\n\n    // Reload tokens to refresh the grid\n    const tokenGrid = document.getElementById('token-grid');\n    if (tokenGrid) {\n      loadTokens(tokenGrid);\n    }\n\n    // Update UI to revert layout\n    updateUI();\n  };\n\n  if (badge) {\n    if (selectedTeam.length > 0) {\n      badge.style.display = 'block';\n      if (unselectAllBtn) unselectAllBtn.style.display = 'flex';\n\n      // Trigger animation after display change\n      setTimeout(() => {\n        badge.style.opacity = '1';\n        badge.style.transform = 'translateX(0)';\n      }, 10);\n\n      badge.style.fontSize = '0.8rem';\n      badge.style.padding = '0.5rem 1rem';\n      badge.style.borderRadius = '12px';\n      badge.style.fontWeight = '600';\n      badge.style.lineHeight = '1.5';\n      badge.style.height = '36px';\n      badge.style.boxSizing = 'border-box';\n      badge.style.display = 'inline-flex';\n      badge.style.alignItems = 'center';\n\n      // Update search placeholder and width\n      if (searchInput) {\n        searchInput.placeholder = 'Search tokens...';\n        searchInput.style.width = '180px';\n      }\n\n      if (selectedTeam.length === 15) {\n        badge.className = 'badge badge-success';\n        badge.style.background = 'var(--color-primary)';\n        badge.style.color = 'white';\n        badge.style.border = 'none';\n      } else {\n        badge.className = 'badge badge-primary';\n        badge.style.background = '';\n        badge.style.color = '';\n        badge.style.border = '';\n      }\n    } else {\n      badge.style.opacity = '0';\n      badge.style.transform = 'translateX(20px)';\n      if (unselectAllBtn) unselectAllBtn.style.display = 'none';\n\n      // Reset search placeholder and width\n      if (searchInput) {\n        searchInput.placeholder = 'Search...';\n        searchInput.style.width = '160px';\n      }\n\n      // Hide after animation completes\n      setTimeout(() => {\n        badge.style.display = 'none';\n      }, 300);\n    }\n  }\n\n  // Show/hide bottom action bar (only when 15 tokens selected)\n  const actionBar = document.getElementById('action-bar');\n  if (actionBar) {\n    if (selectedTeam.length === 15) {\n      actionBar.style.display = 'flex';\n      // Trigger confetti animation\n      if (!actionBar.dataset.confettiShown) {\n        createConfetti();\n        actionBar.dataset.confettiShown = 'true';\n      }\n    } else {\n      actionBar.style.display = 'none';\n      actionBar.dataset.confettiShown = '';\n    }\n  }\n\n  // Update bottom submit button\n  const bottomSubmitBtn = document.getElementById('bottom-submit-btn');\n  if (bottomSubmitBtn) {\n    bottomSubmitBtn.style.cssText = 'padding: 0.895rem 2.5rem; font-size: 1.125rem; background: var(--color-primary); color: white; border: none;';\n    bottomSubmitBtn.onclick = () => openCaptainModal();\n  }\n\n  // Sync to global state (for pending action widget)\n  syncToGlobalState();\n}\n\nfunction openCaptainModal() {\n  const overlay = document.createElement('div');\n  overlay.className = 'modal-overlay';\n  overlay.style.animation = 'fadeIn 0.2s ease-out';\n  overlay.style.backdropFilter = 'blur(4px)';\n  overlay.style.webkitBackdropFilter = 'blur(4px)';\n\n  const modal = document.createElement('div');\n  modal.className = 'modal';\n  modal.style.maxWidth = '600px';\n  modal.style.boxShadow = '0 20px 60px rgba(0, 0, 0, 0.3)';\n\n  function renderModalContent() {\n    modal.innerHTML = `\n        <button class=\"modal-close\"></button>\n        <h2 class=\"modal-title\" style=\"color: #000;\">Select Team Leaders</h2>\n        \n        <div class=\"modal-body\" style=\"display: flex; flex-direction: column; gap: var(--spacing-md); height: 100%;\">\n          \n          <!-- Leadership Section (Top) -->\n          <div style=\"display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md); padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--glass-border);\">\n            \n            <!-- Captain Slot -->\n            <div style=\"display: flex; flex-direction: column; gap: var(--spacing-xs);\">\n                <div style=\"font-size: 0.8rem; font-weight: 700; color: #000; text-transform: uppercase;\">\n                    Captain (2x)\n                </div>\n                <div id=\"captain-slot\"></div>\n            </div>\n\n            <!-- Vice Captain Slot -->\n            <div style=\"display: flex; flex-direction: column; gap: var(--spacing-xs);\">\n                <div style=\"font-size: 0.8rem; font-weight: 700; color: #000; text-transform: uppercase;\">\n                    Vice Captain (1.5x)\n                </div>\n                <div id=\"vice-slot\"></div>\n            </div>\n            \n          </div>\n\n          <!-- Roster Section (Bottom) -->\n          <div style=\"flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: var(--spacing-xs);\">\n             <div style=\"font-size: 0.8rem; color: var(--color-text-secondary); sticky: top;\">\n                  Team Roster (${selectedTeam.length - (captainIndex !== -1 ? 1 : 0) - (viceIndex !== -1 ? 1 : 0)} Remaining)\n             </div>\n             <div id=\"roster-grid\" style=\"display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-xs);\"></div>\n          </div>\n          \n        </div>\n      `;\n\n    // 1. Render Captain\n    const captainSlot = modal.querySelector('#captain-slot');\n    if (captainIndex !== -1) {\n      const captainToken = selectedTeam[captainIndex];\n      const capCard = createModalTokenCard(captainToken, captainIndex, 'CAPTAIN');\n      captainSlot.appendChild(capCard);\n    } else {\n      // Empty Captain Slot\n      captainSlot.innerHTML = `\n            <div style=\"\n                border: 1px dashed var(--color-primary); \n                border-radius: var(--radius-lg); \n                height: 60px; \n                display: flex; \n                align-items: center; \n                justify-content: center; \n                font-size: 0.8rem; \n                color: var(--color-primary);\n                background: rgba(var(--color-primary-rgb), 0.05);\n                font-weight: 600;\n            \">\n                Select Captain\n            </div>\n          `;\n    }\n\n    // 2. Render Vice Captain\n    const viceSlot = modal.querySelector('#vice-slot');\n    if (viceIndex !== -1) {\n      const viceToken = selectedTeam[viceIndex];\n      const viceCard = createModalTokenCard(viceToken, viceIndex, 'VICE');\n      viceSlot.appendChild(viceCard);\n    } else {\n      // Empty Vice Slot\n      viceSlot.innerHTML = `\n            <div style=\"\n                border: 1px dashed #FFD700; \n                border-radius: var(--radius-lg); \n                height: 60px; \n                display: flex; \n                align-items: center; \n                justify-content: center; \n                font-size: 0.8rem; \n                color: #B8860B; /* Darker Gold for text visibility */\n                background: rgba(255, 215, 0, 0.05);\n                font-weight: 600;\n            \">\n                Select Vice\n            </div>\n          `;\n    }\n\n    // 3. Render Roster (Everyone else)\n    const rosterGrid = modal.querySelector('#roster-grid');\n    const rosterTokens = selectedTeam.filter((_, index) => index !== captainIndex && index !== viceIndex);\n\n    rosterTokens.forEach((token, rosterIndex) => {\n      const originalIndex = selectedTeam.indexOf(token);\n      const card = createModalTokenCard(token, originalIndex, 'ROSTER');\n\n      // If odd number of roster items and this is the last one, center it\n      if (rosterTokens.length % 2 === 1 && rosterIndex === rosterTokens.length - 1) {\n        card.style.gridColumn = 'span 2';\n        card.style.maxWidth = '50%';\n        card.style.margin = '0 auto';\n      }\n\n      rosterGrid.appendChild(card);\n    });\n\n    // 4. Close Handler & Submit\n    modal.querySelector('.modal-close').addEventListener('click', () => overlay.remove());\n    checkAndSubmit();\n  }\n\n  function createModalTokenCard(token, index, type) {\n    const card = document.createElement('div');\n    const isLeader = type !== 'ROSTER';\n\n    // Base styles\n    let borderStyle = '1px solid var(--glass-border)';\n    let bgStyle = 'var(--glass-bg)';\n\n    // Card Color Themes\n    if (type === 'CAPTAIN') {\n      // Blue Theme for Captain\n      bgStyle = 'rgba(0, 123, 255, 0.15)';\n      borderStyle = '1px solid #007bff';\n    } else if (type === 'VICE') {\n      // Yellow Theme for Vice\n      bgStyle = 'rgba(255, 215, 0, 0.15)';\n      borderStyle = '1px solid #FFD700';\n    }\n    // Roster items keep neutral background to let the \"Up/Down\" indicator stand out? \n    // User said \"captain card blue color and vice in yellow\".\n    // Direction indicator is a separate element.\n\n    card.className = 'card';\n    // Compact styles for roster\n    card.style.cssText = `\n        padding: ${isLeader ? 'var(--spacing-sm)' : '6px'};\n        display: flex;\n        align-items: center;\n        gap: ${isLeader ? 'var(--spacing-sm)' : '8px'};\n        background: ${bgStyle};\n        border: ${borderStyle};\n        transition: all 0.2s ease;\n        cursor: pointer;\n        position: relative;\n        min-height: ${isLeader ? 'auto' : '50px'};\n      `;\n\n    // Direction Indicator - Arrow icons\n    const arrowSvg = token.direction === 'UP'\n      ? `<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-primary)\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"5 12 12 5 19 12\"></polyline></svg>`\n      : `<svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-danger)\" stroke-width=\"3\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"19 12 12 19 5 12\"></polyline></svg>`;\n\n    // Inner HTML\n    card.innerHTML = `\n        <div style=\"position: relative;\">\n            <img src=\"${token.image}\" alt=\"${token.name}\" style=\"width: ${isLeader ? '40px' : '28px'}; height: ${isLeader ? '40px' : '28px'}; border-radius: 50%;\" />\n            <!-- Direction Arrow Indicator -->\n            <div style=\"position: absolute; bottom: -4px; right: -4px; background: white; border-radius: 50%; padding: 2px; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 3px rgba(0,0,0,0.2);\">\n                ${arrowSvg}\n            </div>\n        </div>\n        <div style=\"flex: 1; min-width: 0;\">\n          <div style=\"font-weight: 600; font-size: ${isLeader ? '1rem' : '0.8rem'}; line-height: 1.2; color: #000;\">${token.symbol.toUpperCase()}</div>\n        </div>\n        \n        ${type === 'ROSTER' ? `\n            <div style=\"display: flex; gap: 6px;\">\n                <button class=\"btn-swap\" style=\"background: var(--color-primary); color: white; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: 700; box-shadow: 0 2px 4px rgba(0,0,0,0.15);\">\n                    C\n                </button>\n                <button class=\"btn-vice\" style=\"background: #FFD700; color: #000; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 0.8rem; font-weight: 700; box-shadow: 0 2px 4px rgba(0,0,0,0.15);\">\n                    VC\n                </button>\n            </div>\n        ` : ''}\n      `;\n\n    // Event Listeners\n    if (type === 'ROSTER') {\n      // Make Captain Click\n      const swapBtn = card.querySelector('.btn-swap');\n      if (swapBtn) {\n        swapBtn.onclick = (e) => {\n          e.stopPropagation();\n          // Promote to Captain\n          captainIndex = index;\n          if (index === viceIndex) viceIndex = -1;\n          renderModalContent();\n        };\n      }\n\n      // Make Vice Click\n      const viceBtn = card.querySelector('.btn-vice');\n      if (viceBtn) {\n        viceBtn.onclick = (e) => {\n          e.stopPropagation();\n          viceIndex = index;\n          renderModalContent();\n        };\n      }\n    }\n\n    return card;\n  }\n\n  // Initial State: No default captain\n  let captainIndex = -1;\n  let viceIndex = -1;\n\n  // Render\n  renderModalContent();\n\n  async function checkAndSubmit() {\n    // Only show submit if we have a captain (always do by default)\n    // Vice is optional? \"select captain and vide captain\" implies both.\n    // Let's enforce vice too? Or maybe make the first non-captain vice by default?\n    // Let's just render the button always but validate in click\n\n    // Remove existing button if any to re-render in correct place?\n    // Actually renderModalContent re-renders everything body-wise. \n    // We need to append submit button to the end of modal-body.\n\n    const modalBody = modal.querySelector('.modal-body');\n    const existingBtn = modalBody.querySelector('.submit-team-btn');\n    if (existingBtn) existingBtn.remove();\n\n    const btn = document.createElement('button');\n    btn.className = 'btn btn-primary submit-team-btn';\n    // Center button and make fit-content\n    btn.style.width = 'fit-content';\n    btn.style.display = 'block';\n    btn.style.margin = 'var(--spacing-md) auto';\n    btn.style.padding = '0.875rem 5rem';\n\n    // Explicit solid colors with importance to override component styles\n    btn.style.cssText += 'background: #09C285 !important; color: white !important; border: none !important; opacity: 1;';\n\n    btn.textContent = 'Submit Team';\n\n    modalBody.appendChild(btn);\n\n    btn.addEventListener('click', async () => {\n      // Validation - check if captain and vice are selected\n      if (captainIndex === -1 || viceIndex === -1) {\n        alert(\"Please select captain and vice captain first\");\n        return;\n      }\n\n      btn.disabled = true;\n      btn.innerHTML = '<div class=\"loading\"></div>';\n\n      try {\n        // Send full token objects including direction\n        const result = await submitDreamTeam({\n          team: selectedTeam.map(t => ({\n            id: t.id,\n            direction: t.direction\n          })),\n          captainIndex,\n          viceCaptainIndex: viceIndex,\n        });\n\n        overlay.remove();\n        alert(` ${result.message}\\n\\nTeam ID: ${result.teamId}\\nTransaction: ${result.txHash.slice(0, 10)}...`);\n\n        // Reset team\n        selectedTeam = [];\n        updateUI();\n      } catch (error) {\n        btn.disabled = false;\n        btn.textContent = 'Submit Team';\n        alert(` Error: ${error.message}`);\n      }\n    });\n  }\n\n  modal.querySelector('.modal-close').addEventListener('click', () => overlay.remove());\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) overlay.remove();\n  });\n\n  overlay.appendChild(modal);\n  document.body.appendChild(overlay);\n}","// Time-Based Action Game Component\n// Players predict if price will go UP or DOWN in exactly 1 minute\n\nimport { fetchTopTokens } from '../../services/priceService.js';\nimport { submitTimeAction } from '../../contracts/gameContract.js';\nimport { fetchTickerData, subscribeToTickerUpdates, fetchMultipleTickers } from '../../services/candleService.js';\nimport { formatCurrency, formatPercentage, getPriceChangeClass } from '../../utils/formatters.js';\nimport walletManager from '../../wallet/walletManager.js';\n\n// Store active predictions\n// Key: tokenSymbol, Value: { type: 'UP'|'DOWN', startPrice, startTime, timerInterval }\nconst activePredictions = new Map();\n\nexport function createTimeBasedAction() {\n  const page = document.createElement('div');\n  page.className = 'time-based-page';\n  page.style.height = 'calc(100vh - 64px)'; // Adjust for header\n  page.style.overflowY = 'auto';\n\n  const container = document.createElement('div');\n  container.className = 'container';\n  container.style.padding = 'var(--spacing-xl) var(--spacing-lg)';\n\n  // Header\n  const header = document.createElement('div');\n  header.style.marginBottom = 'var(--spacing-xl)';\n\n  // Custom gradient for the header icon\n  const iconGradient = `\n    <defs>\n      <linearGradient id=\"time-grad-page\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n        <stop offset=\"0%\" style=\"stop-color:#3B82F6\"/>\n        <stop offset=\"100%\" style=\"stop-color:#2563EB\"/>\n      </linearGradient>\n    </defs>\n  `;\n\n  header.innerHTML = `\n    <h1 style=\"font-size: 2.5rem; margin-bottom: var(--spacing-sm); display: flex; align-items: center; justify-content: center; gap: var(--spacing-md);\">\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        ${iconGradient}\n        <style>\n          @keyframes tick {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n          .stopwatch-hand {\n            transform-origin: 32px 34px;\n            animation: tick 2s steps(60) infinite;\n          }\n        </style>\n        <!-- Stopwatch Body -->\n        <circle cx=\"32\" cy=\"34\" r=\"24\" stroke=\"url(#time-grad-page)\" stroke-width=\"3\" fill=\"none\"/>\n        <circle cx=\"32\" cy=\"34\" r=\"24\" stroke=\"url(#time-grad-page)\" stroke-width=\"3\" fill=\"url(#time-grad-page)\" opacity=\"0.1\"/>\n        \n        <!-- Top Button -->\n        <path d=\"M26 6H38V10H26V6Z\" fill=\"url(#time-grad-page)\"/>\n        <rect x=\"30\" y=\"2\" width=\"4\" height=\"4\" fill=\"url(#time-grad-page)\"/>\n        \n        <!-- Ticks -->\n        <path d=\"M32 14V17\" stroke=\"url(#time-grad-page)\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n        <path d=\"M32 51V54\" stroke=\"url(#time-grad-page)\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n        <path d=\"M52 34H49\" stroke=\"url(#time-grad-page)\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n        <path d=\"M15 34H12\" stroke=\"url(#time-grad-page)\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n        \n        <!-- Hand -->\n        <line x1=\"32\" y1=\"34\" x2=\"32\" y2=\"18\" stroke=\"#FF4D4F\" stroke-width=\"2\" stroke-linecap=\"round\" class=\"stopwatch-hand\"/>\n        \n        <!-- Center Dot -->\n        <circle cx=\"32\" cy=\"34\" r=\"3\" fill=\"#3B82F6\"/>\n      </svg>\n      1min Frenzy\n    </h1>\n    <p style=\"text-align: center; color: var(--color-text-secondary); font-size: 1.125rem;\">\n      Predict if the price will go UP or DOWN in 1 minute.\n    </p>\n  `;\n  container.appendChild(header);\n\n  // Token Grid\n  const tokenGrid = document.createElement('div');\n  tokenGrid.id = 'token-grid';\n  tokenGrid.className = 'grid';\n  tokenGrid.style.cssText = `\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n    gap: var(--spacing-lg);\n  `;\n  container.appendChild(tokenGrid);\n\n  page.appendChild(container);\n\n  // Load tokens\n  loadTokens(tokenGrid);\n\n  // Cleanup on leave\n  window.addEventListener('hashchange', () => {\n    // Clear all intervals\n    activePredictions.forEach(pred => {\n      if (pred.timerInterval) clearInterval(pred.timerInterval);\n    });\n    activePredictions.clear();\n  }, { once: true });\n\n  return page;\n}\n\nasync function loadTokens(gridContainer) {\n  gridContainer.innerHTML = '<div class=\"loading\" style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl);\"></div>';\n\n  try {\n    // Priority tokens for Binance\n    const prioritySymbols = ['BTC', 'ETH', 'SOL', 'XRP', 'DOGE', 'PEPE', 'BNB', 'ADA', 'AVAX', 'LINK', 'DOT', 'SHIB', 'LTC', 'UNI', 'NEAR', 'ATOM', 'ARB', 'OP', 'SUI', 'APT'];\n\n    // Fetch tokens from Binance\n    const binanceTokens = await fetchMultipleTickers(prioritySymbols);\n\n    if (binanceTokens && binanceTokens.length > 0) {\n      // Transform to match expected format (though fetchMultipleTickers returns compatible structure)\n      // fetchMultipleTickers returns: { symbol, name, image, price, priceChange24h, ... }\n      // createPredictionCard expects: { symbol, name, image, currentPrice: price, priceChange24h }\n\n      const tokens = binanceTokens.map(t => ({\n        ...t,\n        currentPrice: t.price // changing key for consistency with priceService format if needed\n      }));\n\n      renderTokens(tokens, gridContainer);\n    } else {\n      throw new Error('No Binance tokens found');\n    }\n\n  } catch (error) {\n    console.error('Error loading tokens:', error);\n\n    // Fallback? Or just show error as user requested Binance specifically\n    // Trying fallback to standard fetch if Binance fails might be good but user said \"here also use binance\" \n    // implying strict usage. I will stick to error reporting or basic fallback if needed but primarily Binance.\n\n    gridContainer.innerHTML = `\n      <div style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl); color: var(--color-danger);\">\n        Failed to load tokens from Binance. Please try again later.\n      </div>\n    `;\n  }\n}\n\nfunction renderTokens(tokens, gridContainer) {\n  gridContainer.innerHTML = '';\n\n  tokens.forEach(token => {\n    const card = createPredictionCard(token);\n    gridContainer.appendChild(card);\n  });\n}\n\nfunction createPredictionCard(token) {\n  const card = document.createElement('div');\n  card.className = 'card prediction-card';\n  card.dataset.symbol = token.symbol;\n  card.style.cssText = `\n    display: flex;\n    flex-direction: column;\n    animation: fadeIn 0.6s ease-out;\n    background: var(--glass-bg);\n    border: 1px solid var(--glass-border);\n    border-radius: var(--radius-lg);\n    padding: var(--spacing-lg);\n    position: relative;\n    overflow: hidden;\n  `;\n\n  const changeClass = getPriceChangeClass(token.priceChange24h);\n  const formattedPrice = formatCurrency(token.currentPrice);\n\n  card.innerHTML = `\n    <!-- Header -->\n    <div style=\"display: flex; align-items: center; gap: var(--spacing-md); margin-bottom: var(--spacing-lg);\">\n      <img src=\"${token.image}\" alt=\"${token.name}\" style=\"width: 48px; height: 48px; border-radius: 50%;\" />\n      <div style=\"flex: 1;\">\n        <div style=\"font-weight: 700; font-size: 1.1rem; margin-bottom: 2px;\">${token.name}</div>\n        <div style=\"font-size: 0.875rem; color: var(--color-text-muted);\">${token.symbol.toUpperCase()}</div>\n      </div>\n      <div style=\"text-align: right;\">\n        <div class=\"token-price\" style=\"font-size: 1.1rem; font-weight: 700;\">${formattedPrice}</div>\n        <div class=\"token-change ${changeClass}\" style=\"font-size: 0.875rem;\">${formatPercentage(token.priceChange24h)}</div>\n      </div>\n    </div>\n\n    <!-- Prediction Area -->\n    <div class=\"prediction-area\" style=\"display: flex; flex-direction: column; gap: var(--spacing-md);\">\n      <div style=\"text-align: center; font-size: 0.9rem; color: var(--color-text-secondary); margin-bottom: var(--spacing-xs);\">\n        Will ${token.symbol.toUpperCase()} go UP or DOWN in 1 min?\n      </div>\n\n      <div style=\"display: flex; gap: var(--spacing-md);\">\n        <!-- UP Button -->\n        <button class=\"predict-btn up-btn\" data-type=\"UP\" style=\"\n          flex: 1;\n          padding: 1rem;\n          background: rgba(9, 194, 133, 0.1);\n          border: 1px solid rgba(9, 194, 133, 0.3);\n          border-radius: var(--radius-md);\n          color: #09C285;\n          font-weight: 700;\n          cursor: pointer;\n          transition: all 0.2s;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 4px;\n        \">\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <polyline points=\"18 15 12 9 6 15\"></polyline>\n          </svg>\n          UP\n        </button>\n\n        <!-- DOWN Button -->\n        <button class=\"predict-btn down-btn\" data-type=\"DOWN\" style=\"\n          flex: 1;\n          padding: 1rem;\n          background: rgba(255, 77, 79, 0.1);\n          border: 1px solid rgba(255, 77, 79, 0.3);\n          border-radius: var(--radius-md);\n          color: #FF4D4F;\n          font-weight: 700;\n          cursor: pointer;\n          transition: all 0.2s;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 4px;\n        \">\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <polyline points=\"6 9 12 15 18 9\"></polyline>\n          </svg>\n          DOWN\n        </button>\n      </div>\n    </div>\n\n    <!-- Active Timer State (Hidden initially) -->\n    <div class=\"active-state\" style=\"display: none; flex-direction: column; align-items: center; padding: var(--spacing-md); background: var(--color-bg-tertiary); border-radius: var(--radius-md); text-align: center;\">\n      <div style=\"font-size: 0.9rem; margin-bottom: var(--spacing-sm); color: var(--color-text-muted);\">\n        Predicted: <span class=\"prediction-text\" style=\"font-weight: 700;\"></span>\n      </div>\n      <div class=\"timer-display\" style=\"font-size: 2rem; font-weight: 700; font-variant-numeric: tabular-nums; margin-bottom: var(--spacing-sm);\">\n        01:00\n      </div>\n      <div style=\"font-size: 0.8rem; color: var(--color-text-muted);\">\n        Start Price: <span class=\"start-price\">...</span>\n      </div>\n      <div class=\"current-price-display\" style=\"font-size: 0.9rem; font-weight: 600; margin-top: 4px;\">\n        Current: <span class=\"current-price\">...</span>\n      </div>\n    </div>\n\n    <!-- Result State (Hidden initially) -->\n    <div class=\"result-state\" style=\"display: none; flex-direction: column; align-items: center; padding: var(--spacing-md); background: var(--color-bg-tertiary); border-radius: var(--radius-md); text-align: center;\">\n    </div>\n  `;\n\n  // Real-time price updates for the main card price\n  subscribeToTickerUpdates(token.symbol, (ticker) => {\n    updateCardPrice(card, ticker);\n  });\n\n  // Action listeners\n  const upBtn = card.querySelector('.up-btn');\n  const downBtn = card.querySelector('.down-btn');\n\n  upBtn.addEventListener('click', () => startPrediction(token, 'UP', card));\n  downBtn.addEventListener('click', () => startPrediction(token, 'DOWN', card));\n\n  return card;\n}\n\nfunction updateCardPrice(card, ticker) {\n  // Update main header price\n  const priceEl = card.querySelector('.token-price');\n  const changeEl = card.querySelector('.token-change');\n\n  if (priceEl && changeEl) {\n    const oldPrice = parseFloat(priceEl.dataset.rawPrice || 0);\n    priceEl.textContent = formatCurrency(ticker.price);\n    priceEl.dataset.rawPrice = ticker.price;\n\n    // Flash effect\n    if (oldPrice && oldPrice !== ticker.price) {\n      priceEl.style.color = ticker.price > oldPrice ? '#09C285' : '#FF4D4F';\n      setTimeout(() => { priceEl.style.color = ''; }, 300);\n    }\n\n    changeEl.textContent = formatPercentage(ticker.priceChange24h);\n    changeEl.className = `token-change ${getPriceChangeClass(ticker.priceChange24h)}`;\n  }\n\n  // If active prediction, update current price display\n  const activeState = card.querySelector('.active-state');\n  if (activeState.style.display !== 'none') {\n    const currentPriceEl = activeState.querySelector('.current-price');\n    if (currentPriceEl) {\n      currentPriceEl.textContent = formatCurrency(ticker.price);\n      // Indicate if winning or losing in real-time\n      const symbol = card.dataset.symbol;\n      const prediction = activePredictions.get(symbol);\n      if (prediction) {\n        const startPrice = prediction.startPrice;\n        const type = prediction.type;\n        const isWinning = (type === 'UP' && ticker.price > startPrice) ||\n          (type === 'DOWN' && ticker.price < startPrice);\n\n        currentPriceEl.style.color = isWinning ? '#09C285' : '#FF4D4F';\n      }\n    }\n  }\n}\n\nasync function startPrediction(token, type, card) {\n  const state = walletManager.getState();\n  if (!state.connected) {\n    alert('Please connect your wallet first!');\n    return;\n  }\n\n  if (activePredictions.has(token.symbol)) {\n    return; // Already active\n  }\n\n  // Get UI elements\n  const predictionArea = card.querySelector('.prediction-area');\n  const activeState = card.querySelector('.active-state');\n  const predictionText = activeState.querySelector('.prediction-text');\n  const startPriceEl = activeState.querySelector('.start-price');\n  const currentPriceEl = activeState.querySelector('.current-price');\n  const timerDisplay = activeState.querySelector('.timer-display');\n  const resultState = card.querySelector('.result-state');\n\n  // Hide inputs, show loader\n  predictionArea.style.display = 'none';\n  activeState.style.display = 'flex';\n  activeState.innerHTML = '<div class=\"loading\"></div> Preparing...';\n\n  try {\n    // Fetch latest price for start\n    // We try to get fresh data\n    let startPrice = token.currentPrice;\n    try {\n      const ticker = await fetchTickerData(token.symbol);\n      startPrice = ticker.price;\n    } catch (e) {\n      console.log('Using cached price for start');\n    }\n\n    // Reset Active State HTML\n    activeState.innerHTML = `\n      <div style=\"font-size: 0.9rem; margin-bottom: var(--spacing-sm); color: var(--color-text-muted);\">\n        Predicted: <span class=\"prediction-text\" style=\"font-weight: 700; color: ${type === 'UP' ? '#09C285' : '#FF4D4F'}\">${type}</span>\n      </div>\n      <div class=\"timer-display\" style=\"font-size: 2.5rem; font-weight: 700; font-variant-numeric: tabular-nums; margin-bottom: var(--spacing-sm);\">\n        01:00\n      </div>\n      <div style=\"display: flex; justify-content: space-between; width: 100%; font-size: 0.85rem; padding: 0 var(--spacing-md);\">\n        <div>Start: <span class=\"start-price\">${formatCurrency(startPrice)}</span></div>\n        <div>Current: <span class=\"current-price\">${formatCurrency(startPrice)}</span></div>\n      </div>\n    `;\n\n    // Start Timer\n    const durationSec = 60;\n    const startTime = Date.now();\n    const endTime = startTime + (durationSec * 1000);\n\n    const prediction = {\n      type,\n      startPrice,\n      startTime,\n      timerInterval: null\n    };\n\n    // Store prediction\n    activePredictions.set(token.symbol, prediction);\n\n    // Update function with tracker support\n    const updateTimer = () => {\n      const now = Date.now();\n      const remainingMs = endTime - now;\n\n      // Check current page\n      const currentPath = window.location.hash.replace('#', '') || '/';\n      const isOnFrenzyPage = currentPath === '/time-based';\n\n      if (remainingMs <= 0) {\n        clearInterval(prediction.timerInterval);\n        finishPrediction(token, card, prediction);\n        // Remove floating tracker\n        const tracker = document.getElementById(`frenzy-tracker-${token.symbol}`);\n        if (tracker) tracker.remove();\n        return;\n      }\n\n      const seconds = Math.ceil(remainingMs / 1000);\n\n      if (isOnFrenzyPage) {\n        // On page: Update inline text\n        const displayEl = activeState.querySelector('.timer-display');\n        if (displayEl) {\n          displayEl.textContent = `00:${seconds.toString().padStart(2, '0')}`;\n          // Color urgency\n          if (seconds <= 10) displayEl.style.color = '#FF4D4F';\n          else displayEl.style.color = '';\n        }\n\n        // Hide floating tracker\n        const tracker = document.getElementById(`frenzy-tracker-${token.symbol}`);\n        if (tracker) tracker.style.display = 'none';\n\n      } else {\n        // Off page: Show floating tracker\n        const tracker = createFrenzyFloatingTracker(token.symbol, type, endTime);\n        tracker.style.display = 'flex';\n        updateFrenzyTrackerContent(tracker, token.symbol, type, remainingMs);\n      }\n    };\n\n    prediction.timerInterval = setInterval(updateTimer, 1000);\n    updateTimer(); // Initial call\n\n    // Add navigation listener\n    window.addEventListener('hashchange', updateTimer);\n\n  } catch (error) {\n    console.error(error);\n    alert('Failed to start prediction');\n    predictionArea.style.display = 'flex';\n    activeState.style.display = 'none';\n  }\n}\n\nasync function finishPrediction(token, card, prediction) {\n  const activeState = card.querySelector('.active-state');\n  const resultState = card.querySelector('.result-state');\n\n  activeState.style.display = 'none';\n  resultState.style.display = 'flex';\n  resultState.innerHTML = '<div class=\"loading\"></div> Calculating...';\n\n  try {\n    // Fetch final price\n    let endPrice = prediction.startPrice;\n    try {\n      const ticker = await fetchTickerData(token.symbol);\n      endPrice = ticker.price;\n    } catch (e) {\n      console.error('Error fetching final price', e);\n      // Fallback: use whatever current price we have or can get\n      // For now, assume stored price update loop caught it? No, need explicit fetch for safety.\n      // If fail, maybe reuse last known.\n    }\n\n    const isUp = endPrice > prediction.startPrice;\n    const isDown = endPrice < prediction.startPrice;\n    const isTie = endPrice === prediction.startPrice;\n\n    // Determine win/loss\n    let won = false;\n    if (prediction.type === 'UP' && isUp) won = true;\n    if (prediction.type === 'DOWN' && isDown) won = true;\n\n    // UI Update\n    resultState.innerHTML = `\n      <div style=\"font-size: 3rem; margin-bottom: var(--spacing-sm); animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);\">\n        ${won ? '' : ''}\n      </div>\n      <div style=\"font-size: 1.25rem; font-weight: 700; margin-bottom: var(--spacing-xs); color: ${won ? 'var(--color-success)' : 'var(--color-danger)'};\">\n        ${won ? 'You Won!' : 'You Lost'}\n      </div>\n      <div style=\"font-size: 0.9rem; color: var(--color-text-secondary); margin-bottom: var(--spacing-md);\">\n        Price went ${isUp ? 'UP' : isDown ? 'DOWN' : 'NOWHERE'} (${formatCurrency(prediction.startPrice)}  ${formatCurrency(endPrice)})\n      </div>\n      <button class=\"reset-btn\" style=\"\n        background: ${won ? 'var(--color-primary)' : 'var(--color-bg-secondary)'};\n        color: ${won ? 'white' : 'var(--color-text-primary)'};\n        border: 1px solid ${won ? 'transparent' : 'var(--glass-border)'};\n        padding: 0.75rem 1.5rem;\n        border-radius: var(--radius-md);\n        font-weight: 600;\n        cursor: pointer;\n        transition: all 0.2s;\n      \">\n        ${won ? 'Claim Reward' : 'Close'}\n      </button>\n    `;\n\n    const resetBtn = resultState.querySelector('.reset-btn');\n    resetBtn.onclick = () => {\n      // Reset card state\n      activePredictions.delete(token.symbol);\n      resultState.style.display = 'none';\n      card.querySelector('.prediction-area').style.display = 'flex';\n\n      if (won) {\n        // Maybe trigger confetti or balance update here\n      }\n    };\n\n  } catch (error) {\n    console.error(error);\n    resultState.innerHTML = `\n      <div style=\"color: var(--color-danger);\">Error calculating results.</div>\n      <button class=\"reset-btn\">Close</button>\n    `;\n    resultState.querySelector('.reset-btn').onclick = () => {\n      activePredictions.delete(token.symbol);\n      resultState.style.display = 'none';\n      card.querySelector('.prediction-area').style.display = 'flex';\n    };\n  }\n}\n\nfunction addFrenzyTrackerStyles() {\n  const styleId = 'frenzy-tracker-styles';\n  if (document.getElementById(styleId)) return;\n\n  const style = document.createElement('style');\n  style.id = styleId;\n  style.textContent = `\n        .frenzy-tracker-card {\n            position: fixed;\n            bottom: 24px;\n            right: 24px;\n            z-index: 1000;\n            \n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            gap: 16px;\n            \n            min-width: 220px;\n            padding: 12px 20px;\n            \n            background: rgba(15, 23, 42, 0.9);\n            backdrop-filter: blur(12px);\n            -webkit-backdrop-filter: blur(12px);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            border-radius: 12px;\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n            \n            cursor: pointer;\n            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n            animation: fadeIn 0.3s ease-out;\n            color: white;\n            font-family: var(--font-primary);\n        }\n\n        .frenzy-tracker-card:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);\n            border-color: var(--color-primary);\n        }\n\n        .frenzy-tracker-card.pulse {\n            animation: frenzyTrackerPulse 2s infinite;\n        }\n\n        @keyframes frenzyTrackerPulse {\n          0% {\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n          }\n          50% {\n            box-shadow: 0 4px 25px rgba(59, 130, 246, 0.4);\n          }\n          100% {\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n          }\n        }\n    `;\n  document.head.appendChild(style);\n}\n\nfunction createFrenzyFloatingTracker(symbol, type, endTime) {\n  const trackerId = `frenzy-tracker-${symbol}`;\n  let tracker = document.getElementById(trackerId);\n\n  if (!tracker) {\n    addFrenzyTrackerStyles();\n\n    tracker = document.createElement('div');\n    tracker.id = trackerId;\n    tracker.className = 'frenzy-tracker-card pulse';\n\n    tracker.addEventListener('click', () => {\n      window.location.hash = '#/time-based';\n    });\n\n    document.body.appendChild(tracker);\n  }\n\n  return tracker;\n}\n\nfunction updateFrenzyTrackerContent(tracker, symbol, type, remainingMs) {\n  const hours = Math.floor(remainingMs / 3600000);\n  const minutes = Math.floor((remainingMs % 3600000) / 60000);\n  const seconds = Math.floor((remainingMs % 60000) / 1000);\n\n  const timeDisplay = minutes > 0\n    ? `${minutes}:${seconds.toString().padStart(2, '0')}`\n    : `00:${seconds.toString().padStart(2, '0')}`;\n\n  const color = type === 'UP' ? '#09C285' : '#FF4D4F';\n  const arrow = type === 'UP' ? '' : '';\n\n  tracker.innerHTML = `\n        <div style=\"display: flex; flex-direction: column; gap: 2px;\">\n            <div style=\"font-size: 0.75rem; color: rgba(255,255,255,0.7); font-weight: 500;\">1min Frenzy</div>\n            <div style=\"display: flex; align-items: center; gap: 6px;\">\n                <span style=\"font-weight: 700; font-size: 0.95rem;\">${symbol}</span>\n                <span style=\"color: ${color}; font-weight: 700; font-size: 0.9rem;\">${arrow} ${type}</span>\n            </div>\n        </div>\n        <div style=\"font-family: monospace; font-size: 1.25rem; font-weight: 700; color: ${seconds <= 10 ? '#FF4D4F' : 'white'};\">\n            ${timeDisplay}\n        </div>\n    `;\n}\n","// Predict the Candle Game Component\n// Uses real-time Binance candlestick data\n\nimport {\n  getAvailableTokens,\n  fetchHistoricalCandles,\n  subscribeToCandleUpdates,\n  cleanupAllConnections,\n  KLINE_INTERVALS\n} from '../../services/candleService.js';\nimport { submitCandlePrediction } from '../../contracts/gameContract.js';\nimport { formatCurrency } from '../../utils/formatters.js';\nimport walletManager from '../../wallet/walletManager.js';\n\n// Store active subscriptions for cleanup\nlet activeSubscriptions = [];\n\n// Store candle data for each token (for real-time chart updates)\nconst candleDataStore = new Map();\n\n// Store active predictions for each token (for checking results)\n// Format: { symbol: { prediction: 'green'|'red', wagerAmount, targetCandleOpenTime, button, timerInterval } }\nconst activePredictions = new Map();\n\n// Map timeframe minutes to Binance interval\nconst TIMEFRAME_MAP = {\n  1: '1m',\n  3: '3m',\n  5: '5m',\n  15: '15m',\n  30: '30m',\n  60: '1h',\n};\n\nexport function createPredictCandle() {\n  const page = document.createElement('div');\n  page.className = 'predict-candle-page';\n\n  const container = document.createElement('div');\n  container.className = 'container';\n  container.style.padding = 'var(--spacing-md) var(--spacing-lg)';\n\n  // Header\n  const header = document.createElement('div');\n  header.style.cssText = 'margin-bottom: var(--spacing-lg); text-align: center;';\n  header.innerHTML = `\n    <h1 style=\"font-size: 2.5rem; margin-bottom: var(--spacing-sm); display: flex; align-items: center; justify-content: center; gap: var(--spacing-md);\">\n      <svg width=\"48\" height=\"48\" viewBox=\"0 0 64 64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <defs>\n          <linearGradient id=\"green-grad-page\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n            <stop offset=\"0%\" style=\"stop-color:#09C285\"/>\n            <stop offset=\"100%\" style=\"stop-color:#07a371\"/>\n          </linearGradient>\n          <linearGradient id=\"red-grad-page\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\n            <stop offset=\"0%\" style=\"stop-color:#FF4D4F\"/>\n            <stop offset=\"100%\" style=\"stop-color:#ff3336\"/>\n          </linearGradient>\n        </defs>\n        <line x1=\"10\" y1=\"20\" x2=\"10\" y2=\"48\" stroke=\"url(#green-grad-page)\" stroke-width=\"1.5\"/>\n        <rect x=\"7\" y=\"28\" width=\"6\" height=\"16\" fill=\"url(#green-grad-page)\" rx=\"1\"/>\n        <line x1=\"20\" y1=\"16\" x2=\"20\" y2=\"44\" stroke=\"url(#red-grad-page)\" stroke-width=\"1.5\"/>\n        <rect x=\"17\" y=\"24\" width=\"6\" height=\"12\" fill=\"url(#red-grad-page)\" rx=\"1\"/>\n        <line x1=\"30\" y1=\"22\" x2=\"30\" y2=\"50\" stroke=\"url(#green-grad-page)\" stroke-width=\"1.5\"/>\n        <rect x=\"27\" y=\"30\" width=\"6\" height=\"14\" fill=\"url(#green-grad-page)\" rx=\"1\"/>\n        <line x1=\"40\" y1=\"18\" x2=\"40\" y2=\"46\" stroke=\"url(#red-grad-page)\" stroke-width=\"1.5\"/>\n        <rect x=\"37\" y=\"26\" width=\"6\" height=\"14\" fill=\"url(#red-grad-page)\" rx=\"1\"/>\n        <line x1=\"50\" y1=\"14\" x2=\"50\" y2=\"42\" stroke=\"url(#green-grad-page)\" stroke-width=\"1.5\"/>\n        <rect x=\"47\" y=\"22\" width=\"6\" height=\"16\" fill=\"url(#green-grad-page)\" rx=\"1\"/>\n      </svg>\n      Predict the Candle\n    </h1>\n    <p style=\"color: var(--color-text-secondary); font-size: 1.125rem;\">\n      Predict if the next candle will be green (up) or red (down)\n    </p>\n  `;\n  container.appendChild(header);\n\n  // Live indicator\n\n\n  // Timeframe Selector\n  const timeframeSelector = document.createElement('div');\n  timeframeSelector.style.cssText = `\n    display: flex;\n    justify-content: center;\n    gap: var(--spacing-sm);\n    margin-bottom: var(--spacing-xl);\n    flex-wrap: wrap;\n  `;\n  timeframeSelector.innerHTML = `\n    <button class=\"timeframe-btn\" data-minutes=\"1\">1 Min</button>\n    <button class=\"timeframe-btn\" data-minutes=\"3\">3 Min</button>\n    <button class=\"timeframe-btn selected\" data-minutes=\"5\">5 Min</button>\n    <button class=\"timeframe-btn\" data-minutes=\"15\">15 Min</button>\n    <button class=\"timeframe-btn\" data-minutes=\"30\">30 Min</button>\n    <button class=\"timeframe-btn\" data-minutes=\"60\">1 Hour</button>\n  `;\n  container.appendChild(timeframeSelector);\n\n  // Token Grid\n  const tokenGrid = document.createElement('div');\n  tokenGrid.id = 'candle-token-grid';\n  tokenGrid.className = 'grid';\n  tokenGrid.style.cssText = `\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n    gap: var(--spacing-lg);\n  `;\n  container.appendChild(tokenGrid);\n\n  page.appendChild(container);\n\n  // Setup timeframe selector\n  let selectedTimeframe = 5;\n  timeframeSelector.querySelectorAll('.timeframe-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      timeframeSelector.querySelectorAll('.timeframe-btn').forEach(b => b.classList.remove('selected'));\n      btn.classList.add('selected');\n      selectedTimeframe = parseInt(btn.dataset.minutes);\n      // Reload with new timeframe\n      loadTokensWithCandles(tokenGrid, selectedTimeframe);\n    });\n  });\n\n  // Load tokens\n  loadTokensWithCandles(tokenGrid, selectedTimeframe);\n\n  // Cleanup on page navigation\n  window.addEventListener('hashchange', () => {\n    cleanupSubscriptions();\n  });\n\n  return page;\n}\n\nfunction cleanupSubscriptions() {\n  activeSubscriptions.forEach(unsub => {\n    if (typeof unsub === 'function') unsub();\n  });\n  activeSubscriptions = [];\n  candleDataStore.clear();\n}\n\nasync function loadTokensWithCandles(gridContainer, timeframeMinutes) {\n  // Cleanup previous subscriptions\n  cleanupSubscriptions();\n\n  gridContainer.innerHTML = '<div class=\"loading\" style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl);\"></div>';\n\n  try {\n    const tokens = getAvailableTokens(12);\n    const interval = TIMEFRAME_MAP[timeframeMinutes] || '5m';\n\n    gridContainer.innerHTML = '';\n\n    for (const token of tokens) {\n      const card = await createCandleCard(token, interval, timeframeMinutes);\n      gridContainer.appendChild(card);\n    }\n  } catch (error) {\n    console.error('Error loading tokens:', error);\n    gridContainer.innerHTML = `\n      <div style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl); color: var(--color-danger);\">\n        Failed to load tokens. Please try again later.\n      </div>\n    `;\n  }\n}\n\nasync function createCandleCard(token, interval, timeframeMinutes) {\n  const card = document.createElement('div');\n  card.className = 'card candle-card';\n  card.id = `candle-card-${token.symbol}`;\n  card.style.cssText = `\n    display: flex;\n    flex-direction: column;\n    animation: fadeIn 0.6s ease-out;\n    min-height: 300px;\n  `;\n\n  // Fetch historical candles\n  let candles = [];\n  let currentPrice = 0;\n  let priceChange = 0;\n\n  try {\n    candles = await fetchHistoricalCandles(token.symbol, interval, 15);\n    // Store candles for real-time updates\n    candleDataStore.set(token.symbol, [...candles]);\n\n    if (candles.length > 0) {\n      currentPrice = candles[candles.length - 1].close;\n      const firstPrice = candles[0].open;\n      priceChange = ((currentPrice - firstPrice) / firstPrice) * 100;\n    }\n  } catch (error) {\n    console.error(`Error fetching candles for ${token.symbol}:`, error);\n  }\n\n  // Calculate odds based on historical candle patterns\n  let greenOdds = 50; // Default to 50% if no data\n  let redOdds = 50;\n\n  if (candles.length > 0) {\n    const greenCount = candles.filter(c => c.isGreen).length;\n    const totalCandles = candles.length;\n\n    // Calculate probability as percentage (inverted for betting odds)\n    // If 60% of candles were green historically, green has lower payout odds\n    greenOdds = Math.round((greenCount / totalCandles) * 100);\n    redOdds = 100 - greenOdds;\n\n    // Clamp to reasonable range (10-90)\n    greenOdds = Math.max(10, Math.min(90, greenOdds));\n    redOdds = Math.max(10, Math.min(90, redOdds));\n  }\n\n  // --- Persistence Helpers ---\n\n  function saveActiveBets() {\n    const bets = [];\n    activePredictions.forEach((data, key) => {\n      // Only save essential data (no DOM refs, no functions)\n      const { prediction, wagerAmount, targetCandleOpenTime, entryPriceRef, symbol, timeframe, key: storedKey, customStatus } = data;\n      // Don't save if it's already lost and cleaning up (but customStatus might indicate won/claimable)\n      bets.push({ key: storedKey || key, prediction, wagerAmount, targetCandleOpenTime, entryPriceRef, symbol, timeframe, customStatus });\n    });\n    localStorage.setItem('predict_candle_bets', JSON.stringify(bets));\n  }\n\n  function restoreActiveBets() {\n    const saved = localStorage.getItem('predict_candle_bets');\n    if (!saved) return;\n\n    try {\n      const bets = JSON.parse(saved);\n      bets.forEach(bet => {\n        const { key, symbol, timeframe, targetCandleOpenTime } = bet;\n        const intervalMs = timeframe * 60 * 1000;\n        const candleEndTime = targetCandleOpenTime + intervalMs;\n        const now = Date.now();\n\n        if (now >= candleEndTime) {\n          // Ended while away/refreshing\n          checkPastBet(bet);\n        } else {\n          // Still active\n          resurrectActiveBet(bet);\n        }\n      });\n    } catch (e) {\n      console.error('Failed to restore bets:', e);\n    }\n  }\n\n  async function checkPastBet(bet) {\n    const { symbol, timeframe, targetCandleOpenTime, key } = bet;\n    const interval = TIMEFRAME_MAP[timeframe] || '5m';\n\n    // We need to fetch history and find the candle\n    try {\n      // Fetch last 50 to be safe\n      const history = await fetchHistoricalCandles(symbol, interval, 50);\n      const candle = history.find(c => c.openTime === targetCandleOpenTime);\n\n      // Reconstruct basic predictionData for resolveBet\n      const predictionData = {\n        ...bet,\n        button: null, // No button ref on resurrection\n        unsub: null,\n        timerInterval: null\n      };\n      activePredictions.set(key, predictionData); // Set temporarily for resolve\n\n      if (candle && candle.isClosed) {\n        resolveBet(key, symbol, candle, predictionData);\n      } else {\n        // If not found or not close, maybe API delay? Or very old?\n        // If very old, expire.\n        const age = Date.now() - (targetCandleOpenTime + timeframe * 60000);\n        if (age > 3600000) { // 1 hour old\n          activePredictions.delete(key);\n          saveActiveBets();\n        } else {\n          // Try subscribing just in case it's just finishing\n          resurrectActiveBet(bet);\n        }\n      }\n    } catch (e) {\n      console.error('Error checking past bet:', e);\n    }\n  }\n\n  function resurrectActiveBet(bet) {\n    const { symbol, timeframe, targetCandleOpenTime, key } = bet;\n    const interval = TIMEFRAME_MAP[timeframe];\n    const timeframeMs = timeframe * 60 * 1000;\n\n    // Reconstruct predictionObj\n    const predictionData = {\n      ...bet,\n      button: null, // UI will bind when card is created\n      timerInterval: null\n    };\n\n    // Define updateTimer (Copy of logic in submitPrediction - ideally helper)\n    // For brevity, we'll re-implement the timer logic minimal version or refactor\n    // BUT updateTimer depends on predictionData closure.\n    // To Avoid DRY violation and complexity, maybe better to abstract `startBetTracking(data)`?\n    // Given constraints, I will duplicate validity check logic primarily.\n\n    const updateTimer = () => {\n      // Logic from submitPrediction (simplified for tracker)\n      const now = Date.now();\n      const candleStartTime = targetCandleOpenTime;\n      const candleEndTime = candleStartTime + timeframeMs;\n      const currentPath = window.location.hash.replace('#', '') || '/';\n      const isOnPredictPage = currentPath === '/predict-candle';\n\n      if (now >= candleEndTime) {\n        clearInterval(predictionData.timerInterval);\n        return; // Subscription will handle close\n      }\n\n      const isPending = now < candleStartTime;\n      const targetTime = isPending ? candleStartTime : candleEndTime;\n      const remaining = Math.max(0, targetTime - now);\n\n      if (isOnPredictPage) {\n        // Try to find button if we don't have a valid ref\n        if (!predictionData.button || !document.body.contains(predictionData.button)) {\n          const card = document.getElementById(`candle-card-${symbol}`);\n          if (card) {\n            const btn = card.querySelector('.submit-prediction-btn');\n            if (btn) {\n              predictionData.button = btn;\n              // Force disable state since we found it late\n              btn.disabled = true;\n              // We could also disable inputs here if selectable\n            }\n          }\n        }\n\n        const btn = predictionData.button;\n        if (btn && document.body.contains(btn)) {\n          // ... UI Update logic duplicates submitPrediction ...\n          // We let UI update itself via createCandleCard restore logic?\n          // Actually createCandleCard restore logic sets static text.\n          // We need THIS timer to update the button text!\n          // So we need to query button again or use reference.\n          // predictionData.button is updated by createCandleCard.\n\n          const hours = Math.floor(remaining / 3600000);\n          const minutes = Math.floor((remaining % 3600000) / 60000);\n          const seconds = Math.floor((remaining % 60000) / 1000);\n          const timeString = minutes + ':' + seconds.toString().padStart(2, '0');\n\n          const stored = candleDataStore.get(symbol);\n          const currentPrice = (stored && stored.length > 0) ? formatCurrency(stored[stored.length - 1].close) : '';\n\n          if (isPending) {\n            btn.innerHTML = `<span style=\"opacity:0.8;\">Starts in</span> ${timeString}`;\n            btn.style.background = '#3B82F6';\n          } else {\n            btn.innerHTML = `\n                      <div style=\"display: flex; align-items: center; justify-content: center; gap: 8px;\">\n                        <span>Live: ${timeString}</span>\n                        <span style=\"opacity: 0.6;\">|</span>\n                        <span>${currentPrice}</span>\n                      </div>\n                    `;\n            btn.style.background = bet.prediction === 'green' ? '#09C285' : '#FF4D4F';\n          }\n        }\n\n        // Ensure no tracker on page\n        const item = document.getElementById(`tracker-item-${symbol}`);\n        if (item) item.remove();\n      } else {\n        // Off page tracker\n        const container = getTrackerContainer();\n        const label = isPending ? 'Starting in...' : 'Your candle prediction is Live';\n        updateTrackerItem(container, symbol, bet.prediction, remaining, label, 'compact', predictionData);\n      }\n    };\n\n    predictionData.timerInterval = setInterval(updateTimer, 1000);\n    // Bind subscription\n    const unsub = subscribeToCandleUpdates(symbol, interval, (candle) => {\n      // Also update store for price display\n      const current = candleDataStore.get(symbol) || [];\n      if (candle.isClosed || !current.length || candle.close !== current[current.length - 1].close) {\n        candleDataStore.set(symbol, [...current, candle]);\n      }\n\n      if (candle.isClosed) {\n        resolveBet(key, symbol, candle, predictionData);\n      }\n    });\n    predictionData.unsub = unsub;\n\n    // Add hash listener\n    window.addEventListener('hashchange', updateTimer);\n\n    activePredictions.set(key, predictionData);\n    updateTimer();\n  }\n\n  // Initialize persistence immediately (Sync)\n  restoreActiveBets();\n\n  // Helper to remove item\n  function removeTracker(symbol) {\n    const item = document.getElementById(`tracker-item-${symbol}`);\n    if (item) item.remove();\n  }\n  card.innerHTML = `\n    <!-- Token Header -->\n    <div style=\"display: flex; align-items: center; gap: var(--spacing-md); margin-bottom: var(--spacing-lg);\">\n      <img src=\"${token.image}\" alt=\"${token.name}\" style=\"width: 52px; height: 52px; border-radius: 12px; background: rgba(255,255,255,0.1); padding: 4px;\" onerror=\"this.src='https://via.placeholder.com/52'\" />\n      <div style=\"flex: 1;\">\n        <div style=\"font-weight: 700; font-size: 1.1rem;\">${token.symbol}</div>\n      </div>\n      <div style=\"text-align: right;\">\n        <div class=\"live-price\" style=\"font-size: 1.1rem; font-weight: 700;\">${formatCurrency(currentPrice)}</div>\n        <div style=\"display: flex; align-items: center; justify-content: flex-end; gap: 4px;\">\n          <div class=\"candle-pulse-dot\" style=\"width: 6px; height: 6px; background: ${candles.length > 0 && candles[candles.length - 1].isGreen ? '#09C285' : '#FF4D4F'}; border-radius: 50%; animation: pulse 2s infinite;\"></div>\n          <span class=\"current-candle-status\" style=\"font-size: 0.7rem; font-weight: 600; color: ${candles.length > 0 && candles[candles.length - 1].isGreen ? '#09C285' : '#FF4D4F'};\">\n            ${candles.length > 0 && candles[candles.length - 1].isGreen ? 'GREEN' : 'RED'}\n          </span>\n        </div>\n      </div>\n    </div>\n\n    <!-- Candlestick Chart -->\n    <div class=\"candle-chart-container\" style=\"\n      height: 140px; \n      background: linear-gradient(180deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.15) 100%); \n      border-radius: 12px; \n      margin-bottom: var(--spacing-lg); \n      padding: var(--spacing-md); \n      position: relative;\n      overflow: hidden;\n      border: 1px solid rgba(255, 255, 255, 0.08);\n    \">\n      <div class=\"chart-grid\" style=\"\n        position: absolute;\n        inset: 12px;\n        pointer-events: none;\n        background: \n          repeating-linear-gradient(to bottom, transparent 0px, transparent 22px, rgba(255, 255, 255, 0.05) 22px, rgba(255, 255, 255, 0.05) 23px),\n          repeating-linear-gradient(to right, transparent 0px, transparent 22px, rgba(255, 255, 255, 0.05) 22px, rgba(255, 255, 255, 0.05) 23px);\n      \"></div>\n      <div class=\"candle-chart\" style=\"display: flex; align-items: flex-end; justify-content: space-around; height: 100%; gap: 4px; position: relative; z-index: 1;\">\n        ${generateRealCandleChart(candles)}\n      </div>\n    </div>\n\n    <!-- Prediction Buttons (Yes/No style) -->\n    <div style=\"display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-md);\">\n      <button class=\"prediction-option green-option\" data-prediction=\"green\" style=\"\n        flex: 1;\n        padding: 14px 16px;\n        background: rgba(255, 255, 255, 0.08);\n        border: 1px solid rgba(9, 194, 133, 0.4);\n        border-radius: 12px;\n        color: var(--color-text-primary);\n        font-weight: 700;\n        font-size: 1rem;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n      \">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#09C285\" stroke-width=\"3\">\n          <path d=\"M12 19V5M5 12l7-7 7 7\"></path>\n        </svg>\n        <span style=\"color: #09C285;\">Green</span> <span style=\"opacity: 0.6;\">${greenOdds}%</span>\n      </button>\n      <button class=\"prediction-option red-option\" data-prediction=\"red\" style=\"\n        flex: 1;\n        padding: 14px 16px;\n        background: rgba(255, 255, 255, 0.08);\n        border: 1px solid rgba(255, 77, 79, 0.4);\n        border-radius: 12px;\n        color: var(--color-text-primary);\n        font-weight: 700;\n        font-size: 1rem;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        gap: 8px;\n      \">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#FF4D4F\" stroke-width=\"3\">\n          <path d=\"M12 5v14M5 12l7 7 7-7\"></path>\n        </svg>\n        <span style=\"color: #FF4D4F;\">Red</span> <span style=\"opacity: 0.6;\">${redOdds}%</span>\n      </button>\n    </div>\n\n    <!-- Amount Input with Balance inside -->\n    <div style=\"margin-bottom: var(--spacing-md);\">\n      <div style=\"display: flex; gap: 8px; align-items: center;\">\n        <div style=\"position: relative; flex: 1;\">\n          <span style=\"position: absolute; left: 12px; top: 50%; transform: translateY(-50%); font-size: 0.9rem; font-weight: 700; color: var(--color-text-muted);\">$</span>\n          <input \n            type=\"number\" \n            class=\"wager-input\" \n            data-token=\"${token.symbol}\"\n            placeholder=\"0\" \n            min=\"1\" \n            step=\"1\"\n            value=\"\"\n            style=\"\n              width: 100%;\n              padding: 10px 55px 10px 26px;\n              background: rgba(255, 255, 255, 0.08);\n              border: 1px solid rgba(255, 255, 255, 0.15);\n              border-radius: 10px;\n              color: var(--color-text-primary);\n              font-size: 0.95rem;\n              font-weight: 700;\n              font-family: var(--font-primary);\n              text-align: left;\n              -webkit-appearance: none;\n              -moz-appearance: textfield;\n            \"\n          />\n          <span class=\"balance-display\" style=\"position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 0.65rem; color: var(--color-text-muted); opacity: 0.7; white-space: nowrap;\">${walletManager.getState().connected ? '/ $0.00' : ''}</span>\n        </div>\n        <div style=\"display: flex; gap: 6px;\">\n          <button class=\"quick-amount-btn\" data-amount=\"5\" style=\"\n            padding: 8px 12px;\n            background: rgba(255, 255, 255, 0.05);\n            border: 1px solid rgba(255, 255, 255, 0.15);\n            border-radius: 8px;\n            color: var(--color-text-primary);\n            font-weight: 600;\n            font-size: 0.75rem;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            white-space: nowrap;\n          \">+5</button>\n          <button class=\"quick-amount-btn\" data-amount=\"10\" style=\"\n            padding: 8px 12px;\n            background: rgba(255, 255, 255, 0.05);\n            border: 1px solid rgba(255, 255, 255, 0.15);\n            border-radius: 8px;\n            color: var(--color-text-primary);\n            font-weight: 600;\n            font-size: 0.75rem;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            white-space: nowrap;\n          \">+10</button>\n          <button class=\"quick-amount-btn\" data-amount=\"max\" style=\"\n            padding: 8px 12px;\n            background: rgba(255, 255, 255, 0.05);\n            border: 1px solid rgba(255, 255, 255, 0.15);\n            border-radius: 8px;\n            color: var(--color-text-primary);\n            font-weight: 600;\n            font-size: 0.75rem;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            white-space: nowrap;\n          \">Max</button>\n        </div>\n      </div>\n    </div>\n\n    <!-- Submit Button -->\n    <button class=\"submit-prediction-btn\" data-token=\"${token.symbol}\" style=\"\n      width: 100%;\n      padding: 16px;\n      background: #3B82F6;\n      border: none;\n      border-radius: 12px;\n      color: white;\n      font-weight: 700;\n      font-size: 1rem;\n      cursor: pointer;\n      transition: all 0.2s ease;\n      opacity: 0.5;\n    \" disabled>\n      Select Green or Red\n    </button>\n\n    <!-- Prediction Info (footnote) -->\n    <div style=\"text-align: center; margin-top: var(--spacing-sm);\">\n      <span style=\"font-size: 0.7rem; color: var(--color-text-muted); font-style: italic;\">* Your prediction is for the next candle</span>\n    </div>\n  `;\n\n  // Track selected prediction for this card\n  let selectedPrediction = null;\n\n  // Subscribe to real-time updates\n  const unsubscribe = subscribeToCandleUpdates(token.symbol, interval, (candle) => {\n    updateCardWithCandle(card, candle, token.symbol);\n  });\n  activeSubscriptions.push(unsubscribe);\n\n  // Prediction option buttons (Green/Red selection)\n  const greenBtn = card.querySelector('.green-option');\n  const redBtn = card.querySelector('.red-option');\n  const submitBtn = card.querySelector('.submit-prediction-btn');\n  const wagerInput = card.querySelector('.wager-input');\n\n  function updateSubmitButton() {\n    if (selectedPrediction && parseFloat(wagerInput.value) > 0) {\n      submitBtn.disabled = false;\n      submitBtn.style.opacity = '1';\n      submitBtn.textContent = selectedPrediction === 'green' ? 'Buy Green' : 'Buy Red';\n      submitBtn.style.background = selectedPrediction === 'green' ? '#09C285' : '#FF4D4F';\n    } else if (selectedPrediction) {\n      submitBtn.disabled = true;\n      submitBtn.style.opacity = '0.7';\n      submitBtn.textContent = 'Enter amount';\n      submitBtn.style.background = '#3B82F6';\n    } else {\n      submitBtn.disabled = true;\n      submitBtn.style.opacity = '0.5';\n      submitBtn.textContent = 'Select Green or Red';\n      submitBtn.style.background = '#3B82F6';\n    }\n  }\n\n  greenBtn.addEventListener('click', () => {\n    selectedPrediction = 'green';\n    // Update button styles\n    greenBtn.style.background = '#09C285';\n    greenBtn.style.border = 'none';\n    greenBtn.style.color = 'white';\n    greenBtn.querySelector('svg').setAttribute('stroke', 'white');\n    greenBtn.querySelector('span').style.color = 'white';\n    // Reset red button\n    redBtn.style.background = 'rgba(255, 255, 255, 0.08)';\n    redBtn.style.border = '1px solid rgba(255, 77, 79, 0.4)';\n    redBtn.style.color = 'var(--color-text-primary)';\n    redBtn.querySelector('svg').setAttribute('stroke', '#FF4D4F');\n    redBtn.querySelector('span').style.color = '#FF4D4F';\n    updateSubmitButton();\n  });\n\n  redBtn.addEventListener('click', () => {\n    selectedPrediction = 'red';\n    // Update button styles\n    redBtn.style.background = '#FF4D4F';\n    redBtn.style.border = 'none';\n    redBtn.style.color = 'white';\n    redBtn.querySelector('svg').setAttribute('stroke', 'white');\n    redBtn.querySelector('span').style.color = 'white';\n    // Reset green button\n    greenBtn.style.background = 'rgba(255, 255, 255, 0.08)';\n    greenBtn.style.border = '1px solid rgba(9, 194, 133, 0.4)';\n    greenBtn.style.color = 'var(--color-text-primary)';\n    greenBtn.querySelector('svg').setAttribute('stroke', '#09C285');\n    greenBtn.querySelector('span').style.color = '#09C285';\n    updateSubmitButton();\n  });\n\n  // Wager input change\n  wagerInput.addEventListener('input', updateSubmitButton);\n\n  // Subscribe to wallet state changes to update balance\n  const balanceDisplay = card.querySelector('.balance-display');\n  let userBalance = 0; // Will be fetched from wallet in production\n\n  const updateBalance = async (state) => {\n    if (state.connected) {\n      // In production, fetch actual USDC balance here\n      // For now, use mock balance\n      userBalance = 0; // Replace with actual balance fetch\n      balanceDisplay.textContent = `/ $${userBalance.toFixed(2)}`;\n    } else {\n      userBalance = 0;\n      balanceDisplay.textContent = '';\n    }\n  };\n\n  // Initial balance update\n  updateBalance(walletManager.getState());\n\n  // Subscribe to wallet changes\n  const unsubscribeWallet = walletManager.subscribe(updateBalance);\n\n  // Store unsubscribe for cleanup\n  activeSubscriptions.push(unsubscribeWallet);\n\n  // Quick amount buttons\n  card.querySelectorAll('.quick-amount-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      const amount = btn.dataset.amount;\n      if (amount === 'max') {\n        if (!walletManager.getState().connected) {\n          alert('Please connect your wallet first!');\n          return;\n        }\n        wagerInput.value = userBalance || 0;\n      } else {\n        const currentVal = parseFloat(wagerInput.value) || 0;\n        wagerInput.value = currentVal + parseInt(amount);\n      }\n      updateSubmitButton();\n    });\n  });\n\n  // Submit button\n  submitBtn.addEventListener('click', () => {\n    if (selectedPrediction && parseFloat(wagerInput.value) > 0) {\n      const wagerAmount = parseFloat(wagerInput.value);\n      submitPrediction(token.symbol, selectedPrediction, token.name, timeframeMinutes, wagerAmount, submitBtn);\n    }\n  });\n\n  // RESTORE ACTIVE BET STATE (If returning to page)\n  const predictionKey = `${token.symbol}-${timeframeMinutes}`;\n  if (activePredictions.has(predictionKey)) {\n    const existingBet = activePredictions.get(predictionKey);\n    // Bind new button to existing bet\n    existingBet.button = submitBtn;\n\n    // Disable inputs\n    submitBtn.disabled = true;\n    greenBtn.style.opacity = '0.5';\n    redBtn.style.opacity = '0.5';\n    greenBtn.style.pointerEvents = 'none';\n    redBtn.style.pointerEvents = 'none';\n    wagerInput.disabled = true;\n\n    // Determine state\n    // If timer is running -> Active\n    if (existingBet.timerInterval) {\n      // Button style will be updated by next tick of updateTimer\n      // But set immediate placeholder\n      submitBtn.innerHTML = 'Restoring...';\n    }\n    // If timer cleared but in map -> Likely Won (waiting for claim)\n    else {\n      // Re-run resolve check logic or force Claim state?\n      // Since resolveBet clears timer and sets button styles, we need to re-apply \"Claim\" style if winner\n      // We can infer Winner from stored data? Or just check if we can \"re-resolve\"?\n      // resolveBet requires candle. We don't have it handy here easily.\n      // But we can store \"status\" in predictionData.\n      if (existingBet.customStatus === 'won') {\n        submitBtn.innerHTML = ' Claim Reward';\n        submitBtn.style.background = 'linear-gradient(135deg, #FFD700 0%, #FFA500 100%)';\n        submitBtn.style.color = '#000';\n        submitBtn.disabled = false;\n        submitBtn.onclick = () => claimReward(token.symbol, existingBet, submitBtn, predictionKey);\n      } else if (existingBet.customStatus === 'lost') {\n        submitBtn.innerHTML = ' Lost';\n        submitBtn.style.background = '#666';\n      }\n    }\n  }\n\n  return card;\n}\n\nfunction generateRealCandleChart(candles) {\n  if (!candles || candles.length === 0) {\n    return '<div style=\"color: var(--color-text-muted); font-size: 0.875rem; width: 100%; text-align: center; display: flex; align-items: center; justify-content: center;\">Loading candles...</div>';\n  }\n\n  // Find price range for scaling\n  const allPrices = candles.flatMap(c => [c.high, c.low]);\n  const minPrice = Math.min(...allPrices);\n  const maxPrice = Math.max(...allPrices);\n  const priceRange = maxPrice - minPrice || 1;\n\n  const chartHeight = 110; // pixels (for prominent chart)\n  const candleWidth = Math.max(4, Math.floor(120 / candles.length));\n\n  return candles.map((candle, index) => {\n    const isGreen = candle.isGreen;\n    const color = isGreen ? '#09C285' : '#FF4D4F';\n\n    // Calculate positions (inverted because CSS starts from top)\n    const highY = chartHeight - ((candle.high - minPrice) / priceRange * chartHeight);\n    const lowY = chartHeight - ((candle.low - minPrice) / priceRange * chartHeight);\n    const openY = chartHeight - ((candle.open - minPrice) / priceRange * chartHeight);\n    const closeY = chartHeight - ((candle.close - minPrice) / priceRange * chartHeight);\n\n    const wickTop = Math.min(highY, Math.min(openY, closeY));\n    const wickBottom = lowY;\n    const wickHeight = wickBottom - wickTop;\n\n    const bodyTop = Math.min(openY, closeY);\n    const bodyHeight = Math.max(2, Math.abs(closeY - openY));\n\n    const isLast = index === candles.length - 1;\n    const opacity = 0.5 + (index / candles.length * 0.5);\n\n    return `\n      <div class=\"candle\" data-index=\"${index}\" style=\"\n        position: relative;\n        width: ${candleWidth}px;\n        height: 100%;\n        ${isLast ? 'animation: candlePulse 1s infinite;' : ''}\n      \">\n        <!-- Wick -->\n        <div style=\"\n          position: absolute;\n          left: 50%;\n          transform: translateX(-50%);\n          top: ${wickTop}px;\n          width: 1px;\n          height: ${wickHeight}px;\n          background: ${color};\n          opacity: ${opacity};\n        \"></div>\n        <!-- Body -->\n        <div style=\"\n          position: absolute;\n          left: 0;\n          top: ${bodyTop}px;\n          width: 100%;\n          height: ${bodyHeight}px;\n          background: ${color};\n          border-radius: 1px;\n          opacity: ${opacity};\n          ${isLast ? 'box-shadow: 0 0 8px ' + color + ';' : ''}\n        \"></div>\n      </div>\n    `;\n  }).join('');\n}\n\nfunction updateCardWithCandle(card, candle, symbol) {\n  // Update live price\n  const priceEl = card.querySelector('.live-price');\n  if (priceEl) {\n    const oldPrice = parseFloat(priceEl.textContent.replace(/[^0-9.-]/g, ''));\n    const newPrice = candle.close;\n\n    priceEl.textContent = formatCurrency(newPrice);\n\n    // Flash animation on price change\n    if (oldPrice !== newPrice) {\n      priceEl.style.transition = 'color 0.3s';\n      priceEl.style.color = newPrice > oldPrice ? '#09C285' : '#FF4D4F';\n      setTimeout(() => {\n        priceEl.style.color = '';\n      }, 500);\n    }\n  }\n\n  // Update current candle indicator (pulsing dot + text)\n  const statusEl = card.querySelector('.current-candle-status');\n  const indicatorEl = card.querySelector('.current-candle-indicator');\n  const dotEl = card.querySelector('.candle-pulse-dot');\n\n  if (statusEl) {\n    statusEl.textContent = candle.isGreen ? 'GREEN' : 'RED';\n    statusEl.style.color = candle.isGreen ? '#09C285' : '#FF4D4F';\n  }\n  if (indicatorEl) {\n    indicatorEl.style.background = candle.isGreen\n      ? 'rgba(9, 194, 133, 0.15)'\n      : 'rgba(255, 77, 79, 0.15)';\n  }\n  if (dotEl) {\n    dotEl.style.background = candle.isGreen ? '#09C285' : '#FF4D4F';\n  }\n\n  // Update the candle chart in real-time\n  const storedCandles = candleDataStore.get(symbol);\n  if (storedCandles && storedCandles.length > 0) {\n    // Find if this candle already exists (by openTime) or is a new one\n    const lastStoredCandle = storedCandles[storedCandles.length - 1];\n\n    if (candle.openTime === lastStoredCandle.openTime) {\n      // Update the existing last candle with new data\n      storedCandles[storedCandles.length - 1] = {\n        ...lastStoredCandle,\n        high: Math.max(lastStoredCandle.high, candle.high),\n        low: Math.min(lastStoredCandle.low, candle.low),\n        close: candle.close,\n        isGreen: candle.isGreen,\n        isClosed: candle.isClosed,\n      };\n    } else if (candle.isClosed || candle.openTime > lastStoredCandle.openTime) {\n      // New candle started - add it and remove the oldest\n      storedCandles.push({\n        openTime: candle.openTime,\n        open: candle.open,\n        high: candle.high,\n        low: candle.low,\n        close: candle.close,\n        closeTime: candle.closeTime,\n        isGreen: candle.isGreen,\n        isClosed: candle.isClosed,\n      });\n\n      // Keep only last 15 candles\n      if (storedCandles.length > 15) {\n        storedCandles.shift();\n      }\n    }\n\n    // Re-render the chart with updated candles\n    const chartEl = card.querySelector('.candle-chart');\n    if (chartEl) {\n      chartEl.innerHTML = generateRealCandleChart(storedCandles);\n    }\n  }\n\n  // Log when candle closes\n  if (candle.isClosed) {\n    console.log(`Candle closed for ${symbol}:`, candle.isGreen ? 'GREEN' : 'RED');\n  }\n}\n\n// Helper to check bet result (called by dedicated subscription)\nfunction resolveBet(key, symbol, closedCandle, predictionData) {\n  const { prediction, targetCandleOpenTime, unsub } = predictionData;\n\n  // Use dynamic button ref\n  const button = predictionData.button;\n\n  // Check if this is the candle we bet on\n  if (closedCandle.openTime !== targetCandleOpenTime) return;\n\n  // Cleanup subscription\n  if (unsub) unsub();\n\n  // Clear timer\n  if (predictionData.timerInterval) {\n    clearInterval(predictionData.timerInterval);\n    predictionData.timerInterval = null; // Mark as stopped\n    const tracker = document.getElementById(`candle-tracker-${symbol}`);\n    if (tracker) tracker.remove();\n  }\n\n  const isGreen = closedCandle.close > closedCandle.open;\n  const userPredictedGreen = prediction === 'green';\n  const isWinner = isGreen === userPredictedGreen;\n\n  // Store status for reconnection\n  predictionData.customStatus = isWinner ? 'won' : 'lost';\n\n  // Check if button is still in DOM (user might have navigated)\n  const isButtonActive = button && document.body.contains(button);\n\n  if (isWinner) {\n    if (isButtonActive) {\n      button.innerHTML = ' Claim Reward';\n      button.style.background = 'linear-gradient(135deg, #FFD700 0%, #FFA500 100%)';\n      button.style.color = '#000';\n      button.disabled = false;\n      button.onclick = () => claimReward(symbol, predictionData, button, key);\n      triggerConfetti(button);\n    } else {\n      // Fallback notification?\n      console.log(\"User won but button missing - waiting for reconnect\");\n    }\n  } else {\n    if (isButtonActive) {\n      button.innerHTML = ' Lost';\n      button.style.background = '#666';\n      button.style.opacity = '0.7';\n      setTimeout(() => {\n        // Only reset if still showing lost (user didn't leave)\n        if (document.body.contains(button)) {\n          resetPredictionButton(button);\n          activePredictions.delete(key);\n          saveActiveBets();\n        }\n      }, 3000);\n    } else {\n      activePredictions.delete(key);\n      saveActiveBets(); // Save removal\n    }\n  }\n}\n\nasync function submitPrediction(tokenSymbol, prediction, tokenName, timeframe, wagerAmount, button) {\n  const state = walletManager.getState();\n  if (!state.connected) {\n    alert('Please connect your wallet first!');\n    return;\n  }\n\n  // Check if there's any active prediction for this token (regardless of timeframe)\n  // \"once the bet starts the user should not be able to place bets on the same coin\"\n  for (const key of activePredictions.keys()) {\n    if (key.startsWith(`${tokenSymbol}-`)) {\n      alert(`You already have an active prediction for ${tokenSymbol}. Please wait for it to settle.`);\n      return;\n    }\n  }\n\n  // Construct key for this specific prediction\n  const predictionKey = `${tokenSymbol}-${timeframe}`;\n\n  // Validate wager amount\n  if (!wagerAmount || wagerAmount <= 0) {\n    alert('Please enter a valid wager amount!');\n    return;\n  }\n\n  if (wagerAmount < 0.01) {\n    alert('Minimum wager is 0.01 USDT');\n    return;\n  }\n\n  button.disabled = true;\n  button.innerHTML = '<div class=\"loading\"></div>';\n\n  try {\n    const result = await submitCandlePrediction({\n      token: tokenSymbol,\n      isGreen: prediction === 'green',\n      timeframe,\n      wagerAmount,\n    });\n\n    // Calculate when the next candle will close\n    const timeframeMs = timeframe * 60 * 1000;\n    let currentCandleStart;\n\n    // Use actual latest candle time from store to avoid local clock drift\n    const storedCandles = candleDataStore.get(tokenSymbol);\n    if (storedCandles && storedCandles.length > 0) {\n      currentCandleStart = storedCandles[storedCandles.length - 1].openTime;\n    } else {\n      const now = Date.now();\n      currentCandleStart = Math.floor(now / timeframeMs) * timeframeMs;\n    }\n    const nextCandleEnd = currentCandleStart + (timeframeMs * 2); // Next candle's close time\n\n    // Store the prediction\n    const predictionData = {\n      prediction,\n      wagerAmount,\n      targetCandleOpenTime: currentCandleStart + timeframeMs, // The candle we're betting on\n      button,\n      timerInterval: null,\n      predictionId: result.predictionId,\n      // Capture rough entry price reference (last known close) for display\n      entryPriceRef: storedCandles && storedCandles.length > 0 ? storedCandles[storedCandles.length - 1].close : 0,\n      symbol: tokenSymbol,    // Store for persistence\n      timeframe: timeframe,   // Store for persistence\n      key: predictionKey      // Store for persistence\n    };\n\n    // Start countdown timer\n    // Start countdown timer with tracker management\n    const updateTimer = () => {\n      // Always get FRESH button ref from data object (in case replaced by restore)\n      const currentBtn = predictionData.button;\n\n      const now = Date.now();\n      const candleStartTime = predictionData.targetCandleOpenTime;\n      const candleEndTime = candleStartTime + timeframeMs;\n\n      // Check current page\n      const currentPath = window.location.hash.replace('#', '') || '/';\n      const isOnPredictPage = currentPath === '/predict-candle';\n\n      if (now >= candleEndTime) {\n        clearInterval(predictionData.timerInterval);\n        if (currentBtn && document.body.contains(currentBtn)) currentBtn.innerHTML = ' Checking...';\n        // Remove tracker if exists\n        const tracker = document.getElementById(`candle-tracker-${tokenSymbol}`);\n        if (tracker) tracker.remove();\n\n        // Final logic is handled by subscription/checkPastBet, but if subs fail, timer ending is just visual\n        return;\n      }\n\n      // Determine phase\n      const isPending = now < candleStartTime;\n      const targetTime = isPending ? candleStartTime : candleEndTime;\n      const remaining = Math.max(0, targetTime - now);\n\n      const hours = Math.floor(remaining / 3600000);\n      const minutes = Math.floor((remaining % 3600000) / 60000);\n      const seconds = Math.floor((remaining % 60000) / 1000);\n\n      let timeString = '';\n      if (hours > 0) {\n        timeString = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n      } else {\n        timeString = `${minutes}:${seconds.toString().padStart(2, '0')}`;\n      }\n\n      // Update inline button\n      if (isOnPredictPage && currentBtn && document.body.contains(currentBtn)) {\n        // Fetch current price for detailed button\n        const stored = candleDataStore.get(tokenSymbol);\n        const currentPrice = (stored && stored.length > 0) ? formatCurrency(stored[stored.length - 1].close) : '';\n\n        if (isPending) {\n          currentBtn.innerHTML = `<span style=\"opacity:0.8;\">Starts in</span> ${timeString}`;\n          currentBtn.style.background = '#3B82F6';\n        } else {\n          // Detailed Live Status\n          currentBtn.innerHTML = `\n              <div style=\"display: flex; align-items: center; justify-content: center; gap: 8px;\">\n                <span>Live: ${timeString}</span>\n                <span style=\"opacity: 0.6;\">|</span>\n                <span>${currentPrice}</span>\n              </div>\n            `;\n          currentBtn.style.background = prediction === 'green' ? '#09C285' : '#FF4D4F';\n        }\n      }\n\n      // Render shared tracker (Detailed OFF on page, Compact off page)\n      // User requested \"I don't want this\" regarding the detailed window on main page.\n      // So on Main Page: Show NOTHING extra (just inline button).\n      // On Off Page: Show Compact Widget.\n\n      if (!isOnPredictPage) {\n        const container = getTrackerContainer();\n        const trackerMode = 'compact';\n\n        // Off-page customized text\n        const label = isPending ? 'Starting in...' : 'Your candle prediction is Live';\n\n        updateTrackerItem(container, tokenSymbol, prediction, remaining, label, trackerMode, predictionData);\n      } else {\n        // If on page, ensure no tracker item exists for this token\n        const item = document.getElementById(`tracker-item-${tokenSymbol}`);\n        if (item) item.remove();\n      }\n    };\n\n    predictionData.timerInterval = setInterval(updateTimer, 1000);\n    updateTimer(); // Initial update\n\n    // Add navigation listener to update visibility immediately\n    window.addEventListener('hashchange', updateTimer);\n\n    // Subscribe to updates for this specific timeframe to track result\n    const interval = TIMEFRAME_MAP[timeframe];\n    const unsub = subscribeToCandleUpdates(tokenSymbol, interval, (candle) => {\n      if (candle.isClosed) {\n        resolveBet(predictionKey, tokenSymbol, candle, predictionData);\n      }\n    });\n    predictionData.unsub = unsub;\n\n    activePredictions.set(predictionKey, predictionData);\n    saveActiveBets(); // Save to LS\n\n  } catch (error) {\n    button.disabled = false;\n    button.innerHTML = 'Select Green or Red';\n    button.style.background = '#3B82F6';\n    alert(` Error: ${error.message}`);\n  }\n}\n\nfunction addCandleTrackerStyles() {\n  const styleId = 'candle-tracker-styles';\n  if (document.getElementById(styleId)) return;\n\n  const style = document.createElement('style');\n  style.id = styleId;\n  style.textContent = `\n        .candle-tracker-card {\n            position: fixed;\n            bottom: 24px;\n            right: 24px;\n            z-index: 1000;\n            \n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            gap: 16px;\n            \n            min-width: 220px;\n            padding: 12px 20px;\n            \n            background: rgba(15, 23, 42, 0.9);\n            backdrop-filter: blur(12px);\n            -webkit-backdrop-filter: blur(12px);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            border-radius: 12px;\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n            \n            cursor: pointer;\n            transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n            animation: fadeIn 0.3s ease-out;\n            color: white;\n            font-family: var(--font-primary);\n        }\n\n        .candle-tracker-card:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);\n            border-color: var(--color-primary);\n        }\n\n        .candle-tracker-card.pulse {\n            animation: candleTrackerPulse 2s infinite;\n        }\n\n        @keyframes candleTrackerPulse {\n          0% {\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n          }\n          50% {\n            box-shadow: 0 4px 25px rgba(9, 194, 133, 0.4);\n          }\n          100% {\n            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n          }\n        }\n    `;\n  document.head.appendChild(style);\n}\n\n// Shared Tracker Container\nfunction getTrackerContainer() {\n  let container = document.getElementById('active-bets-tracker-container');\n  if (!container) {\n    container = document.createElement('div');\n    container.id = 'active-bets-tracker-container';\n    container.style.cssText = `\n            position: fixed;\n            bottom: 24px;\n            right: 24px;\n            z-index: 10000;\n            display: flex;\n            flex-direction: column;\n            gap: 12px;\n            pointer-events: none; /* Let clicks pass through gaps */\n        `;\n    document.body.appendChild(container);\n  }\n  return container;\n}\n\nfunction updateTrackerItem(container, symbol, prediction, remainingMs, statusLabel, mode, predictionData) {\n  const itemId = `tracker-item-${symbol}`;\n  let item = document.getElementById(itemId);\n\n  // Create if missing\n  if (!item) {\n    item = document.createElement('div');\n    item.id = itemId;\n    item.style.cssText = `\n            background: rgba(15, 23, 42, 0.95);\n            backdrop-filter: blur(12px);\n            border: 1px solid rgba(255, 255, 255, 0.1);\n            border-radius: 12px;\n            box-shadow: 0 4px 20px rgba(0,0,0,0.4);\n            color: white;\n            font-family: var(--font-primary);\n            overflow: hidden;\n            pointer-events: auto;\n            transition: all 0.3s ease;\n            animation: slideInRight 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n            min-width: 260px;\n        `;\n    // Navigate on click\n    item.addEventListener('click', () => {\n      if (window.location.hash !== '#/predict-candle') {\n        window.location.hash = '#/predict-candle';\n      }\n    });\n\n    // Inject keyframes if generic (assuming common CSS or add here)\n    // ...\n\n    container.appendChild(item);\n  }\n\n  const hours = Math.floor(remainingMs / 3600000);\n  const minutes = Math.floor((remainingMs % 3600000) / 60000);\n  const seconds = Math.floor((remainingMs % 60000) / 1000);\n\n  let timeDisplay = '';\n  if (hours > 0) {\n    timeDisplay = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  } else {\n    timeDisplay = `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  }\n\n  const color = prediction === 'green' ? '#09C285' : '#FF4D4F';\n  const arrow = prediction === 'green' ? '' : '';\n\n  // Get latest price for detailed view\n  let currentPrice = '...';\n  let pnlClass = '';\n  if (mode === 'detailed') {\n    const stored = candleDataStore.get(symbol);\n    if (stored && stored.length > 0) {\n      const price = stored[stored.length - 1].close;\n      currentPrice = formatCurrency(price);\n      // Rough PnL color\n      // If Green prediction, Price > Entry? Wait, entry entryPriceRef is OLD close.\n      // Real entry is Open of target candle. If we are Live, we might retrieve it?\n      // But let's just use current candle color from store?\n      // If stored[last].isGreen && prediction=='green' -> Winning?\n      const isWinning = (prediction === 'green' && stored[stored.length - 1].isGreen) ||\n        (prediction === 'red' && !stored[stored.length - 1].isGreen);\n      pnlClass = isWinning ? 'text-green-400' : 'text-red-400';\n    }\n  }\n\n  if (mode === 'detailed') {\n    item.innerHTML = `\n            <div style=\"padding: 12px 16px; border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; justify-content: space-between; align-items: center;\">\n                <div style=\"font-weight: 700; display: flex; align-items: center; gap: 8px;\">\n                    ${symbol} <span style=\"font-size: 0.8rem; background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px;\">${statusLabel}</span>\n                </div>\n                <div style=\"font-family: monospace; font-weight: 700;\">${timeDisplay}</div>\n            </div>\n            <div style=\"padding: 12px 16px; display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem;\">\n                <div style=\"display: flex; flex-direction: column; gap: 4px;\">\n                    <span style=\"color: rgba(255,255,255,0.6); font-size: 0.75rem;\">Prediction</span>\n                    <span style=\"color: ${color}; font-weight: 700;\">${arrow} ${prediction.toUpperCase()}</span>\n                </div>\n                <div style=\"display: flex; flex-direction: column; gap: 4px; text-align: right;\">\n                    <span style=\"color: rgba(255,255,255,0.6); font-size: 0.75rem;\">Current Price</span>\n                    <span style=\"font-weight: 700;\">${currentPrice}</span>\n                </div>\n            </div>\n        `;\n    item.style.padding = '0'; // Reset padding for detailed card layout\n    item.style.minWidth = '260px';\n  } else {\n    // Compact Mode (Notification Style - Matching Pending Dream Team Widget)\n    item.innerHTML = `\n            <div style=\"display: flex; align-items: center; justify-content: center; color: ${color}; margin-right: 12px;\">\n               <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                 <polyline points=\"22 7 13.5 15.5 8.5 10.5 2 17\"></polyline>\n                 <polyline points=\"16 7 22 7 22 13\"></polyline>\n               </svg>\n            </div>\n            <span style=\"font-family: var(--font-primary); font-weight: 600; font-size: 0.95rem; color: #fff; margin-right: 12px; white-space: nowrap;\">${statusLabel}</span>\n            <span style=\"\n                display: flex; align-items: center; justify-content: center;\n                min-width: 54px; height: 26px; padding: 0 8px;\n                background: ${prediction === 'green' ? '#09C285' : '#FF4D4F'};\n                color: white; border-radius: 6px;\n                font-size: 0.85rem; font-weight: 700;\n                box-shadow: 0 2px 4px rgba(0,0,0,0.2);\n                font-family: monospace;\n            \">${timeDisplay}</span>\n        `;\n    // Override styling to match widget\n    item.style.padding = '12px 20px';\n    item.style.minWidth = 'auto';\n    item.style.display = 'flex';\n    item.style.alignItems = 'center';\n    item.style.flexDirection = 'row';\n  }\n}\n\n// Check prediction result when candle closes\n// function checkPredictionResult(symbol, closedCandle) { ... } removed in favor of resolveBet\n\n// Claim reward function\nfunction claimReward(symbol, predictionData, button, key) {\n  button.disabled = true;\n  button.innerHTML = '<div class=\"loading\"></div>';\n\n  // Simulate claim (in production, this would call the smart contract)\n  setTimeout(() => {\n    const reward = (predictionData.wagerAmount * 1.9).toFixed(2); // 1.9x payout\n    alert(` Congratulations! You won $${reward} USDC!`);\n    resetPredictionButton(button);\n    if (key) activePredictions.delete(key);\n  }, 1500);\n}\n\n// Reset button to initial state\nfunction resetPredictionButton(button) {\n  button.innerHTML = 'Select Green or Red';\n  button.style.background = '#3B82F6';\n  button.style.color = 'white';\n  button.style.opacity = '0.5';\n  button.disabled = true;\n  button.onclick = null;\n}\n\n// Confetti celebration effect\nfunction triggerConfetti(button) {\n  const card = button.closest('.card');\n  if (!card) return;\n\n  // Create confetti container\n  const confettiContainer = document.createElement('div');\n  confettiContainer.style.cssText = `\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n    pointer-events: none;\n    z-index: 100;\n  `;\n  card.style.position = 'relative';\n  card.appendChild(confettiContainer);\n\n  // Confetti colors\n  const colors = ['#FFD700', '#FFA500', '#09C285', '#FF4D4F', '#3B82F6', '#FF69B4', '#00FFFF'];\n\n  // Create confetti particles\n  for (let i = 0; i < 50; i++) {\n    const confetti = document.createElement('div');\n    const color = colors[Math.floor(Math.random() * colors.length)];\n    const size = Math.random() * 8 + 4;\n    const left = Math.random() * 100;\n    const delay = Math.random() * 0.5;\n    const duration = Math.random() * 1 + 1.5;\n    const rotation = Math.random() * 360;\n    const xOffset = (Math.random() - 0.5) * 200;\n\n    confetti.style.cssText = `\n      position: absolute;\n      width: ${size}px;\n      height: ${size}px;\n      background: ${color};\n      left: ${left}%;\n      bottom: 20%;\n      border-radius: ${Math.random() > 0.5 ? '50%' : '2px'};\n      opacity: 1;\n      transform: rotate(${rotation}deg);\n      animation: confettiFall ${duration}s ease-out ${delay}s forwards;\n      --x-offset: ${xOffset}px;\n    `;\n    confettiContainer.appendChild(confetti);\n  }\n\n  // Remove confetti after animation\n  setTimeout(() => {\n    confettiContainer.remove();\n  }, 3000);\n}\n\n// Add candle button styles\nconst style = document.createElement('style');\nstyle.textContent = `\n  @keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.5; }\n  }\n\n  @keyframes candlePulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.7; }\n  }\n\n  @keyframes confettiFall {\n    0% {\n      transform: translateY(0) translateX(0) rotate(0deg) scale(1);\n      opacity: 1;\n    }\n    20% {\n      transform: translateY(-80px) translateX(var(--x-offset, 0)) rotate(180deg) scale(1.2);\n      opacity: 1;\n    }\n    100% {\n      transform: translateY(200px) translateX(var(--x-offset, 0)) rotate(720deg) scale(0.5);\n      opacity: 0;\n    }\n  }\n\n  /* Hide number input spinners */\n  .wager-input::-webkit-outer-spin-button,\n  .wager-input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n  }\n  .wager-input[type=number] {\n    -moz-appearance: textfield;\n  }\n\n  .timeframe-btn {\n    padding: 0.5rem 1.25rem;\n    background: var(--glass-bg);\n    border: 1px solid var(--glass-border);\n    border-radius: var(--radius-md);\n    color: var(--color-text-primary);\n    cursor: pointer;\n    transition: all var(--transition-fast);\n    font-family: var(--font-primary);\n    font-weight: 600;\n  }\n\n  .timeframe-btn:hover {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  .timeframe-btn.selected {\n    background: var(--gradient-blue);\n    border-color: transparent;\n    color: white;\n  }\n\n  .candle-btn {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0.5rem;\n    padding: 0.875rem;\n    border: none;\n    border-radius: var(--radius-md);\n    font-weight: 700;\n    font-size: 1rem;\n    cursor: pointer;\n    transition: all var(--transition-base);\n    font-family: var(--font-primary);\n  }\n\n  .candle-btn:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n  }\n\n  .green-btn {\n    background: var(--gradient-green);\n    color: white;\n  }\n\n  .green-btn:hover:not(:disabled) {\n    transform: translateY(-3px);\n    box-shadow: 0 6px 16px rgba(9, 194, 133, 0.4);\n  }\n\n  .red-btn {\n    background: linear-gradient(135deg, #FF4D4F 0%, #ff3336 100%);\n    color: white;\n  }\n\n  .red-btn:hover:not(:disabled) {\n    transform: translateY(-3px);\n    box-shadow: 0 6px 16px rgba(255, 77, 79, 0.4);\n  }\n\n  .candle-card {\n    backdrop-filter: blur(10px);\n    -webkit-backdrop-filter: blur(10px);\n  }\n\n  .candle-chart-container {\n    position: relative;\n    overflow: hidden;\n  }\n\n  .candle-chart .candle {\n    transition: transform 0.2s ease;\n  }\n\n  .candle-chart .candle:last-child {\n    animation: candlePulse 1s infinite;\n  }\n\n  .token-price-change.positive {\n    color: #09C285;\n  }\n\n  .token-price-change.negative {\n    color: #FF4D4F;\n  }\n`;\ndocument.head.appendChild(style);\n","// PvP Battle Game Component\n// 1v1 betting where users predict token direction (UP/DOWN)\n// Matchmaking: Platform finds opponents with opposite predictions\n\nimport { formatCurrency, formatPercentage, getPriceChangeClass } from '../../utils/formatters.js';\nimport {\n  fetchMultipleTickers,\n  subscribeToTickerUpdates,\n} from '../../services/candleService.js';\nimport walletManager from '../../wallet/walletManager.js';\n\n// Allowed tokens for PvP\nconst PVP_TOKENS = ['BTC', 'ETH', 'SOL', 'BNB', 'XRP', 'DOGE', 'ADA', 'AVAX', 'LINK', 'POL', 'DOT', 'PEPE'];\n\nconst BATTLE_DURATIONS = [\n  { label: '5m', value: 5 },\n  { label: '15m', value: 15 },\n  { label: '30m', value: 30 },\n  { label: '1h', value: 60 },\n  { label: '4h', value: 240 },\n  { label: '1D', value: 1440 },\n];\n\nconst EXPIRY_TIMES = [\n  { label: '10m', value: 10 },\n  { label: '30m', value: 30 },\n  { label: '1h', value: 60 },\n  { label: '4h', value: 240 },\n];\n\n// Token metadata (names and images)\nconst TOKEN_META = {\n  BTC: { name: 'Bitcoin', image: 'https://assets.coingecko.com/coins/images/1/small/bitcoin.png' },\n  ETH: { name: 'Ethereum', image: 'https://assets.coingecko.com/coins/images/279/small/ethereum.png' },\n  SOL: { name: 'Solana', image: 'https://assets.coingecko.com/coins/images/4128/small/solana.png' },\n  BNB: { name: 'BNB', image: 'https://assets.coingecko.com/coins/images/825/small/bnb-icon2_2x.png' },\n  XRP: { name: 'XRP', image: 'https://assets.coingecko.com/coins/images/44/small/xrp-symbol-white-128.png' },\n  DOGE: { name: 'Dogecoin', image: 'https://assets.coingecko.com/coins/images/5/small/dogecoin.png' },\n  ADA: { name: 'Cardano', image: 'https://assets.coingecko.com/coins/images/975/small/cardano.png' },\n  AVAX: { name: 'Avalanche', image: 'https://assets.coingecko.com/coins/images/12559/small/Avalanche_Circle_RedWhite_Trans.png' },\n  LINK: { name: 'Chainlink', image: 'https://assets.coingecko.com/coins/images/877/small/chainlink-new-logo.png' },\n  POL: { name: 'Polygon', image: 'https://assets.coingecko.com/coins/images/4713/small/polygon.png' },\n  DOT: { name: 'Polkadot', image: 'https://assets.coingecko.com/coins/images/12171/small/polkadot.png' },\n  PEPE: { name: 'Pepe', image: 'https://assets.coingecko.com/coins/images/29850/small/pepe-token.jpeg' },\n};\n\n// Max bet amount\nconst MAX_BET_AMOUNT = 10;\n\n// Duration for PvP battles (in minutes)\nconst PVP_DURATION_MINUTES = 5;\n\n// Store for open bets (simulating backend)\nlet openBets = [];\nlet myBets = [];\nlet activeBattles = [];\nlet tickerSubscriptions = [];\nlet currentSort = 'recent';\n\n// Selected state\nlet selectedToken = null;\nlet selectedDirection = null; // 'up' or 'down'\nlet betAmount = 5;\n\nexport function createPvPBattle() {\n  // Reset state on page load\n  selectedToken = null;\n  selectedDirection = null;\n  betAmount = 5;\n\n  const page = document.createElement('div');\n  page.className = 'pvp-battle-page';\n  page.style.cssText = `\n    display: flex;\n    height: calc(100vh - 64px);\n    overflow: hidden;\n  `;\n\n  // Main content (left side - token selection + bet slip)\n  const mainContent = document.createElement('div');\n  mainContent.id = 'pvp-main-content';\n  mainContent.style.cssText = `\n    flex: 1;\n    overflow-y: auto;\n    padding: var(--spacing-xl) var(--spacing-lg);\n    background: linear-gradient(135deg, rgba(9, 194, 133, 0.02) 0%, transparent 50%);\n  `;\n\n  // Header\n  const header = document.createElement('div');\n  header.style.cssText = 'margin-bottom: var(--spacing-xl); text-align: center;';\n  header.innerHTML = `\n    <div style=\"display: inline-flex; align-items: center; justify-content: center; gap: var(--spacing-md); margin-bottom: var(--spacing-sm);\">\n      <div style=\"width: 56px; height: 56px; background: linear-gradient(135deg, #09C285 0%, #07a371 100%); border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 8px 24px rgba(9, 194, 133, 0.3);\">\n        <svg width=\"28\" height=\"28\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n          <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/>\n          <path d=\"M21 3v5l-11 9l-4 4l-3 -3l4 -4l9 -11z\" />\n          <path d=\"M5 13l6 6\" />\n          <path d=\"M14.32 17.32l3.68 3.68l3 -3l-3.365 -3.365\" />\n          <path d=\"M10 5.5l-2 -2.5h-5v5l3 2.5\" />\n        </svg>\n      </div>\n      <h1 style=\"font-size: 2.5rem; margin: 0; background: linear-gradient(135deg, #F0F0F0 0%, #A0A0A0 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;\">\n        PvP Battle\n      </h1>\n    </div>\n    <p style=\"color: var(--color-text-secondary); font-size: 1.1rem; max-width: 500px; margin: 0 auto;\">\n      Predict <span style=\"color: #09C285; font-weight: 600;\">UP</span> or <span style=\"color: #EF4444; font-weight: 600;\">DOWN</span>. Find an opponent. <strong>Winner takes all!</strong>\n    </p>\n  `;\n  mainContent.appendChild(header);\n\n  // Grid Styles\n  const gridStyles = document.createElement('style');\n  gridStyles.textContent = `\n    #pvp-token-grid {\n      display: grid;\n      grid-template-columns: repeat(4, 1fr);\n      gap: 12px;\n      margin-bottom: var(--spacing-xl);\n      max-width: 900px;\n      margin-left: auto;\n      margin-right: auto;\n    }\n    @media (max-width: 800px) {\n      #pvp-token-grid {\n        grid-template-columns: repeat(3, 1fr);\n      }\n    }\n    @media (max-width: 600px) {\n      #pvp-token-grid {\n        grid-template-columns: repeat(2, 1fr);\n      }\n    }\n  `;\n  mainContent.appendChild(gridStyles);\n\n  // Token Grid container\n  const tokenGrid = document.createElement('div');\n  tokenGrid.id = 'pvp-token-grid';\n  mainContent.appendChild(tokenGrid);\n\n  // Backdrop for expanded card\n  const backdrop = document.createElement('div');\n  backdrop.id = 'pvp-backdrop';\n  backdrop.style.cssText = `\n    position: fixed;\n    inset: 0;\n    background: rgba(0, 0, 0, 0.6);\n    backdrop-filter: blur(4px);\n    z-index: 999;\n    opacity: 0;\n    pointer-events: none;\n    transition: opacity 0.3s;\n  `;\n  backdrop.addEventListener('click', () => {\n    document.querySelectorAll('.pvp-token-card.expanded').forEach(card => collapseCard(card));\n  });\n  page.appendChild(backdrop);\n\n  // Betting Modal (Dedicated overlay)\n  const bettingModal = document.createElement('div');\n  bettingModal.id = 'pvp-betting-modal';\n  bettingModal.style.cssText = `\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) scale(0.9);\n    width: 90%;\n    max-width: 360px;\n    background: rgba(15, 23, 42, 0.95);\n    backdrop-filter: blur(16px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    border-radius: 20px;\n    padding: 24px;\n    z-index: 1000;\n    opacity: 0;\n    pointer-events: none;\n    transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);\n    box-shadow: 0 20px 50px rgba(0,0,0,0.5);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 16px;\n  `;\n  page.appendChild(bettingModal);\n\n  // Close modal on backdrop click\n  backdrop.addEventListener('click', () => {\n    closeBettingModal();\n  });\n\n  page.appendChild(mainContent);\n\n  // Open Bets Panel (right side - RADAR STYLE)\n  const openBetsPanel = document.createElement('div');\n  openBetsPanel.id = 'open-bets-panel';\n  openBetsPanel.style.cssText = `\n    width: 380px;\n    height: calc(100vh - 64px);\n    background: linear-gradient(180deg, rgba(5, 15, 25, 0.98) 0%, rgba(10, 20, 30, 0.95) 100%);\n    backdrop-filter: blur(16px);\n    -webkit-backdrop-filter: blur(16px);\n    border-left: 1px solid rgba(9, 194, 133, 0.3);\n    padding: var(--spacing-lg);\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n  `;\n\n  openBetsPanel.innerHTML = `\n    <style>\n      @keyframes radar-sweep {\n        from { transform: rotate(0deg); }\n        to { transform: rotate(360deg); }\n      }\n      @keyframes blip-pulse {\n        0%, 100% { transform: scale(1); opacity: 1; }\n        50% { transform: scale(1.2); opacity: 0.8; }\n      }\n      @keyframes blip-appear {\n        from { transform: scale(0); opacity: 0; }\n        to { transform: scale(1); opacity: 1; }\n      }\n      .radar-panel-title {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding-bottom: var(--spacing-sm);\n        margin-bottom: var(--spacing-sm);\n        border-bottom: 1px solid rgba(9, 194, 133, 0.2);\n      }\n      .radar-panel-title h3 {\n        font-size: 0.9rem;\n        font-weight: 700;\n        color: #09C285;\n        text-transform: uppercase;\n        letter-spacing: 1px;\n        margin: 0;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      .radar-container {\n        position: relative;\n        width: 150px;\n        height: 150px;\n        margin: 0 auto var(--spacing-sm);\n      }\n      .radar-bg {\n        position: absolute;\n        inset: 0;\n        border-radius: 50%;\n        background: radial-gradient(circle, rgba(9, 194, 133, 0.05) 0%, rgba(9, 194, 133, 0.02) 50%, transparent 70%);\n        border: 1px solid rgba(9, 194, 133, 0.3);\n      }\n      .radar-grid {\n        position: absolute;\n        inset: 0;\n        border-radius: 50%;\n      }\n      .radar-ring {\n        position: absolute;\n        border: 1px solid rgba(9, 194, 133, 0.12);\n        border-radius: 50%;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n      }\n      .radar-line {\n        position: absolute;\n        width: 1px;\n        height: 100%;\n        left: 50%;\n        top: 0;\n        background: rgba(9, 194, 133, 0.08);\n      }\n      .radar-sweep {\n        position: absolute;\n        inset: 0;\n        border-radius: 50%;\n        background: conic-gradient(from 0deg, transparent 0deg, rgba(9, 194, 133, 0.35) 25deg, transparent 50deg);\n        animation: radar-sweep 3s linear infinite;\n      }\n      .radar-center {\n        position: absolute;\n        width: 6px;\n        height: 6px;\n        background: #09C285;\n        border-radius: 50%;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n        box-shadow: 0 0 15px rgba(9, 194, 133, 0.8);\n      }\n      .radar-blip {\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        border-radius: 50%;\n        transform: translate(-50%, -50%);\n        animation: blip-pulse 2s ease-in-out infinite, blip-appear 0.3s ease-out;\n        cursor: pointer;\n        transition: all 0.2s;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 6px;\n        font-weight: bold;\n        color: white;\n      }\n      .radar-blip:hover {\n        transform: translate(-50%, -50%) scale(1.4);\n        z-index: 10;\n      }\n      .radar-blip.long {\n        background: rgba(9, 194, 133, 0.9);\n        box-shadow: 0 0 8px rgba(9, 194, 133, 0.6);\n      }\n      .radar-blip.short {\n        background: rgba(239, 68, 68, 0.9);\n        box-shadow: 0 0 8px rgba(239, 68, 68, 0.6);\n      }\n      .radar-legend {\n        display: flex;\n        justify-content: center;\n        gap: var(--spacing-md);\n        font-size: 0.65rem;\n        margin-bottom: var(--spacing-sm);\n        color: var(--color-text-muted);\n      }\n      .legend-item {\n        display: flex;\n        align-items: center;\n        gap: 4px;\n      }\n      .legend-dot {\n        width: 6px;\n        height: 6px;\n        border-radius: 50%;\n      }\n      .legend-dot.long { background: #09C285; }\n      .legend-dot.short { background: #EF4444; }\n      .signals-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 6px 10px;\n        background: rgba(9, 194, 133, 0.08);\n        border-radius: 6px;\n        border: 1px solid rgba(9, 194, 133, 0.15);\n        margin-bottom: var(--spacing-xs);\n      }\n      .signals-header span {\n        font-size: 0.75rem;\n        font-weight: 600;\n        color: var(--color-text-secondary);\n      }\n      #open-bets-list {\n        flex: 1;\n        overflow-y: auto;\n        display: flex;\n        flex-direction: column;\n        gap: 6px;\n        padding-right: 4px;\n      }\n      #open-bets-list::-webkit-scrollbar {\n        width: 4px;\n      }\n      #open-bets-list::-webkit-scrollbar-track {\n        background: rgba(255,255,255,0.05);\n        border-radius: 2px;\n      }\n      #open-bets-list::-webkit-scrollbar-thumb {\n        background: rgba(9, 194, 133, 0.3);\n        border-radius: 2px;\n      }\n      #open-bets-list::-webkit-scrollbar-thumb:hover {\n        background: rgba(9, 194, 133, 0.5);\n      }\n    </style>\n    \n    <div class=\"radar-panel-title\">\n      <h3> Live Bet Radar</h3>\n      <span id=\"open-bets-count\" style=\"background: linear-gradient(135deg, #09C285 0%, #07a371 100%); color: white; border-radius: 50%; width: 22px; height: 22px; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; font-weight: 700;\">0</span>\n    </div>\n    \n    <div class=\"radar-container\">\n      <div class=\"radar-bg\"></div>\n      <div class=\"radar-grid\">\n        <div class=\"radar-ring\" style=\"width: 33%; height: 33%;\"></div>\n        <div class=\"radar-ring\" style=\"width: 66%; height: 66%;\"></div>\n        <div class=\"radar-ring\" style=\"width: 100%; height: 100%;\"></div>\n        <div class=\"radar-line\" style=\"transform: translateX(-50%) rotate(0deg);\"></div>\n        <div class=\"radar-line\" style=\"transform: translateX(-50%) rotate(45deg);\"></div>\n        <div class=\"radar-line\" style=\"transform: translateX(-50%) rotate(90deg);\"></div>\n        <div class=\"radar-line\" style=\"transform: translateX(-50%) rotate(135deg);\"></div>\n      </div>\n      <div class=\"radar-sweep\"></div>\n      <div class=\"radar-center\"></div>\n      <div id=\"radar-blips\"></div>\n    </div>\n    \n    <div class=\"radar-legend\">\n      <div class=\"legend-item\">\n        <div class=\"legend-dot long\"></div>\n        <span>UP</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-dot short\"></div>\n        <span>DOWN</span>\n      </div>\n    </div>\n    \n    <div class=\"signals-header\" style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,0.05);\">\n      <span style=\"font-weight: 700; color: var(--color-text-primary);\">Active Signals</span>\n      <select id=\"bets-sort-select\" style=\"\n        background: rgba(0,0,0,0.3);\n        border: 1px solid rgba(255,255,255,0.1);\n        color: var(--color-text-secondary);\n        font-size: 0.75rem;\n        border-radius: 6px;\n        padding: 4px 8px;\n        outline: none;\n        cursor: pointer;\n      \">\n        <option value=\"recent\">Recent</option>\n        <option value=\"long\">Up Only</option>\n        <option value=\"short\">Down Only</option>\n      </select>\n    </div>\n    \n    <div id=\"open-bets-list\" style=\"\n        flex: 1; \n        overflow-y: auto; \n        padding-right: 4px; \n        display: flex; \n        flex-direction: column; \n        gap: 8px;\n        min-height: 0;\n    \"></div>\n\n    <div id=\"my-bets-footer\" style=\"\n      margin-top: auto;\n      padding-top: var(--spacing-md);\n      border-top: 1px solid rgba(9, 194, 133, 0.2);\n    \">\n      <div style=\"font-size: 0.75rem; font-weight: 700; color: var(--color-text-secondary); margin-bottom: 8px; display: flex; align-items: center; gap: 6px;\">\n        <span style=\"width: 6px; height: 6px; background: #3B82F6; border-radius: 50%;\"></span>\n        YOUR ACTIVE BETS\n      </div>\n      <div id=\"my-bets-list\" style=\"display: flex; flex-direction: column; gap: 6px; max-height: 150px; overflow-y: auto;\"></div>\n    </div>\n  `;\n\n  page.appendChild(openBetsPanel);\n\n  // Add Accept Match Modal\n  const acceptModal = document.createElement('div');\n  acceptModal.id = 'accept-match-modal';\n  acceptModal.style.cssText = `\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) scale(0.9);\n    width: 90%;\n    max-width: 380px;\n    background: rgba(15, 23, 42, 0.95);\n    backdrop-filter: blur(16px);\n    border: 1px solid rgba(255, 255, 255, 0.1);\n    border-radius: 20px;\n    padding: 24px;\n    z-index: 1001;\n    opacity: 0;\n    pointer-events: none;\n    transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);\n    box-shadow: 0 20px 50px rgba(0,0,0,0.5);\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n  `;\n  page.appendChild(acceptModal);\n\n  // Add Cancel Match Modal\n  const cancelModal = document.createElement('div');\n  cancelModal.id = 'cancel-match-modal';\n  cancelModal.style.cssText = `\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%) scale(0.9);\n    width: 90%;\n    max-width: 340px;\n    background: rgba(15, 23, 42, 0.95);\n    backdrop-filter: blur(16px);\n    border: 1px solid rgba(239, 68, 68, 0.3);\n    border-radius: 20px;\n    padding: 24px;\n    z-index: 1002;\n    opacity: 0;\n    pointer-events: none;\n    transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);\n    box-shadow: 0 20px 50px rgba(0,0,0,0.5);\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    text-align: center;\n  `;\n  page.appendChild(cancelModal);\n\n  // Add Sort Listener\n  const sortSelect = openBetsPanel.querySelector('#bets-sort-select');\n  if (sortSelect) {\n    sortSelect.addEventListener('change', (e) => {\n      currentSort = e.target.value;\n      renderOpenBets();\n    });\n  }\n\n  // Load tokens\n  loadPvPTokens(tokenGrid);\n\n  // Start expiry check\n  const expiryInterval = setInterval(checkExpiredBets, 10000);\n  tickerSubscriptions.push(() => clearInterval(expiryInterval));\n\n  // Load initial open bets (simulated)\n  loadOpenBets();\n\n  // Cleanup on page unload\n  page.addEventListener('DOMNodeRemovedFromDocument', cleanup);\n\n  return page;\n}\n\nfunction cleanup() {\n  tickerSubscriptions.forEach(unsub => unsub());\n  tickerSubscriptions = [];\n}\n\nasync function loadPvPTokens(gridContainer) {\n  gridContainer.innerHTML = '<div class=\"loading\" style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl);\"></div>';\n\n  // Cleanup previous subscriptions\n  cleanup();\n\n  try {\n    const binanceTokens = await fetchMultipleTickers(PVP_TOKENS);\n\n    if (binanceTokens.length > 0) {\n      const tokens = binanceTokens.map(t => ({\n        symbol: t.symbol,\n        name: TOKEN_META[t.symbol]?.name || t.symbol,\n        image: TOKEN_META[t.symbol]?.image || t.image,\n        price: t.price,\n        priceChange24h: t.priceChange24h,\n      }));\n\n      renderTokenGrid(tokens, gridContainer);\n\n      // Subscribe to real-time updates\n      tokens.forEach(token => {\n        const unsub = subscribeToTickerUpdates(token.symbol, (ticker) => {\n          updateTokenCard(token.symbol, ticker.price, ticker.priceChange24h);\n        });\n        tickerSubscriptions.push(unsub);\n      });\n\n      console.log(' PvP Tokens loaded with real-time updates');\n    } else {\n      throw new Error('No tokens loaded');\n    }\n  } catch (error) {\n    console.error('Failed to load PvP tokens:', error);\n    gridContainer.innerHTML = `\n      <div style=\"grid-column: 1 / -1; text-align: center; padding: var(--spacing-2xl); color: var(--color-danger);\">\n        Failed to load tokens. Please try again later.\n      </div>\n    `;\n  }\n}\n\nfunction renderTokenGrid(tokens, gridContainer) {\n  gridContainer.innerHTML = '';\n\n  tokens.forEach(token => {\n    const card = createTokenCard(token);\n    gridContainer.appendChild(card);\n  });\n}\n\nfunction createTokenCard(token) {\n  const card = document.createElement('div');\n  card.className = 'pvp-token-card';\n  card.dataset.symbol = token.symbol;\n\n  const changeClass = getPriceChangeClass(token.priceChange24h);\n\n  card.style.cssText = `\n    background: rgba(15, 23, 42, 0.6);\n    backdrop-filter: blur(12px);\n    border: 1px solid rgba(255, 255, 255, 0.08);\n    border-radius: 16px;\n    padding: var(--spacing-md);\n    cursor: pointer;\n    transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    gap: var(--spacing-xs);\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n  `;\n\n  card.innerHTML = `\n    <div style=\"position: absolute; inset: 0; background: radial-gradient(circle at 50% 0%, rgba(9, 194, 133, 0.08) 0%, transparent 60%); opacity: 0; transition: opacity 0.3s;\" class=\"card-glow\"></div>\n    <img src=\"${token.image}\" alt=\"${token.name}\" style=\"width: 48px; height: 48px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.1);\" onerror=\"this.style.display='none'\" />\n    <div>\n      <div style=\"font-weight: 700; font-size: 1.1rem; letter-spacing: 0.5px;\">${token.symbol}</div>\n      <div style=\"font-size: 0.8rem; color: var(--color-text-muted);\">${token.name}</div>\n    </div>\n    <div style=\"margin-top: var(--spacing-xs);\">\n      <div class=\"token-price\" style=\"font-weight: 600; font-size: 1rem;\">${formatCurrency(token.price)}</div>\n      <div class=\"token-change ${changeClass}\" style=\"font-size: 0.85rem; font-weight: 500;\">${formatPercentage(token.priceChange24h)}</div>\n    </div>\n  `;\n\n  // Hover effect\n  card.addEventListener('mouseenter', () => {\n    card.style.borderColor = 'rgba(9, 194, 133, 0.5)';\n    card.style.transform = 'translateY(-4px)';\n    card.style.boxShadow = '0 12px 40px rgba(9, 194, 133, 0.15)';\n    card.querySelector('.card-glow').style.opacity = '1';\n  });\n  card.addEventListener('mouseleave', () => {\n    card.style.borderColor = 'rgba(255, 255, 255, 0.08)';\n    card.style.transform = 'none';\n    card.style.boxShadow = 'none';\n    card.querySelector('.card-glow').style.opacity = '0';\n  });\n\n  // Click to open modal\n  card.addEventListener('click', () => {\n    openBettingModal(token);\n  });\n\n  return card;\n}\n\n\n\nfunction updateTokenCard(symbol, price, priceChange) {\n  const card = document.querySelector(`.pvp-token-card[data-symbol=\"${symbol}\"]`);\n  if (!card) return;\n\n  const priceEl = card.querySelector('.token-price');\n  const changeEl = card.querySelector('.token-change');\n\n  if (priceEl) {\n    priceEl.textContent = formatCurrency(price);\n  }\n\n  if (changeEl) {\n    changeEl.textContent = formatPercentage(priceChange);\n    changeEl.className = `token-change ${getPriceChangeClass(priceChange)}`;\n  }\n}\n\n\n\nasync function submitBet(battleDuration = 5, expiryMinutes = 30) {\n  const state = walletManager.getState();\n  if (!state.connected) {\n    alert('Please connect your wallet first!');\n    return;\n  }\n\n  if (!selectedToken || !selectedDirection || betAmount <= 0) {\n    return;\n  }\n\n  const submitBtn = document.getElementById('modal-submit-btn');\n  if (submitBtn) {\n    submitBtn.disabled = true;\n    submitBtn.innerHTML = '<div class=\"loading\"></div> Submitting...';\n  }\n\n  try {\n    // Simulate network delay and fee deduction\n    await new Promise(resolve => setTimeout(resolve, 800));\n    console.log(`[Mock] Deducting $${betAmount} USDC from wallet...`);\n\n    const bet = {\n      id: Date.now().toString(),\n      symbol: selectedToken.symbol,\n      name: selectedToken.name,\n      image: selectedToken.image,\n      direction: selectedDirection,\n      amount: betAmount,\n      duration: battleDuration,\n      expiryTime: Date.now() + (expiryMinutes * 60 * 1000),\n      startPrice: 0, // Set when matched\n      timestamp: Date.now(),\n      user: state.address, // Use real address\n      status: 'open', // 'open', 'matched', 'completed'\n    };\n\n    // Check for matching opponent\n    const oppositeDir = selectedDirection === 'up' ? 'down' : 'up';\n    const matchingBet = openBets.find(b =>\n      b.symbol === bet.symbol &&\n      b.direction === oppositeDir &&\n      b.amount === bet.amount &&\n      b.status === 'open'\n    );\n\n    if (matchingBet) {\n      // Match found! Fetch current price as reference\n      let referencePrice;\n      try {\n        const tickers = await fetchMultipleTickers([bet.symbol]);\n        referencePrice = tickers[0]?.price || selectedToken.price;\n      } catch (e) {\n        referencePrice = selectedToken.price;\n      }\n\n      // Set reference price for both players\n      matchingBet.status = 'matched';\n      matchingBet.startPrice = referencePrice;\n      bet.status = 'matched';\n      bet.startPrice = referencePrice;\n\n      const battle = {\n        id: Date.now().toString(),\n        player1: matchingBet,\n        player2: bet,\n        startTime: Date.now(),\n        endTime: Date.now() + (PVP_DURATION_MINUTES * 60 * 1000),\n        symbol: bet.symbol,\n        startPrice: referencePrice,\n      };\n\n      activeBattles.push(battle);\n      openBets = openBets.filter(b => b.id !== matchingBet.id);\n\n      showMatchNotification(battle);\n      startBattleCountdown(battle);\n    } else {\n      // No match, add to open bets\n      openBets.unshift(bet);\n      myBets.push(bet);\n      showBetPlacedNotification(bet);\n    }\n\n    // Refresh open bets panel\n    renderOpenBets();\n\n    // Reset selection logic handled by closeBettingModal which is called after this\n\n  } catch (error) {\n    alert(`Error: ${error.message}`);\n    if (submitBtn) {\n      submitBtn.disabled = false;\n      submitBtn.textContent = `Place ${selectedDirection.toUpperCase()} Bet ($${betAmount})`;\n    }\n  }\n}\n\nfunction loadOpenBets() {\n  // Simulate some existing open bets from \"other users\"\n  const mockBets = [\n    {\n      id: '1',\n      symbol: 'BTC',\n      name: 'Bitcoin',\n      image: TOKEN_META.BTC.image,\n      direction: 'up',\n      amount: 5,\n      startPrice: 0,\n      timestamp: Date.now() - 120000,\n      user: '0x1a2b...3c4d',\n      status: 'open',\n    },\n    {\n      id: '2',\n      symbol: 'ETH',\n      name: 'Ethereum',\n      image: TOKEN_META.ETH.image,\n      direction: 'down',\n      amount: 10,\n      startPrice: 0,\n      timestamp: Date.now() - 60000,\n      user: '0x5e6f...7g8h',\n      status: 'open',\n    },\n    {\n      id: '3',\n      symbol: 'SOL',\n      name: 'Solana',\n      image: TOKEN_META.SOL.image,\n      direction: 'up',\n      amount: 5,\n      startPrice: 0,\n      timestamp: Date.now() - 30000,\n      user: '0x9i0j...1k2l',\n      status: 'open',\n    },\n  ];\n\n  openBets = mockBets;\n  renderOpenBets();\n}\n\nfunction cancelBet(betId) {\n  // Remove from openBets\n  openBets = openBets.filter(b => b.id !== betId);\n\n  // Remove from myBets\n  myBets = myBets.filter(b => b.id !== betId);\n\n  // Re-render\n  renderOpenBets();\n}\n\nfunction renderOpenBets() {\n  const listEl = document.getElementById('open-bets-list');\n  const countEl = document.getElementById('open-bets-count');\n  const radarBlips = document.getElementById('radar-blips');\n\n  if (!listEl) return;\n\n  let visibleBets = openBets.filter(b => b.status === 'open');\n\n  // Apply Sorting/Filtering\n  if (currentSort === 'long') {\n    visibleBets = visibleBets.filter(b => b.direction === 'up');\n  } else if (currentSort === 'short') {\n    visibleBets = visibleBets.filter(b => b.direction === 'down');\n  }\n\n  // Always sort by recent (timestamp desc)\n  visibleBets.sort((a, b) => b.timestamp - a.timestamp);\n\n  if (countEl) {\n    countEl.textContent = visibleBets.length;\n  }\n\n  // Render radar blips\n  if (radarBlips) {\n    // Get current user for comparison\n    const state = walletManager.getState();\n    const currentUserAddress = state.connected ? state.address.slice(0, 6) + '...' + state.address.slice(-4) : null;\n\n    if (visibleBets.length === 0) {\n      radarBlips.innerHTML = '';\n    } else {\n      radarBlips.innerHTML = visibleBets.map((bet, index) => {\n        const isUp = bet.direction === 'up';\n        const isOwnBet = currentUserAddress && bet.user === currentUserAddress;\n        // Generate pseudo-random positions based on bet id for consistency\n        // Radar is now 150px, so center is at 75px\n        const angle = (parseInt(bet.id) * 137.5 + index * 45) % 360;\n        const distance = 20 + ((parseInt(bet.id) * 17) % 40); // 20-60px from center\n        const x = 75 + distance * Math.cos(angle * Math.PI / 180);\n        const y = 75 + distance * Math.sin(angle * Math.PI / 180);\n\n        return `\n          <div class=\"radar-blip ${isOwnBet ? 'own' : (isUp ? 'long' : 'short')}\" \n               style=\"left: ${x}px; top: ${y}px; animation-delay: ${index * 0.15}s; ${isOwnBet ? 'width: 14px; height: 14px; background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%); box-shadow: 0 0 10px rgba(59, 130, 246, 0.8); border: 2px solid white;' : ''}\"\n               data-bet-id=\"${bet.id}\"\n               title=\"${isOwnBet ? 'YOUR BET: ' : ''}${bet.symbol} ${isUp ? 'LONG' : 'SHORT'} $${bet.amount}\">\n            ${isOwnBet ? '<span style=\"font-size: 5px;\">YOU</span>' : ''}\n          </div>\n        `;\n      }).join('');\n\n      // Add click handlers to blips\n      radarBlips.querySelectorAll('.radar-blip').forEach(blip => {\n        blip.addEventListener('click', () => {\n          const betId = blip.dataset.betId;\n          const card = listEl.querySelector(`[data-bet-id=\"${betId}\"]`);\n          if (card) {\n            card.scrollIntoView({ behavior: 'smooth', block: 'center' });\n            card.style.borderColor = '#09C285';\n            card.style.boxShadow = '0 0 20px rgba(9, 194, 133, 0.3)';\n            setTimeout(() => {\n              card.style.borderColor = 'var(--glass-border)';\n              card.style.boxShadow = 'none';\n            }, 2000);\n          }\n        });\n      });\n    }\n  }\n\n  if (visibleBets.length === 0) {\n    listEl.innerHTML = `\n      <div style=\"text-align: center; padding: var(--spacing-xl); color: var(--color-text-muted);\">\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" style=\"margin-bottom: var(--spacing-sm); opacity: 0.5;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n          <path d=\"M8 12h8M12 8v8\"></path>\n        </svg>\n        <div>No signals detected</div>\n        <div style=\"font-size: 0.85rem; margin-top: var(--spacing-xs);\">Be the first to broadcast a bet!</div>\n      </div>\n    `;\n    return;\n  }\n\n  // Get current user address for comparison\n  const state = walletManager.getState();\n  const currentUserAddress = state.connected ? state.address.slice(0, 6) + '...' + state.address.slice(-4) : null;\n\n  // Separate bets\n  const othersBets = visibleBets.filter(b => !currentUserAddress || b.user !== currentUserAddress);\n  const myActiveBets = visibleBets.filter(b => currentUserAddress && b.user === currentUserAddress);\n\n  // Render Others' Bets (Active Signals)\n  if (othersBets.length === 0) {\n    listEl.innerHTML = `\n      <div style=\"text-align: center; padding: var(--spacing-xl); color: var(--color-text-muted);\">\n        <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" style=\"margin-bottom: var(--spacing-sm); opacity: 0.5;\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n          <path d=\"M8 12h8M12 8v8\"></path>\n        </svg>\n        <div>No signals active</div>\n        <div style=\"font-size: 0.85rem; margin-top: var(--spacing-xs);\">Be the first to broadcast a bet!</div>\n      </div>\n    `;\n  } else {\n    listEl.innerHTML = othersBets.map(bet => {\n      const timeAgo = getTimeAgo(bet.timestamp);\n      const isUp = bet.direction === 'up';\n      const dirColor = isUp ? '#09C285' : '#EF4444';\n      const dirIcon = isUp ? '' : '';\n      const dirLabel = isUp ? 'UP' : 'DOWN';\n\n      return `\n        <div class=\"open-bet-card\" data-bet-id=\"${bet.id}\" style=\"\n          background: rgba(9, 194, 133, 0.05);\n          border: 1px solid rgba(9, 194, 133, 0.15);\n          border-radius: var(--radius-md);\n          padding: var(--spacing-sm);\n          cursor: pointer;\n          transition: all 0.2s ease;\n          position: relative;\n        \">\n          <div style=\"display: flex; align-items: center; gap: var(--spacing-sm);\">\n            <img src=\"${bet.image}\" alt=\"${bet.symbol}\" style=\"width: 24px; height: 24px; border-radius: 50%;\" onerror=\"this.style.display='none'\" />\n            <div style=\"flex: 1;\">\n              <div style=\"font-weight: 600; font-size: 0.85rem;\">${bet.symbol}</div>\n              <div style=\"font-size: 0.7rem; color: var(--color-text-muted);\">${bet.user}</div>\n            </div>\n            <div style=\"text-align: right;\">\n              <div style=\"font-weight: 700; font-size: 0.8rem; color: ${dirColor};\">${dirIcon} ${dirLabel}</div>\n              <div style=\"font-size: 0.75rem; font-weight: 600;\">$${bet.amount}</div>\n            </div>\n          </div>\n          <div style=\"display: flex; justify-content: space-between; align-items: center; margin-top: var(--spacing-xs); padding-top: var(--spacing-xs); border-top: 1px solid rgba(255,255,255,0.05);\">\n            <span style=\"font-size: 0.7rem; color: var(--color-text-muted);\">${timeAgo}</span>\n            <button class=\"accept-bet-btn\" data-bet-id=\"${bet.id}\" style=\"\n              padding: 3px 10px;\n              font-size: 0.7rem;\n              background: ${isUp ? 'rgba(239, 68, 68, 0.2)' : 'rgba(9, 194, 133, 0.2)'};\n              color: ${isUp ? '#EF4444' : '#09C285'};\n              border: 1px solid ${isUp ? 'rgba(239, 68, 68, 0.3)' : 'rgba(9, 194, 133, 0.3)'};\n              border-radius: var(--radius-sm);\n              cursor: pointer;\n              font-weight: 600;\n              transition: all 0.2s;\n            \">CHALLENGE</button>\n          </div>\n        </div>\n      `;\n    }).join('');\n  }\n\n  // Render My Bets (Footer)\n  const myBetsListEl = document.getElementById('my-bets-list');\n  if (myBetsListEl) {\n    if (myActiveBets.length === 0) {\n      myBetsListEl.innerHTML = `\n        <div style=\"font-size: 0.8rem; color: var(--color-text-muted); text-align: center; padding: 16px; border: 1px dashed rgba(255,255,255,0.15); border-radius: 8px;\">\n          You have no active bets.\n        </div>\n      `;\n    } else {\n      myBetsListEl.innerHTML = myActiveBets.map(bet => {\n        const isUp = bet.direction === 'up';\n        const dirColor = isUp ? '#09C285' : '#EF4444';\n        const dirIcon = isUp ? '' : '';\n        const dirLabel = isUp ? 'UP' : 'DOWN';\n\n        return `\n          <div class=\"my-bet-card\" style=\"\n            background: rgba(59, 130, 246, 0.1);\n            border: 1px solid rgba(59, 130, 246, 0.3);\n            border-radius: var(--radius-md);\n            padding: 8px;\n            display: flex;\n            align-items: center;\n            gap: 10px;\n          \">\n            <img src=\"${bet.image}\" alt=\"${bet.symbol}\" style=\"width: 20px; height: 20px; border-radius: 50%;\" onerror=\"this.style.display='none'\" />\n            <div style=\"flex: 1;\">\n              <div style=\"font-weight: 600; font-size: 0.8rem;\">${bet.symbol}</div>\n              <div style=\"font-size: 0.7rem; font-weight: 700; color: ${dirColor};\">${dirIcon} ${dirLabel} <span style=\"color: var(--color-text-primary); margin-left: 4px;\">$${bet.amount}</span></div>\n            </div>\n            <button class=\"cancel-bet-btn\" data-bet-id=\"${bet.id}\" style=\"\n              padding: 4px 8px;\n              font-size: 0.65rem;\n              background: rgba(239, 68, 68, 0.2);\n              color: #EF4444;\n              border: 1px solid rgba(239, 68, 68, 0.3);\n              border-radius: 4px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.2s;\n            \">CANCEL</button>\n          </div>\n        `;\n      }).join('');\n    }\n\n    // Attach listener for cancel buttons\n    myBetsListEl.querySelectorAll('.cancel-bet-btn').forEach(btn => {\n      btn.addEventListener('click', (e) => {\n        e.stopPropagation();\n        openCancelMatchModal(btn.dataset.betId);\n      });\n    });\n  }\n\n  // Add hover effects\n  listEl.querySelectorAll('.open-bet-card').forEach(card => {\n    card.addEventListener('mouseenter', () => {\n      card.style.borderColor = 'rgba(9, 194, 133, 0.4)';\n      card.style.background = 'rgba(9, 194, 133, 0.1)';\n    });\n    card.addEventListener('mouseleave', () => {\n      card.style.borderColor = 'rgba(9, 194, 133, 0.15)';\n      card.style.background = 'rgba(9, 194, 133, 0.05)';\n    });\n  });\n\n  // Accept bet buttons (only for non-own bets)\n  listEl.querySelectorAll('.accept-bet-btn').forEach(btn => {\n    btn.addEventListener('click', (e) => {\n      e.stopPropagation();\n      openAcceptMatchModal(btn.dataset.betId);\n    });\n    btn.addEventListener('mouseenter', () => {\n      btn.style.transform = 'scale(1.05)';\n    });\n    btn.addEventListener('mouseleave', () => {\n      btn.style.transform = 'scale(1)';\n    });\n  });\n}\n\nasync function openAcceptMatchModal(betId) {\n  const bet = openBets.find(b => b.id === betId);\n  if (!bet) return;\n\n  const modal = document.getElementById('accept-match-modal');\n  const backdrop = document.getElementById('pvp-backdrop');\n  if (!modal || !backdrop) return;\n\n  const isOpponentLong = bet.direction === 'up';\n  const myDirection = isOpponentLong ? 'DOWN' : 'UP';\n  const myDirColor = isOpponentLong ? '#EF4444' : '#09C285';\n  const oppDirColor = isOpponentLong ? '#09C285' : '#EF4444';\n\n  let balance = '0.00';\n  let currency = 'USDC';\n  try {\n    balance = await walletManager.getUSDCBalance();\n  } catch (e) {\n    console.error('Failed to load balance', e);\n  }\n\n  modal.innerHTML = `\n    <button type=\"button\" class=\"close-accept-modal\" style=\"position: absolute; top: 16px; right: 16px; width: 32px; height: 32px; border-radius: 50%; border: none; background: rgba(255,255,255,0.1); color: var(--color-text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; transition: all 0.2s;\"></button>\n    \n    <div style=\"text-align: center; margin-bottom: 24px;\">\n      <h2 style=\"font-size: 1.5rem; margin: 0 0 8px 0; background: linear-gradient(135deg, #F0F0F0 0%, #A0A0A0 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;\">Accept Challenge</h2>\n      <div style=\"color: var(--color-text-muted); font-size: 0.9rem; display: flex; align-items: center; justify-content: center; gap: 6px;\">\n        <span style=\"opacity: 0.7;\">VS</span> \n        <span style=\"color: var(--color-text-primary); font-weight: 600;\">${bet.user}</span>\n      </div>\n    </div>\n\n    <!-- VS Card -->\n    <div style=\"display: flex; align-items: center; justify-content: space-between; background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255,255,255,0.05); border-radius: 16px; padding: 20px;\">\n      \n      <!-- Opponent -->\n      <div style=\"text-align: center; flex: 1;\">\n        <div style=\"font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--color-text-muted); margin-bottom: 8px;\">Opponent</div>\n        <div style=\"font-weight: 800; color: ${oppDirColor}; font-size: 1.25rem; margin-bottom: 4px;\">${bet.direction.toUpperCase()}</div>\n        <div style=\"font-size: 0.9rem; font-family: 'Space Grotesk', sans-serif; opacity: 0.9;\">$${bet.amount}</div>\n      </div>\n\n      <!-- Divider -->\n      <div style=\"display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 0 12px;\">\n         <div style=\"width: 1px; height: 40px; background: rgba(255,255,255,0.1);\"></div>\n         <div style=\"background: rgba(255,255,255,0.1); color: var(--color-text-muted); font-size: 0.7rem; font-weight: 700; padding: 4px 8px; border-radius: 12px; margin: -20px 0;\">VS</div>\n      </div>\n\n      <!-- You -->\n      <div style=\"text-align: center; flex: 1;\">\n        <div style=\"font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: var(--color-text-muted); margin-bottom: 8px;\">You</div>\n        <div style=\"font-weight: 800; color: ${myDirColor}; font-size: 1.25rem; margin-bottom: 4px;\">${myDirection}</div>\n        <div style=\"font-size: 0.9rem; font-family: 'Space Grotesk', sans-serif; opacity: 0.9;\" id=\"match-your-amount\">$${bet.amount}</div>\n      </div>\n    </div>\n\n    <!-- Amount Input & Slider -->\n    <div style=\"margin-top: 24px;\">\n      <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;\">\n        <label style=\"font-size: 0.85rem; color: var(--color-text-muted); font-weight: 500;\">Match Amount</label>\n        <div style=\"font-size: 0.8rem; color: var(--color-text-secondary);\">\n          Balance: <span style=\"color: var(--color-primary); font-family: monospace;\">${balance} ${currency}</span>\n        </div>\n      </div>\n\n      <div style=\"display: flex; align-items: center; gap: 12px;\">\n        <!-- Small Input -->\n        <div style=\"position: relative; width: 140px;\">\n            <span style=\"position: absolute; left: 16px; top: 50%; transform: translateY(-50%); color: var(--color-text-secondary); font-weight: 600;\">$</span>\n            <input type=\"number\" id=\"match-amount-input\" value=\"${bet.amount}\" min=\"${bet.amount}\" step=\"1\" style=\"\n            width: 100%;\n            background: rgba(15, 23, 42, 0.6);\n            border: 1px solid rgba(255,255,255,0.1);\n            border-radius: 12px;\n            padding: 12px 12px 12px 32px;\n            color: white;\n            font-family: 'Space Grotesk', sans-serif;\n            font-size: 1.1rem;\n            font-weight: 600;\n            outline: none;\n            transition: all 0.2s;\n            -moz-appearance: textfield;\n            appearance: textfield;\n            \">\n            <style>\n                #match-amount-input::-webkit-outer-spin-button,\n                #match-amount-input::-webkit-inner-spin-button {\n                    -webkit-appearance: none;\n                    margin: 0;\n                }\n            </style>\n        </div>\n\n        <!-- Slider -->\n        <div style=\"flex: 1; display: flex; align-items: center;\">\n            <input type=\"range\" id=\"match-amount-slider\" min=\"${bet.amount}\" max=\"${Math.max(bet.amount * 5, 100)}\" value=\"${bet.amount}\" step=\"1\" style=\"\n                width: 100%;\n                cursor: pointer;\n                accent-color: #09C285;\n                height: 6px;\n                background: rgba(255,255,255,0.1);\n                border-radius: 3px;\n                outline: none;\n            \">\n        </div>\n      </div>\n\n      <p id=\"match-error\" style=\"color: #EF4444; font-size: 0.8rem; margin: 8px 0 0 0; display: none; display: flex; align-items: center; gap: 4px;\">\n        <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M12 8v4\"></path><path d=\"M12 16h.01\"></path></svg>\n        Amount must be at least $${bet.amount}\n      </p>\n    </div>\n\n    <!-- Confirm Button -->\n    <button id=\"confirm-match-btn\" style=\"\n      width: 100%;\n      padding: 18px;\n      border: none;\n      border-radius: 16px;\n      background: linear-gradient(135deg, #09C285 0%, #07a371 100%);\n      color: white;\n      font-weight: 700;\n      font-size: 1.1rem;\n      cursor: pointer;\n      margin-top: 24px;\n      transition: all 0.2s;\n      box-shadow: 0 4px 12px rgba(9, 194, 133, 0.3);\n      text-transform: uppercase;\n      letter-spacing: 0.5px;\n    \"> Submit ($${bet.amount})</button>\n  `;\n\n  // Logic\n  const input = modal.querySelector('#match-amount-input');\n  const slider = modal.querySelector('#match-amount-slider');\n  const confirmBtn = modal.querySelector('#confirm-match-btn');\n  const errorMsg = modal.querySelector('#match-error');\n  const yourAmountDisplay = modal.querySelector('#match-your-amount');\n\n  const updateUI = (val) => {\n    yourAmountDisplay.textContent = `$${val || 0}`;\n\n    // Update button text\n    if (!isNaN(val)) {\n      confirmBtn.innerHTML = ` Submit ($${val})`;\n    }\n\n    if (isNaN(val) || val < bet.amount) {\n      errorMsg.style.display = 'flex';\n      confirmBtn.disabled = true;\n      confirmBtn.style.opacity = '0.5';\n      confirmBtn.style.cursor = 'not-allowed';\n    } else {\n      errorMsg.style.display = 'none';\n      confirmBtn.disabled = false;\n      confirmBtn.style.opacity = '1';\n      confirmBtn.style.cursor = 'pointer';\n    }\n  };\n\n  input.addEventListener('input', () => {\n    const val = parseFloat(input.value);\n    slider.value = isNaN(val) ? bet.amount : val;\n    updateUI(val);\n  });\n\n  slider.addEventListener('input', () => {\n    const val = parseFloat(slider.value);\n    input.value = val;\n    updateUI(val);\n  });\n\n  confirmBtn.addEventListener('click', () => {\n    const val = parseFloat(input.value);\n    if (!isNaN(val) && val >= bet.amount) {\n      processAcceptBet(bet.id, val);\n      closeAcceptMatchModal();\n    }\n  });\n\n  modal.querySelector('.close-accept-modal').addEventListener('click', closeAcceptMatchModal);\n\n  // Show\n  modal.style.opacity = '1';\n  modal.style.transform = 'translate(-50%, -50%) scale(1)';\n  modal.style.pointerEvents = 'auto';\n  backdrop.style.opacity = '1';\n  backdrop.style.pointerEvents = 'auto';\n}\n\nfunction closeAcceptMatchModal() {\n  const modal = document.getElementById('accept-match-modal');\n  const backdrop = document.getElementById('pvp-backdrop');\n  if (modal && backdrop) {\n    modal.style.opacity = '0';\n    modal.style.transform = 'translate(-50%, -50%) scale(0.9)';\n    modal.style.pointerEvents = 'none';\n    backdrop.style.opacity = '0';\n    backdrop.style.pointerEvents = 'none';\n  }\n}\n\n// Modal functions\nfunction closeBettingModal() {\n  const modal = document.getElementById('pvp-betting-modal');\n  const backdrop = document.getElementById('pvp-backdrop');\n  if (modal && backdrop) {\n    modal.style.opacity = '0';\n    modal.style.transform = 'translate(-50%, -50%) scale(0.9)';\n    modal.style.pointerEvents = 'none';\n    backdrop.style.opacity = '0';\n    backdrop.style.pointerEvents = 'none';\n\n    // Clear selection state after delay\n    setTimeout(() => {\n      selectedToken = null;\n    }, 300);\n  }\n}\n\nasync function openBettingModal(token) {\n  const modal = document.getElementById('pvp-betting-modal');\n  const backdrop = document.getElementById('pvp-backdrop');\n\n  if (!modal || !backdrop) return;\n\n  selectedToken = token;\n  let modalDirection = null;\n  let modalAmount = 5;\n  let modalDuration = 5;\n  let modalExpiry = 30;\n  let userBalance = 0;\n  let isCustomInput = false; // Tracks if user is manually inputting/adding\n  const changeClass = getPriceChangeClass(token.priceChange24h);\n\n  // Fetch balance asynchronously\n  walletManager.getUSDCBalance().then(b => {\n    userBalance = parseFloat(b);\n    updateStyles();\n  }).catch(e => console.error(e));\n\n  modal.innerHTML = `\n    <button type=\"button\" class=\"modal-close-btn\" style=\"position: absolute; top: 16px; right: 16px; width: 32px; height: 32px; border-radius: 50%; border: none; background: rgba(255,255,255,0.1); color: var(--color-text-muted); cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 18px; transition: all 0.2s;\"></button>\n    \n    <div style=\"display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;\">\n      <div style=\"display: flex; align-items: center; gap: 12px;\">\n        <img src=\"${token.image}\" alt=\"${token.name}\" style=\"width: 42px; height: 42px; border-radius: 50%; border: 2px solid rgba(255,255,255,0.1);\" onerror=\"this.style.display='none'\" />\n        <div style=\"text-align: left;\">\n          <div style=\"font-size: 1.25rem; font-weight: 700; line-height: 1.1;\">${token.symbol}</div>\n          <div style=\"font-size: 0.85rem; color: var(--color-text-muted);\">${token.name}</div>\n        </div>\n      </div>\n      \n      <div style=\"text-align: right;\">\n        <div style=\"font-size: 1.1rem; font-weight: 600;\">${formatCurrency(token.price)}</div>\n        <div class=\"${changeClass}\" style=\"font-size: 0.85rem; font-weight: 500;\">${formatPercentage(token.priceChange24h)}</div>\n      </div>\n    </div>\n    \n    <div style=\"width: 100%;\">\n      <div style=\"font-size: 0.85rem; color: var(--color-text-muted); margin-bottom: 12px;\">Battle Duration</div>\n      <div style=\"display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px; margin-bottom: 16px;\">\n        ${BATTLE_DURATIONS.map(d => `\n          <button type=\"button\" class=\"duration-btn\" data-val=\"${d.value}\" style=\"flex: 0 0 auto; padding: 6px 12px; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; background: transparent; color: var(--color-text-secondary); font-size: 0.8rem; cursor: pointer; transition: all 0.2s;\">${d.label}</button>\n        `).join('')}\n      </div>\n\n      <div style=\"font-size: 0.85rem; color: var(--color-text-muted); margin-bottom: 12px;\">Expiry Time (Cancel if no match)</div>\n      <div style=\"display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px;\">\n        ${EXPIRY_TIMES.map(t => `\n          <button type=\"button\" class=\"expiry-btn\" data-val=\"${t.value}\" style=\"flex: 0 0 auto; padding: 6px 12px; border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; background: transparent; color: var(--color-text-secondary); font-size: 0.8rem; cursor: pointer; transition: all 0.2s;\">${t.label}</button>\n        `).join('')}\n      </div>\n    </div>\n\n    <div style=\"width: 100%; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 20px;\">\n      <div style=\"font-size: 0.85rem; color: var(--color-text-muted); margin-bottom: 12px;\">Select Direction</div>\n      <div style=\"display: flex; gap: 12px;\">\n        <button type=\"button\" class=\"dir-btn up\" data-dir=\"up\" style=\"flex: 1; padding: 16px; border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; background: rgba(255,255,255,0.03); cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--color-text-primary); transition: all 0.2s;\">\n          <span style=\"font-weight: 700; font-size: 1.2rem;\">UP</span>\n        </button>\n        <button type=\"button\" class=\"dir-btn down\" data-dir=\"down\" style=\"flex: 1; padding: 16px; border: 2px solid rgba(255,255,255,0.1); border-radius: 12px; background: rgba(255,255,255,0.03); cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--color-text-primary); transition: all 0.2s;\">\n          <span style=\"font-weight: 700; font-size: 1.2rem;\">DOWN</span>\n        </button>\n      </div>\n    </div>\n    \n    <div style=\"width: 100%;\">\n      <div style=\"font-size: 0.85rem; color: var(--color-text-muted); margin-bottom: 12px;\">Bet Amount (USDC)</div>\n      <style>\n        /* Hide native spin buttons */\n        #bet-amount-input::-webkit-outer-spin-button,\n        #bet-amount-input::-webkit-inner-spin-button {\n          -webkit-appearance: none;\n          margin: 0;\n        }\n        #bet-amount-input {\n          -moz-appearance: textfield;\n        }\n      </style>\n      <div style=\"display: flex; gap: 8px;\">\n        <div style=\"flex: 1; position: relative; display: flex; align-items: center; border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; background: rgba(255,255,255,0.03);\">\n            <span style=\"padding-left: 16px; color: var(--color-text-secondary);\">$</span>\n            <input type=\"number\" id=\"bet-amount-input\" value=\"${modalAmount}\" min=\"5\" step=\"0.5\" style=\"\n                flex: 1;\n                width: 100%;\n                padding: 12px;\n                border: none;\n                background: transparent;\n                color: white;\n                font-family: inherit;\n                font-weight: 600;\n                outline: none;\n            \" placeholder=\"Amount\">\n            <div style=\"display: flex; flex-direction: column; border-left: 1px solid rgba(255,255,255,0.1); height: 100%;\">\n              <button type=\"button\" class=\"step-btn inc\" style=\"flex: 1; border: none; background: transparent; color: var(--color-text-secondary); padding: 0 10px; font-size: 10px; cursor: pointer; border-bottom: 1px solid rgba(255,255,255,0.1); border-top-right-radius: 10px; display: flex; align-items: center; justify-content: center;\"></button>\n              <button type=\"button\" class=\"step-btn dec\" style=\"flex: 1; border: none; background: transparent; color: var(--color-text-secondary); padding: 0 10px; font-size: 10px; cursor: pointer; border-bottom-right-radius: 10px; display: flex; align-items: center; justify-content: center;\"></button>\n            </div>\n        </div>\n        <button type=\"button\" class=\"amount-btn active\" data-amount=\"5\" style=\"flex: 0 0 60px; padding: 12px; border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; background: transparent; color: var(--color-text-secondary); font-weight: 600; cursor: pointer; transition: all 0.2s;\">$5</button>\n        <button type=\"button\" class=\"amount-btn\" data-amount=\"10\" style=\"flex: 0 0 60px; padding: 12px; border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; background: transparent; color: var(--color-text-secondary); font-weight: 600; cursor: pointer; transition: all 0.2s;\">$10</button>\n      </div>\n    </div>\n    \n    <button type=\"button\" id=\"modal-submit-btn\" disabled style=\"width: 100%; padding: 16px; border: none; border-radius: 12px; background: linear-gradient(135deg, #09C285 0%, #07a371 100%); color: white; font-weight: 700; font-size: 1.1rem; cursor: pointer; margin-top: 8px; opacity: 0.5;\">Select Direction</button>\n  `;\n\n  // Update styles for active buttons\n  const updateStyles = () => {\n    // Buttons Text\n    const btn5 = modal.querySelector('.amount-btn[data-amount=\"5\"]');\n    const btn10 = modal.querySelector('.amount-btn[data-amount=\"10\"]');\n    if (btn5 && btn10) {\n      if (isCustomInput) {\n        btn5.textContent = '+5';\n        btn10.textContent = '+10';\n      } else {\n        btn5.textContent = '$5';\n        btn10.textContent = '$10';\n      }\n    }\n\n    // Amounts\n    modal.querySelectorAll('.amount-btn').forEach(btn => {\n      // Highlight only if NOT custom and matches matches\n      if (!isCustomInput && parseFloat(btn.dataset.amount) === modalAmount) {\n        btn.style.borderColor = '#09C285';\n        btn.style.backgroundColor = 'rgba(9, 194, 133, 0.15)';\n        btn.style.color = 'white';\n      } else {\n        btn.style.borderColor = 'rgba(255,255,255,0.1)';\n        btn.style.backgroundColor = 'transparent';\n        btn.style.color = 'var(--color-text-secondary)';\n      }\n    });\n\n    // Directions\n    modal.querySelectorAll('.dir-btn').forEach(btn => {\n      const dir = btn.dataset.dir;\n      if (dir === modalDirection) {\n        if (dir === 'up') {\n          btn.style.borderColor = '#09C285';\n          btn.style.backgroundColor = 'rgba(9, 194, 133, 0.2)';\n          btn.style.color = '#09C285';\n          btn.style.boxShadow = '0 0 20px rgba(9, 194, 133, 0.2)';\n        } else {\n          btn.style.borderColor = '#EF4444';\n          btn.style.backgroundColor = 'rgba(239, 68, 68, 0.2)';\n          btn.style.color = '#EF4444';\n          btn.style.boxShadow = '0 0 20px rgba(239, 68, 68, 0.2)';\n        }\n      } else {\n        btn.style.borderColor = 'rgba(255,255,255,0.1)';\n        btn.style.backgroundColor = 'rgba(255,255,255,0.03)';\n        btn.style.color = 'var(--color-text-primary)';\n        btn.style.boxShadow = 'none';\n      }\n    });\n\n    // Submit button\n    const submitBtn = modal.querySelector('#modal-submit-btn');\n    submitBtn.style.background = 'linear-gradient(135deg, #09C285 0%, #07a371 100%)'; // Reset gradient\n\n    if (modalAmount < 5) {\n      submitBtn.disabled = true;\n      submitBtn.style.opacity = '0.5';\n      submitBtn.style.cursor = 'not-allowed';\n      submitBtn.textContent = 'Min Bet is $5';\n      submitBtn.style.background = '#374151'; // Grey\n    } else if (modalAmount > userBalance) {\n      submitBtn.disabled = true;\n      submitBtn.style.opacity = '0.5';\n      submitBtn.style.cursor = 'not-allowed';\n      submitBtn.textContent = 'Insufficient Balance';\n      submitBtn.style.background = '#EF4444'; // Red for error\n    } else if (!modalDirection) {\n      submitBtn.disabled = true;\n      submitBtn.style.opacity = '0.5';\n      submitBtn.style.cursor = 'not-allowed';\n      submitBtn.textContent = 'Select Direction';\n    } else {\n      submitBtn.disabled = false;\n      submitBtn.style.opacity = '1';\n      submitBtn.style.cursor = 'pointer';\n      submitBtn.textContent = `Place ${modalDirection.toUpperCase()} Bet ($${modalAmount})`;\n    }\n\n    // Attachment logic for durations/expiry highlighting ... \n    // We must re-run this or keep it separate? \n    // This function runs on every update. It should update styles.\n    // Durations styling logic is duplicated here from previous implementation?\n    // I should ensure I include it.\n    modal.querySelectorAll('.duration-btn').forEach(btn => {\n      if (parseInt(btn.dataset.val) === modalDuration) {\n        btn.style.borderColor = 'var(--color-primary)';\n        btn.style.background = 'rgba(9, 194, 133, 0.15)';\n        btn.style.color = 'white';\n      } else {\n        btn.style.borderColor = 'rgba(255,255,255,0.1)';\n        btn.style.background = 'transparent';\n        btn.style.color = 'var(--color-text-secondary)';\n      }\n    });\n\n    // Expiry\n    modal.querySelectorAll('.expiry-btn').forEach(btn => {\n      if (parseInt(btn.dataset.val) === modalExpiry) {\n        btn.style.borderColor = 'var(--color-primary)';\n        btn.style.background = 'rgba(9, 194, 133, 0.15)';\n        btn.style.color = 'white';\n      } else {\n        btn.style.borderColor = 'rgba(255,255,255,0.1)';\n        btn.style.background = 'transparent';\n        btn.style.color = 'var(--color-text-secondary)';\n      }\n    });\n  };\n\n  // Attach listeners\n  modal.querySelector('.modal-close-btn').addEventListener('click', closeBettingModal);\n\n  modal.querySelectorAll('.dir-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      modalDirection = btn.dataset.dir;\n      updateStyles();\n    });\n  });\n\n  modal.querySelectorAll('.amount-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      const amt = parseFloat(btn.dataset.amount);\n      if (isCustomInput) {\n        modalAmount = parseFloat((modalAmount + amt).toFixed(2));\n      } else {\n        modalAmount = amt;\n      }\n      const input = modal.querySelector('#bet-amount-input');\n      if (input) input.value = modalAmount;\n      updateStyles();\n    });\n  });\n\n  const amountInput = modal.querySelector('#bet-amount-input');\n  if (amountInput) {\n    amountInput.addEventListener('input', () => {\n      modalAmount = parseFloat(amountInput.value) || 0;\n      isCustomInput = true; // User typed manually\n      updateStyles();\n    });\n    // Focus styling\n    amountInput.addEventListener('focus', () => amountInput.parentElement.style.borderColor = 'var(--color-primary)');\n    amountInput.addEventListener('blur', () => amountInput.parentElement.style.borderColor = 'rgba(255,255,255,0.1)');\n\n    // Stepper\n    modal.querySelectorAll('.step-btn').forEach(btn => {\n      btn.addEventListener('click', () => {\n        let val = parseFloat(amountInput.value) || 0;\n        if (btn.classList.contains('inc')) val += 1;\n        else val -= 1;\n        if (val < 0.1) val = 0.1; // Or min 5?\n        // Stepper should probably respect min 5 if strict? \n        // But user might want to step up to 5.\n        amountInput.value = parseFloat(val.toFixed(1));\n        amountInput.dispatchEvent(new Event('input'));\n      });\n    });\n  }\n\n  modal.querySelectorAll('.duration-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      modalDuration = parseInt(btn.dataset.val);\n      updateStyles();\n    });\n  });\n\n  modal.querySelectorAll('.expiry-btn').forEach(btn => {\n    btn.addEventListener('click', () => {\n      modalExpiry = parseInt(btn.dataset.val);\n      updateStyles();\n    });\n  });\n\n  modal.querySelector('#modal-submit-btn').addEventListener('click', async () => {\n    if (!modalDirection || modalAmount < 5) return;\n    selectedDirection = modalDirection;\n    betAmount = modalAmount;\n    await submitBet(modalDuration, modalExpiry);\n    closeBettingModal();\n  });\n\n  // Initial render styles\n  updateStyles();\n\n  // Show modal\n  modal.style.opacity = '1';\n  modal.style.transform = 'translate(-50%, -50%) scale(1)';\n  modal.style.pointerEvents = 'auto';\n  backdrop.style.opacity = '1';\n  backdrop.style.pointerEvents = 'auto';\n}\n\nasync function processAcceptBet(betId, matchAmount) {\n  const state = walletManager.getState();\n  if (!state.connected) {\n    alert('Please connect your wallet first!');\n    return;\n  }\n\n  const bet = openBets.find(b => b.id === betId);\n  if (!bet || bet.status !== 'open') return;\n\n  // Get current price\n  console.log(`[Mock] Deducting $${matchAmount} USDC from acceptor...`);\n  try {\n    const tickers = await fetchMultipleTickers([bet.symbol]);\n    const currentPrice = tickers[0]?.price || bet.startPrice;\n\n    const myBet = {\n      id: Date.now().toString(),\n      symbol: bet.symbol,\n      name: bet.name,\n      image: bet.image,\n      direction: bet.direction === 'up' ? 'down' : 'up',\n      amount: matchAmount, // Use the matched amount which might be higher\n      startPrice: currentPrice,\n      timestamp: Date.now(),\n      user: state.address.slice(0, 6) + '...' + state.address.slice(-4),\n      status: 'matched',\n    };\n\n    bet.status = 'matched';\n    bet.startPrice = currentPrice;\n\n    const battle = {\n      id: Date.now().toString(),\n      player1: bet,\n      player2: myBet,\n      startTime: Date.now(),\n      endTime: Date.now() + (bet.duration * 60 * 1000),\n      symbol: bet.symbol,\n      startPrice: currentPrice,\n    };\n\n    activeBattles.push(battle);\n    openBets = openBets.filter(b => b.id !== betId);\n\n    showMatchNotification(battle);\n    startBattleCountdown(battle);\n    renderOpenBets();\n\n  } catch (error) {\n    alert(`Error accepting bet: ${error.message}`);\n  }\n}\n\nfunction showMatchNotification(battle) {\n  const notification = document.createElement('div');\n  notification.style.cssText = `\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: var(--glass-bg);\n    backdrop-filter: blur(16px);\n    border: 2px solid var(--color-primary);\n    border-radius: var(--radius-xl);\n    padding: var(--spacing-xl);\n    text-align: center;\n    z-index: 1000;\n    animation: matchPop 0.5s ease-out;\n    min-width: 300px;\n  `;\n\n  notification.innerHTML = `\n    <style>\n      @keyframes matchPop {\n        0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }\n        50% { transform: translate(-50%, -50%) scale(1.1); }\n        100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }\n      }\n    </style>\n    <div style=\"font-size: 3rem; margin-bottom: var(--spacing-sm);\"></div>\n    <h2 style=\"color: var(--color-primary); margin-bottom: var(--spacing-xs);\">MATCHED!</h2>\n    <p style=\"color: var(--color-text-secondary); margin-bottom: var(--spacing-md);\">\n      Battle starts now for ${battle.symbol}\n    </p>\n    <div style=\"display: flex; justify-content: center; gap: var(--spacing-lg); margin-bottom: var(--spacing-md);\">\n      <div>\n        <div style=\"font-size: 0.85rem; color: var(--color-text-muted);\">${battle.player1.user}</div>\n        <div style=\"font-weight: 700; color: ${battle.player1.direction === 'up' ? '#09C285' : '#EF4444'};\">\n          ${battle.player1.direction === 'up' ? ' UP' : ' DOWN'}\n        </div>\n      </div>\n      <div style=\"font-size: 2rem; font-weight: 800; margin: var(--spacing-md) 0; display: flex; align-items: center; justify-content: center; gap: var(--spacing-xl);\">\n        <div style=\"color: ${battle.player1.direction === 'up' ? '#09C285' : '#EF4444'}\">\n          ${battle.player1.direction === 'up' ? ' UP' : ' DOWN'}\n        </div>\n        <div style=\"font-size: 1rem; opacity: 0.5;\">VS</div>\n        <div style=\"color: ${battle.player2.direction === 'up' ? '#09C285' : '#EF4444'}\">\n          ${battle.player2.direction === 'up' ? ' UP' : ' DOWN'}\n        </div>\n      </div>\n    </div>\n    <div style=\"font-size: 0.9rem; color: var(--color-text-muted);\">\n      Prize Pool: <strong style=\"color: var(--color-primary);\">$${battle.player1.amount + battle.player2.amount}</strong>\n    </div>\n  `;\n\n  document.body.appendChild(notification);\n\n  // Auto-remove after 3 seconds\n  setTimeout(() => {\n    notification.style.opacity = '0';\n    notification.style.transition = 'opacity 0.3s';\n    setTimeout(() => notification.remove(), 300);\n  }, 3000);\n}\n\nfunction showBetPlacedNotification(bet) {\n  const notification = document.createElement('div');\n  notification.style.cssText = `\n    position: fixed;\n    bottom: 24px;\n    left: 50%;\n    transform: translateX(-50%);\n    background: var(--glass-bg);\n    backdrop-filter: blur(12px);\n    border: 1px solid var(--color-primary);\n    border-radius: var(--radius-lg);\n    padding: var(--spacing-md) var(--spacing-lg);\n    z-index: 1000;\n    animation: slideUpNotif 0.3s ease-out;\n  `;\n\n  notification.innerHTML = `\n    <style>\n      @keyframes slideUpNotif {\n        from { opacity: 0; transform: translate(-50%, 20px); }\n        to { opacity: 1; transform: translate(-50%, 0); }\n      }\n    </style>\n    <div style=\"display: flex; align-items: center; gap: var(--spacing-md);\">\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--color-primary)\" stroke-width=\"2\">\n        <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\n        <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\n      </svg>\n      <div>\n        <div style=\"font-weight: 600;\">Bet Placed!</div>\n        <div style=\"font-size: 0.85rem; color: var(--color-text-muted);\">Waiting for opponent...</div>\n      </div>\n    </div>\n  `;\n\n  document.body.appendChild(notification);\n\n  setTimeout(() => {\n    notification.style.opacity = '0';\n    notification.style.transition = 'opacity 0.3s';\n    setTimeout(() => notification.remove(), 300);\n  }, 3000);\n}\n\nfunction startBattleCountdown(battle) {\n  // Create floating tracker\n  const tracker = document.createElement('div');\n  tracker.id = `battle-tracker-${battle.id}`;\n  tracker.style.cssText = `\n    position: fixed;\n    bottom: 24px;\n    right: 24px;\n    background: rgba(15, 23, 42, 0.9);\n    backdrop-filter: blur(12px);\n    border: 1px solid var(--color-primary);\n    border-radius: var(--radius-lg);\n    padding: var(--spacing-md);\n    z-index: 999;\n    min-width: 240px;\n    animation: fadeIn 0.3s ease-out;\n  `;\n\n  document.body.appendChild(tracker);\n\n  // Update countdown\n  const updateTracker = async () => {\n    const remaining = battle.endTime - Date.now();\n\n    if (remaining <= 0) {\n      // Battle ended - determine winner\n      await resolveBattle(battle, tracker);\n      return;\n    }\n\n    const mins = Math.floor(remaining / 60000);\n    const secs = Math.floor((remaining % 60000) / 1000);\n\n    // Get current price\n    let currentPrice = battle.startPrice;\n    try {\n      const tickers = await fetchMultipleTickers([battle.symbol]);\n      currentPrice = tickers[0]?.price || battle.startPrice;\n    } catch (e) { }\n\n    const priceChange = ((currentPrice - battle.startPrice) / battle.startPrice * 100);\n    const isUp = priceChange >= 0;\n\n    tracker.innerHTML = `\n      <div style=\"display: flex; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-sm);\">\n        <span style=\"font-size: 1.2rem;\"></span>\n        <span style=\"font-weight: 600;\">${battle.symbol} Battle</span>\n        <span style=\"margin-left: auto; font-family: monospace; font-weight: 600;\">${mins}:${secs.toString().padStart(2, '0')}</span>\n      </div>\n      <div style=\"display: flex; justify-content: space-between; font-size: 0.85rem; color: var(--color-text-muted);\">\n        <span>Start: ${formatCurrency(battle.startPrice)}</span>\n        <span style=\"color: ${isUp ? '#09C285' : '#EF4444'}; font-weight: 600;\">\n          Now: ${formatCurrency(currentPrice)} (${isUp ? '+' : ''}${priceChange.toFixed(2)}%)\n        </span>\n      </div>\n      <div style=\"margin-top: var(--spacing-sm); padding-top: var(--spacing-sm); border-top: 1px solid var(--glass-border); display: flex; justify-content: space-between; font-size: 0.8rem;\">\n        <span style=\"color: ${battle.player1.direction === 'up' ? '#09C285' : '#EF4444'};\">${battle.player1.user}: ${battle.player1.direction.toUpperCase()}</span>\n        <span style=\"color: ${battle.player2.direction === 'up' ? '#09C285' : '#EF4444'};\">${battle.player2.user}: ${battle.player2.direction.toUpperCase()}</span>\n      </div>\n    `;\n\n    setTimeout(updateTracker, 1000);\n  };\n\n  updateTracker();\n}\n\nasync function resolveBattle(battle, tracker) {\n  // Get final price\n  let finalPrice = battle.startPrice;\n  try {\n    const tickers = await fetchMultipleTickers([battle.symbol]);\n    finalPrice = tickers[0]?.price || battle.startPrice;\n  } catch (e) { }\n\n  const priceChange = ((finalPrice - battle.startPrice) / battle.startPrice * 100);\n  const priceWentUp = priceChange > 0;\n  const priceWentDown = priceChange < 0;\n\n  let winner = null;\n  let loser = null;\n\n  if (priceChange === 0) {\n    // Tie - no winner\n  } else {\n    // Determine winner based on direction\n    const player1Wins = (battle.player1.direction === 'up' && priceWentUp) ||\n      (battle.player1.direction === 'down' && priceWentDown);\n\n    if (player1Wins) {\n      winner = battle.player1;\n      loser = battle.player2;\n    } else {\n      winner = battle.player2;\n      loser = battle.player1;\n    }\n  }\n\n  const prizePool = (battle.player1.amount + battle.player2.amount) * 0.97; // 3% Platform Fee\n\n  tracker.innerHTML = `\n    <div style=\"text-align: center; padding: var(--spacing-sm);\">\n      <div style=\"font-size: 2rem; margin-bottom: var(--spacing-xs);\">${winner ? '' : ''}</div>\n      <div style=\"font-weight: 700; font-size: 1.1rem; color: ${winner ? 'var(--color-primary)' : 'var(--color-text-primary)'};\">\n        ${winner ? `${winner.user} WINS!` : \"IT'S A TIE!\"}\n      </div>\n      <div style=\"font-size: 0.85rem; color: var(--color-text-muted); margin: var(--spacing-xs) 0;\">\n        ${battle.symbol}: ${formatCurrency(battle.startPrice)}  ${formatCurrency(finalPrice)}\n        <span style=\"color: ${priceChange >= 0 ? '#09C285' : '#EF4444'};\">(${priceChange >= 0 ? '+' : ''}${priceChange.toFixed(2)}%)</span>\n      </div>\n      ${winner ? `\n        <div style=\"font-weight: 600; color: var(--color-primary);\">\n          Prize: $${prizePool}\n        </div>\n      ` : ''}\n      <button onclick=\"this.parentElement.parentElement.remove()\" style=\"\n        margin-top: var(--spacing-sm);\n        padding: var(--spacing-xs) var(--spacing-md);\n        background: var(--color-primary);\n        color: white;\n        border: none;\n        border-radius: var(--radius-sm);\n        cursor: pointer;\n        font-weight: 600;\n      \">Close</button>\n    </div>\n  `;\n\n  // Remove from active battles\n  activeBattles = activeBattles.filter(b => b.id !== battle.id);\n}\n\nfunction getTimeAgo(timestamp) {\n  const seconds = Math.floor((Date.now() - timestamp) / 1000);\n  if (seconds < 60) return `${seconds}s ago`;\n  const minutes = Math.floor(seconds / 60);\n  if (minutes < 60) return `${minutes}m ago`;\n  const hours = Math.floor(minutes / 60);\n  return `${hours}h ago`;\n}\n\nfunction openCancelMatchModal(betId) {\n  const bet = openBets.find(b => b.id === betId);\n  if (!bet) return; // Should allow searching in myBets too if needed, but openBets contains them.\n\n  const modal = document.getElementById('cancel-match-modal');\n  const backdrop = document.getElementById('pvp-backdrop');\n  if (!modal || !backdrop) return;\n\n  modal.innerHTML = `\n    <div style=\"margin-bottom: 8px;\">\n        <div style=\"width: 48px; height: 48px; background: rgba(239, 68, 68, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px auto;\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#EF4444\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 6L6 18M6 6l12 12\"></path></svg>\n        </div>\n        <h3 style=\"font-size: 1.25rem; font-weight: 700; margin-bottom: 8px;\">Cancel Prediction?</h3>\n        <p style=\"color: var(--color-text-secondary); font-size: 0.9rem;\">\n            Do you want to cancel your prediction for <strong>${bet.symbol}</strong>?\n        </p>\n    </div>\n    \n    <div style=\"display: flex; gap: 12px; margin-top: 16px;\">\n        <button id=\"cancel-no-btn\" style=\"\n            flex: 1; padding: 14px; border: 1px solid rgba(255,255,255,0.1); border-radius: 12px;\n            background: rgba(255,255,255,0.05); color: white; font-weight: 600; cursor: pointer; transition: all 0.2s;\n        \">No</button>\n        <button id=\"cancel-yes-btn\" style=\"\n            flex: 1; padding: 14px; border: none; border-radius: 12px;\n            background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%); color: white; font-weight: 600; cursor: pointer; transition: all 0.2s;\n            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);\n        \">Yes</button>\n    </div>\n  `;\n\n  // Listeners\n  modal.querySelector('#cancel-no-btn').onclick = closeCancelMatchModal;\n  modal.querySelector('#cancel-yes-btn').onclick = () => {\n    cancelBet(betId);\n    closeCancelMatchModal();\n  };\n\n  // Show\n  modal.style.opacity = '1';\n  modal.style.transform = 'translate(-50%, -50%) scale(1)';\n  modal.style.pointerEvents = 'auto';\n  backdrop.style.opacity = '1';\n  backdrop.style.pointerEvents = 'auto';\n}\n\nfunction closeCancelMatchModal() {\n  const modal = document.getElementById('cancel-match-modal');\n  const backdrop = document.getElementById('pvp-backdrop');\n  if (modal && backdrop) {\n    modal.style.opacity = '0';\n    modal.style.transform = 'translate(-50%, -50%) scale(0.9)';\n    modal.style.pointerEvents = 'none';\n    backdrop.style.opacity = '0';\n    backdrop.style.pointerEvents = 'none';\n  }\n}\n\nfunction checkExpiredBets() {\n  const now = Date.now();\n  const expired = openBets.filter(b => b.status === 'open' && b.expiryTime && b.expiryTime < now);\n\n  if (expired.length > 0) {\n    expired.forEach(bet => {\n      console.log(`[Mock] Bet ${bet.id} expired. Refunding $${bet.amount}...`);\n      cancelBet(bet.id);\n    });\n  }\n}\n\n","// Pending Action Widget Component\n// Floating widget that appears when user has pending team submission\n\nimport { subscribeToTeam, isTeamComplete, setShouldOpenModal, getSelectedTeam } from '../utils/teamState.js';\nimport { navigate } from '../App.js';\n\nlet widgetElement = null;\nlet unsubscribe = null;\n\nexport function createPendingActionWidget() {\n  // Create widget element\n  widgetElement = document.createElement('div');\n  widgetElement.id = 'pending-action-widget';\n  widgetElement.innerHTML = `\n    <div class=\"pending-widget-icon\">\n      <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n        <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n        <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line>\n        <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>\n      </svg>\n    </div>\n    <span class=\"pending-widget-text\">Pending Dream Team Selection</span>\n    <span class=\"pending-widget-badge\">0</span>\n  `;\n\n  // Add styles\n  addWidgetStyles();\n\n  // Add click handler\n  widgetElement.addEventListener('click', handleWidgetClick);\n\n  // Subscribe to team changes\n  unsubscribe = subscribeToTeam(updateWidgetVisibility);\n\n  // Initial visibility check\n  updateWidgetVisibility();\n\n  // Append to body\n  document.body.appendChild(widgetElement);\n\n  return widgetElement;\n}\n\nfunction handleWidgetClick() {\n  const team = getSelectedTeam();\n\n  // Set flag to auto-open modal ONLY if team is complete\n  if (team.length === 15) {\n    setShouldOpenModal(true);\n  } else {\n    setShouldOpenModal(false);\n  }\n\n  // Navigate to Dream Team page\n  navigate('/dream-team');\n\n  // Hide widget immediately\n  if (widgetElement) {\n    widgetElement.style.display = 'none';\n  }\n}\n\nfunction updateWidgetVisibility(team) {\n  if (!widgetElement) return;\n\n  // Use provided team or get latest\n  const currentTeam = Array.isArray(team) ? team : getSelectedTeam();\n\n  // Check if we're on Dream Team page\n  const currentPath = window.location.hash.replace('#', '') || '/';\n  const isOnDreamTeam = currentPath === '/dream-team';\n\n  // Show widget only if:\n  // 1. Team has ANY selection (> 0)\n  // 2. User is NOT on Dream Team page\n  if (currentTeam.length > 0 && !isOnDreamTeam) {\n    widgetElement.style.display = 'flex';\n    widgetElement.classList.add('pulse');\n\n    // Update count badge\n    const badge = widgetElement.querySelector('.pending-widget-badge');\n    if (badge) badge.textContent = currentTeam.length;\n\n    // Update text based on completeness\n    const textEl = widgetElement.querySelector('.pending-widget-text');\n    if (textEl) {\n      if (currentTeam.length === 15) {\n        textEl.textContent = \"Dream Team Ready to Submit\";\n        badge.style.background = \"#09C285\"; // Green for ready\n      } else {\n        textEl.textContent = \"Pending Dream Team Selection\";\n        badge.style.background = \"var(--color-primary)\"; // Default blue\n      }\n    }\n\n  } else {\n    widgetElement.style.display = 'none';\n    widgetElement.classList.remove('pulse');\n  }\n}\n\n// Call this when route changes\nexport function onRouteChange() {\n  updateWidgetVisibility();\n}\n\nfunction addWidgetStyles() {\n  const styleId = 'pending-widget-styles';\n  if (document.getElementById(styleId)) return;\n\n  const style = document.createElement('style');\n  style.id = styleId;\n  style.textContent = `\n    #pending-action-widget {\n      position: fixed;\n      bottom: 24px;\n      right: 24px;\n      z-index: 9999;\n      \n      display: none;\n      align-items: center;\n      gap: 12px;\n      \n      padding: 12px 20px;\n      background: rgba(15, 23, 42, 0.8);\n      backdrop-filter: blur(12px);\n      -webkit-backdrop-filter: blur(12px);\n      border: 1px solid rgba(255, 255, 255, 0.1);\n      border-radius: 12px;\n      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n      \n      cursor: pointer;\n      transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n    }\n\n    #pending-action-widget:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);\n      border-color: var(--color-primary);\n      background: rgba(15, 23, 42, 0.9);\n    }\n    \n    .pending-widget-icon {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: var(--color-primary);\n    }\n    \n    .pending-widget-text {\n      font-family: var(--font-primary);\n      font-weight: 600;\n      font-size: 0.95rem;\n      color: #fff;\n    }\n\n    .pending-widget-badge {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      min-width: 24px;\n      height: 24px;\n      padding: 0 8px;\n      background: var(--color-primary);\n      color: white;\n      border-radius: 6px;\n      font-size: 0.8rem;\n      font-weight: 700;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n    }\n\n    #pending-action-widget.pulse {\n      animation: widgetPulse 2s infinite;\n    }\n\n    @keyframes widgetPulse {\n      0% {\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n      }\n      50% {\n        box-shadow: 0 4px 25px rgba(9, 194, 133, 0.4);\n      }\n      100% {\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.25);\n      }\n    }\n  `;\n  document.head.appendChild(style);\n}\n\nexport function destroyWidget() {\n  if (unsubscribe) {\n    unsubscribe();\n  }\n  if (widgetElement && widgetElement.parentNode) {\n    widgetElement.parentNode.removeChild(widgetElement);\n  }\n  widgetElement = null;\n}\n","\n// Polymarket Service using Gamma API\n\n// Use proxy in development to avoid CORS, direct URL in production (though prod needs a backend proxy too usually)\nconst BASE_URL = import.meta.env.DEV ? '/api/polymarket' : 'https://gamma-api.polymarket.com';\n\n/**\n * Fetch trending/active markets from Polymarket\n * Uses the events endpoint sorted by volume to find \"trending\"\n * @param {number} limit \n * @returns {Promise<Array>}\n */\nexport async function fetchTrendingMarkets(limit = 20) {\n    try {\n        // Fetch active events, sorted by 24h volume (descending) to get \"trending\"\n        // Note: Gamma API structure might require adjustments based on specific field availability\n        const url = `${BASE_URL}/events?limit=${limit}&active=true&closed=false&order=volume24hr&ascending=false`;\n\n        const response = await fetch(url);\n        if (!response.ok) {\n            throw new Error(`Polymarket API error: ${response.statusText}`);\n        }\n\n        const data = await response.json();\n\n        // Transform data to a usable format\n        // The API returns a list of events. Each event has markets.\n        return transformEvents(data);\n\n    } catch (error) {\n        console.error('Error fetching Polymarket data:', error);\n        return [];\n    }\n}\n\n/**\n * Fetch markets with flexible options (search, category, etc.)\n * @param {Object} options \n * @returns {Promise<Array>}\n */\nexport async function fetchMarkets({ limit = 20, active = true, closed = false, order = 'volume24hr', ascending = false, tag_id = '', slug = '' } = {}) {\n    try {\n        const params = new URLSearchParams({\n            limit,\n            active,\n            closed,\n            order,\n            ascending\n        });\n\n        if (tag_id) params.append('tag_id', tag_id);\n        if (slug) params.append('slug', slug); // Gamma API supports partial text matches on slug/question often via specific params, checking capability.\n        // Note: Gamma API has strict filtering. Search is often best done via specialized endpoint or by client-side if dataset small. \n        // However, let's try strict params.\n\n        let url = `${BASE_URL}/events?${params.toString()}`;\n\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(response.statusText);\n\n        const data = await response.json();\n        return transformEvents(data);\n    } catch (error) {\n        console.error('Error fetching markets:', error);\n        return [];\n    }\n}\n\n/**\n * Search markets by text\n * @param {string} query \n * @returns {Promise<Array>}\n */\nexport async function searchMarkets(query) {\n    // Basic search via Gamma API often requires using the 'q' param or specific query endpoint if available.\n    // Gamma API standard events endpoint might not support full text search efficiently.\n    // We will try standard 'slug' or client side filter if needed, but 'events' endpoint often supports ?q=\n    // Let's try URL construction with 'q' or fallback to specific tags.\n    try {\n        // Warning: Gamma API might differ on search. \n        // Using `?q=` is common convention.\n        const url = `${BASE_URL}/events?q=${encodeURIComponent(query)}&active=true&closed=false&limit=20&order=volume24hr&ascending=false`;\n        const response = await fetch(url);\n        if (!response.ok) throw new Error(response.statusText);\n        const data = await response.json();\n        return transformEvents(data);\n    } catch (error) {\n        console.error('Error searching markets:', error);\n        return [];\n    }\n}\n\n/**\n * Fetch markets by category ID\n * @param {string} tagId \n * @returns {Promise<Array>}\n */\nexport async function fetchMarketsByCategory(tagId) {\n    return fetchMarkets({ tag_id: tagId });\n}\n\n\n// Helper to transform raw API event data\nfunction transformEvents(data) {\n    if (!Array.isArray(data)) return [];\n\n    return data.map(event => {\n        const market = event.markets?.[0];\n        if (!market) return null;\n\n        return {\n            id: event.id,\n            title: event.title,\n            image: event.image,\n            volume: event.volume,\n            volume24hr: event.volume24hr,\n            description: event.description,\n            slug: event.slug,\n            category: event.tags?.[0]?.label || 'General',\n            endDate: event.endDate,\n            outcomes: market.outcomes ? JSON.parse(market.outcomes) : [],\n            outcomePrices: market.outcomePrices ? JSON.parse(market.outcomePrices) : [],\n            question: market.question\n        };\n    }).filter(item => item !== null);\n}\n\n/**\n * Format volume number\n * @param {number} num \n * @returns {string}\n */\nexport function formatVolume(num) {\n    if (num >= 1000000) {\n        return '$' + (num / 1000000).toFixed(2) + 'M';\n    }\n    if (num >= 1000) {\n        return '$' + (num / 1000).toFixed(2) + 'K';\n    }\n    return '$' + parseFloat(num).toFixed(2);\n}\n","\nimport { fetchTrendingMarkets, searchMarkets, fetchMarketsByCategory, formatVolume } from '../services/polymarketService.js';\n\nexport function createPredictionMarket() {\n    const page = document.createElement('div');\n    page.className = 'prediction-market-page';\n    page.style.cssText = `\n        padding: var(--spacing-xl);\n        max-width: 1200px;\n        margin: 0 auto;\n        animation: fadeIn 0.5s ease-out;\n    `;\n\n    // Header\n    const header = document.createElement('div');\n    header.style.cssText = `\n        margin-bottom: var(--spacing-2xl);\n        text-align: center;\n    `;\n    header.innerHTML = `\n        <h1 style=\"font-size: 2.5rem; margin-bottom: var(--spacing-sm); display: flex; align-items: center; justify-content: center; gap: 12px;\">\n            <span style=\"font-size: 2.5rem;\"></span> Polymarket Trending\n        </h1>\n        <p style=\"color: var(--color-text-secondary); font-size: 1.1rem;\">\n            Top trending prediction markets happening right now\n        </p>\n    `;\n    page.appendChild(header);\n\n    // Inject Mobile/Responsive Styles\n    const style = document.createElement('style');\n    style.textContent = `\n        @media (max-width: 768px) {\n            .prediction-market-page {\n                padding: var(--spacing-md) !important;\n            }\n            .prediction-grid {\n                grid-template-columns: 1fr !important;\n                gap: var(--spacing-md) !important;\n            }\n            .controls-container {\n                margin-bottom: var(--spacing-lg) !important;\n            }\n            #market-search {\n                font-size: 16px !important; /* Prevent iOS zoom on focus */\n                padding: 14px 20px !important;\n                padding-left: 48px !important;\n            }\n            .category-btn {\n                padding: 10px 20px !important;\n                font-size: 1rem !important;\n            }\n            .market-card {\n                /* Ensure cards look good on small screens */\n            }\n        }\n    `;\n    page.appendChild(style);\n\n    // Search and Filter Container\n    const controls = document.createElement('div');\n    controls.className = 'controls-container'; // Added class for media query targeting\n    controls.style.cssText = `\n        display: flex;\n        flex-direction: column;\n        gap: var(--spacing-md);\n        margin-bottom: var(--spacing-xl);\n        max-width: 800px;\n        margin-left: auto;\n        margin-right: auto;\n    `;\n    page.appendChild(controls);\n\n    // Search Bar\n    const searchContainer = document.createElement('div');\n    searchContainer.style.cssText = `\n        position: relative;\n        width: 100%;\n    `;\n    searchContainer.innerHTML = `\n        <input type=\"text\" id=\"market-search\" placeholder=\"Search markets (e.g. Trump, Crypto, NFL)...\" style=\"\n            width: 100%;\n            padding: 12px 20px;\n            padding-left: 48px;\n            background: var(--glass-bg);\n            border: 1px solid var(--glass-border);\n            border-radius: var(--radius-full);\n            color: var(--color-text-primary);\n            font-size: 1rem;\n            outline: none;\n            transition: border-color 0.2s;\n        \">\n        <svg class=\"search-icon\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" style=\"\n            position: absolute;\n            left: 16px;\n            top: 50%;\n            transform: translateY(-50%);\n            color: var(--color-text-muted);\n            pointer-events: none;\n        \">\n            <circle cx=\"11\" cy=\"11\" r=\"8\"></circle>\n            <line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\"></line>\n        </svg>\n    `;\n    controls.appendChild(searchContainer);\n\n    // Categories\n    const categories = [\n        { id: 'all', label: 'Trending' }, // Default\n        { id: 'politics', label: 'Politics', tagId: '2' }, // Verified ID: 2\n        { id: 'crypto', label: 'Crypto', tagId: '21' }, // Verified ID: 21\n        { id: 'sports', label: 'Sports', tagId: '1' }, // Verified ID: 1\n        { id: 'pop-culture', label: 'Pop Culture' }, // Fallback to search\n        { id: 'business', label: 'Business' }, // Fallback to search\n        { id: 'science', label: 'Science' }, // Fallback to search\n    ];\n\n    const categoryContainer = document.createElement('div');\n    categoryContainer.style.cssText = `\n        display: flex;\n        gap: var(--spacing-sm);\n        overflow-x: auto;\n        padding-bottom: 4px;\n        scrollbar-width: none;\n        justify-content: center;\n    `;\n\n    let activeCategory = 'all';\n\n    categories.forEach(cat => {\n        const btn = document.createElement('button');\n        btn.textContent = cat.label;\n        btn.className = `category-btn ${cat.id === activeCategory ? 'active' : ''}`;\n        btn.style.cssText = `\n            padding: 8px 16px;\n            border-radius: var(--radius-full);\n            border: 1px solid var(--glass-border);\n            background: ${cat.id === activeCategory ? 'var(--color-primary)' : 'var(--glass-bg)'};\n            color: ${cat.id === activeCategory ? '#000' : 'var(--color-text-secondary)'};\n            font-size: 0.9rem;\n            cursor: pointer;\n            white-space: nowrap;\n            transition: all 0.2s;\n        `;\n\n        btn.onclick = () => {\n            // Update UI\n            document.querySelectorAll('.category-btn').forEach(b => {\n                b.style.background = 'var(--glass-bg)';\n                b.style.color = 'var(--color-text-secondary)';\n            });\n            btn.style.background = 'var(--color-primary)';\n            btn.style.color = '#000';\n\n            activeCategory = cat.id;\n            loadMarkets(grid, { category: cat });\n        };\n\n        categoryContainer.appendChild(btn);\n    });\n    controls.appendChild(categoryContainer);\n\n\n    // Grid Container\n    const grid = document.createElement('div');\n    grid.className = 'prediction-grid';\n    grid.style.cssText = `\n        display: grid;\n        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n        gap: var(--spacing-lg);\n    `;\n    page.appendChild(grid);\n\n    // Initial Load\n    grid.innerHTML = `\n        <div style=\"grid-column: 1 / -1; display: flex; flex-direction: column; align-items: center; padding: 40px;\">\n            <div class=\"loading\" style=\"width: 40px; height: 40px; margin-bottom: 20px;\"></div>\n            <div style=\"color: var(--color-text-secondary);\">Loading markets...</div>\n        </div>\n    `;\n\n    loadMarkets(grid);\n\n    // Search Logic\n    const searchInput = searchContainer.querySelector('#market-search');\n    let bounceTimer;\n    searchInput.addEventListener('input', (e) => {\n        clearTimeout(bounceTimer);\n        bounceTimer = setTimeout(() => {\n            const query = e.target.value.trim();\n            if (query.length > 2) {\n                loadMarkets(grid, { search: query });\n            } else if (query.length === 0) {\n                loadMarkets(grid, { category: categories.find(c => c.id === activeCategory) });\n            }\n        }, 500);\n    });\n\n    return page;\n}\n\nasync function loadMarkets(container, { category = { id: 'all' }, search = '' } = {}) {\n    container.innerHTML = `\n        <div style=\"grid-column: 1 / -1; display: flex; flex-direction: column; align-items: center; padding: 40px;\">\n            <div class=\"loading\" style=\"width: 40px; height: 40px; margin-bottom: 20px;\"></div>\n            <div style=\"color: var(--color-text-secondary);\">Loading...</div>\n        </div>\n    `;\n\n    try {\n        let markets = [];\n\n        if (search) {\n            markets = await searchMarkets(search);\n        } else if (category.id === 'all') {\n            markets = await fetchTrendingMarkets(20);\n        } else {\n            // Use tagId if available, otherwise search by label\n            if (category.tagId) {\n                markets = await fetchMarketsByCategory(category.tagId);\n            } else {\n                markets = await searchMarkets(category.label);\n            }\n        }\n\n        if (markets.length === 0) {\n            container.innerHTML = `\n                <div style=\"grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--color-text-secondary);\">\n                    No markets found.\n                </div>\n            `;\n            return;\n        }\n\n        container.innerHTML = ''; // Clear loading\n\n        markets.forEach(market => {\n            const card = createMarketCard(market);\n            container.appendChild(card);\n        });\n\n    } catch (error) {\n        container.innerHTML = `\n            <div style=\"grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--color-danger);\">\n                Failed to load markets.\n            </div>\n        `;\n    }\n}\n\nfunction createMarketCard(market) {\n    const card = document.createElement('div');\n    card.className = 'market-card';\n    card.style.cssText = `\n        background: var(--glass-bg);\n        border: 1px solid var(--glass-border);\n        border-radius: var(--radius-lg);\n        overflow: hidden;\n        transition: transform 0.2s, box-shadow 0.2s;\n        display: flex;\n        flex-direction: column;\n        height: 100%;\n    `;\n\n    // Hover effect\n    card.onmouseenter = () => {\n        card.style.transform = 'translateY(-4px)';\n        card.style.borderColor = 'var(--color-primary)';\n    };\n    card.onmouseleave = () => {\n        card.style.transform = 'translateY(0)';\n        card.style.borderColor = 'var(--glass-border)';\n    };\n\n    // Calculate probabilities if available\n    const yesPrice = market.outcomePrices?.[0] ? (parseFloat(market.outcomePrices[0]) * 100).toFixed(0) : '0';\n    const noPrice = market.outcomePrices?.[1] ? (parseFloat(market.outcomePrices[1]) * 100).toFixed(0) : '0';\n\n    card.innerHTML = `\n        <div style=\"padding: var(--spacing-md); display: flex; gap: var(--spacing-md); border-bottom: 1px solid var(--glass-border);\">\n            <img src=\"${market.image}\" alt=\"Market\" style=\"width: 48px; height: 48px; border-radius: 50%; object-fit: cover; background: var(--color-bg-tertiary);\">\n            <div style=\"flex: 1;\">\n                <div style=\"font-size: 0.75rem; color: var(--color-primary); font-weight: 600; text-transform: uppercase; margin-bottom: 4px;\">\n                    ${market.category}\n                </div>\n                <div style=\"font-weight: 600; font-size: 1rem; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;\">\n                    ${market.title}\n                </div>\n            </div>\n        </div>\n        \n        <div style=\"padding: var(--spacing-md); flex: 1; display: flex; flex-direction: column; justify-content: flex-end;\">\n            \n            <div style=\"display: flex; gap: 8px; margin-bottom: var(--spacing-md);\">\n                <div style=\"flex: 1; background: rgba(9, 194, 133, 0.1); border: 1px solid rgba(9, 194, 133, 0.3); padding: 8px; border-radius: 8px; text-align: center;\">\n                    <div style=\"font-size: 0.75rem; color: var(--color-text-secondary); margin-bottom: 2px;\">Yes</div>\n                    <div style=\"font-weight: 700; color: #09C285; font-size: 1.1rem;\">${yesPrice}%</div>\n                </div>\n                <div style=\"flex: 1; background: rgba(255, 77, 79, 0.1); border: 1px solid rgba(255, 77, 79, 0.3); padding: 8px; border-radius: 8px; text-align: center;\">\n                     <div style=\"font-size: 0.75rem; color: var(--color-text-secondary); margin-bottom: 2px;\">No</div>\n                    <div style=\"font-weight: 700; color: #FF4D4F; font-size: 1.1rem;\">${noPrice}%</div>\n                </div>\n            </div>\n\n            <div style=\"display: flex; justify-content: space-between; align-items: center; font-size: 0.85rem; color: var(--color-text-secondary);\">\n                <div>24h Vol: <span style=\"color: var(--color-text-primary);\">${formatVolume(market.volume24hr)}</span></div>\n                <a href=\"https://polymarket.com/event/${market.slug}\" target=\"_blank\" class=\"btn btn-sm btn-secondary\" style=\"text-decoration: none;\">View</a>\n            </div>\n        </div>\n    `;\n\n    return card;\n}\n","// Main Application Component\n\nimport { createHeader } from './components/Header.js';\nimport { createSidebar, initSidebar } from './components/Sidebar.js';\nimport { createHomePage } from './components/HomePage.js';\nimport { createCryptoDuel } from './components/games/CryptoDuel.js';\nimport { createDreamTeam } from './components/games/DreamTeam.js';\nimport { createTimeBasedAction } from './components/games/TimeBasedAction.js';\nimport { createPredictCandle } from './components/games/PredictCandle.js';\nimport { createPvPBattle } from './components/games/PvPBattle.js';\nimport { createPendingActionWidget, onRouteChange } from './components/PendingActionWidget.js';\n\nimport { createPredictionMarket } from './components/PredictionMarket.js';\n\n// Simple router state\nlet currentRoute = '/';\nlet sidebarElement = null;\nlet appContainerElement = null;\nlet mainElement = null;\nlet headerElement = null;\n\nexport function createApp() {\n    const app = document.createElement('div');\n    app.className = 'app';\n\n    // Create header\n    headerElement = createHeader();\n    app.appendChild(headerElement);\n\n    // Create app container for sidebar + main content\n    appContainerElement = document.createElement('div');\n    appContainerElement.className = 'app-container';\n\n    // Create sidebar (will be shown/hidden based on route)\n    sidebarElement = createSidebar();\n    appContainerElement.appendChild(sidebarElement);\n\n    // Create main content area\n    mainElement = document.createElement('main');\n    mainElement.className = 'main-content';\n    mainElement.style.minHeight = 'calc(100vh - 64px)';\n    appContainerElement.appendChild(mainElement);\n\n    app.appendChild(appContainerElement);\n\n    // Create pending action widget (floating)\n    createPendingActionWidget();\n\n    // Initial render\n    renderRoute(mainElement);\n\n    // Initialize sidebar navigation\n    setTimeout(() => initSidebar(), 0);\n\n    // Listen for route changes\n    window.addEventListener('popstate', () => {\n        renderRoute(mainElement);\n        onRouteChange(); // Update widget visibility\n    });\n\n    // Listen for sidebar navigation\n    window.addEventListener('navigate', (e) => {\n        const page = e.detail.page;\n        navigate(`/${page}`);\n    });\n\n    return app;\n}\n\nfunction renderRoute(container) {\n    // Clear current content\n    container.innerHTML = '';\n\n    // Get current route\n    const path = window.location.hash.slice(1) || '/';\n    currentRoute = path;\n\n    // Determine if sidebar should be shown\n    const isGameMode = ['/crypto-duel', '/dream-team', '/time-based', '/predict-candle', '/pvp-battle', '/prediction-market'].includes(path);\n\n    if (headerElement) {\n        if (path === '/') {\n            headerElement.classList.add('home-transparent');\n        } else {\n            headerElement.classList.remove('home-transparent');\n        }\n    }\n\n    // Show/hide sidebar based on route\n    if (sidebarElement) {\n        if (isGameMode) {\n            sidebarElement.style.display = 'flex';\n            // Main content should have sidebar spacing\n            if (mainElement) {\n                mainElement.style.marginLeft = '';\n                mainElement.style.width = '';\n            }\n        } else {\n            sidebarElement.style.display = 'none';\n            // Main content should take full width\n            if (mainElement) {\n                mainElement.style.marginLeft = '0';\n                mainElement.style.width = '100%';\n            }\n        }\n    }\n\n    // Render appropriate component\n    let component;\n\n    switch (path) {\n        case '/':\n            component = createHomePage();\n            break;\n        case '/crypto-duel':\n            component = createCryptoDuel();\n            break;\n        case '/dream-team':\n            component = createDreamTeam();\n            break;\n        case '/time-based':\n            component = createTimeBasedAction();\n            break;\n        case '/predict-candle':\n            component = createPredictCandle();\n            break;\n        case '/pvp-battle':\n            component = createPvPBattle();\n            break;\n        case '/prediction-market':\n            component = createPredictionMarket();\n            break;\n        default:\n            component = create404Page();\n    }\n\n    container.appendChild(component);\n\n    // Scroll to top\n    window.scrollTo(0, 0);\n}\n\nfunction create404Page() {\n    const page = document.createElement('div');\n    page.className = 'container';\n    page.style.cssText = 'text-align: center; padding: var(--spacing-3xl);';\n\n    page.innerHTML = `\n    <h1 style=\"font-size: 4rem; margin-bottom: var(--spacing-md);\">404</h1>\n    <p style=\"font-size: 1.5rem; color: var(--color-text-secondary); margin-bottom: var(--spacing-xl);\">\n      Page not found\n    </p>\n    <a href=\"#/\" class=\"btn btn-primary\">Go Home</a>\n  `;\n\n    return page;\n}\n\n// Navigation helper\nexport function navigate(path) {\n    window.location.hash = path;\n    window.dispatchEvent(new PopStateEvent('popstate'));\n}\n","// Main Application Entry Point\n\nimport '/src/styles/index.css';\nimport '/src/styles/components.css';\nimport '/src/styles/game-cards.css';\nimport '/src/styles/animations.css';\nimport '/src/styles/sidebar.css';\nimport { createApp } from './App.js';\nimport walletManager from './wallet/walletManager.js';\n\n// Initialize the application\nasync function init() {\n    console.log(' Initializing Crypto Leagues...');\n\n    // Try to auto-connect wallet\n    try {\n        await walletManager.autoConnect();\n    } catch (error) {\n        console.log('No previous wallet connection found');\n    }\n\n    // Create and mount the app\n    const app = createApp();\n    const appContainer = document.getElementById('app');\n\n    if (appContainer) {\n        appContainer.appendChild(app);\n    } else {\n        console.error('App container not found!');\n    }\n\n    console.log(' Crypto Leagues initialized');\n}\n\n// Start the app when DOM is ready\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n} else {\n    init();\n}\n"],"file":"assets/index-wy-yczG_.js"}